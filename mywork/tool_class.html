
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>总体情况 &#8212; reports</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'mywork/tool_class';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/mylogo_p.png" class="logo__image only-light" alt="reports - Home"/>
    <script>document.write(`<img src="../_static/mylogo_p.png" class="logo__image only-dark" alt="reports - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to my reports
                </a>
            </li>
        </ul>
        
    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/waterchinap/jb_reports" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/mywork/tool_class.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>总体情况</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">总体情况</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">利润构成-分行业看</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">分行业利润绝对值</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">行业增长</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">行业利润增长波动</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">利润增长</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">Markdown</span>
<span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Template</span><span class="p">,</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">FileSystemLoader</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;fivethirtyeight&#39;</span><span class="p">)</span> <span class="c1"># bmh, ggplot, from plt.style.avalable</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.sans-serif&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;SimHei&#39;</span><span class="p">]</span>  <span class="c1">#解决中文显示乱码问题</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.unicode_minus&#39;</span><span class="p">]</span><span class="o">=</span><span class="kc">False</span>  <span class="c1">#解决坐标轴负数的负号显示问题</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Anaindex</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        github中的数据已经整理过，df只包括至2022年度数据，code去除了2023年上市公司的数据。</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">idx</span> <span class="o">=</span> <span class="n">idx</span>
        <span class="n">idx_s</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;../../mydata/yjbg_y2022_</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s1">.pkl.gz&#39;</span>
        <span class="n">code_s</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;../../mydata//ashare_basic.pkl.gz&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="n">idx_s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="n">code_s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;qs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quant</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;idxmax&#39;</span><span class="p">,</span> <span class="s1">&#39;idxmin&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">merged</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yeargp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indudf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;indu&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indutb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indudf</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namedf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nametb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">namedf</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">showProfile</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">col_profile</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span> <span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">col_profile</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;列名&#39;</span><span class="p">,</span> <span class="s1">&#39;类型&#39;</span><span class="p">,</span> <span class="s1">&#39;缺失比%&#39;</span><span class="p">,</span><span class="s1">&#39;样例&#39;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">col_profile</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">data_overall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="k">def</span> <span class="nf">stat_cards</span><span class="p">():</span>  
            <span class="n">sum_byear</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quant</span><span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">]</span>                
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;sum&#39;</span> <span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sum_byear</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">:</span><span class="s1">.3</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;inc&#39;</span> <span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">pow</span><span class="p">(</span><span class="n">sum_byear</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">sum_byear</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sum_byear</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="si">:</span><span class="s1"> .2%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">card</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        
        <span class="c1"># 每年的&#39;sum, mean, median&#39;</span>
        <span class="n">quant_byear</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quant</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">]],</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1"> of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">]}</span>
        <span class="c1"># 每年的交易所，板块分布</span>
        <span class="n">market_ex</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_market_ex</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;market&#39;</span><span class="p">,</span> <span class="s1">&#39;ex&#39;</span><span class="p">]}</span>

        <span class="n">res</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stat&#39;</span><span class="p">:</span> <span class="n">stat_cards</span><span class="p">()</span>
               <span class="p">,</span> <span class="s1">&#39;quant_byear&#39;</span> <span class="p">:</span> <span class="n">quant_byear</span>
               <span class="p">,</span> <span class="s1">&#39;market_ex&#39;</span><span class="p">:</span> <span class="n">market_ex</span>
               <span class="p">}</span>
        <span class="k">return</span> <span class="n">res</span>
    
    <span class="k">def</span> <span class="nf">card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入字典类型数据</span>
<span class="sd">        输出：k是标题，v是内容一般为了显示巨大数据</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;../_static/&#39;</span><span class="p">))</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;test.html&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">HTML</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">dic_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">plot_hbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        基础hbar</span>
<span class="sd">        输入df必须规范化好，第一列标签是Y轴，第二列是数据X轴。</span>
<span class="sd">        输出为降排列的hbar</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">cols</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">:O&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">cols</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="n">height</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">*</span><span class="mi">18</span><span class="o">+</span><span class="mi">80</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_ybar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2s&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        基础hbar</span>
<span class="sd">        输入df必须规范化好，第一列标签是Y轴年份，第二列是数据X轴。</span>
<span class="sd">        输出为按年排列的bar</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">cols</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">:O&#39;</span><span class="p">),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">cols</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="n">height</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">*</span><span class="mi">18</span><span class="o">+</span><span class="mi">80</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mindf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">quant</span><span class="p">[</span><span class="s1">&#39;idxmin&#39;</span><span class="p">],[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">mindf</span> <span class="o">=</span> <span class="n">mindf</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">[[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]])</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="n">mindf</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]],</span><span class="sa">f</span><span class="s1">&#39;min of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="si">}</span><span class="s1"> by year&#39;</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;brown&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">maxdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">quant</span><span class="p">[</span><span class="s1">&#39;idxmax&#39;</span><span class="p">],[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">maxdf</span> <span class="o">=</span> <span class="n">maxdf</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">[[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]])</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="n">maxdf</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]],</span><span class="sa">f</span><span class="s1">&#39;max of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="si">}</span><span class="s1"> by year&#39;</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span> <span class="o">+</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_bin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;分布&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;.0f&#39;</span><span class="p">):</span>
        <span class="c1"># 第一列是属性，对第二列bin</span>
        
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bin</span><span class="p">()</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;count()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;数量&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">fig</span>
        
    <span class="k">def</span> <span class="nf">plot_sbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输出为：纵轴按年份排列，横轴按类别进行百分比对比的条形图。</span>
<span class="sd">        数据第一行为年份，第二列为分类，第3列为数据。</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;sum(</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="s1">&#39;normalize&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">:O&#39;</span><span class="p">),</span>
            <span class="n">color</span><span class="o">=</span> <span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;percent by </span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="n">height</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">*</span><span class="mi">9</span><span class="o">+</span><span class="mi">60</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_lose_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入三列：year, cat, data</span>
<span class="sd">        输出按年排列，正负值的数量和金额对比两张图。</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">ldf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="n">count</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>
            <span class="nb">sum</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">()),</span>
            <span class="n">正负</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;负值&#39;</span>
        <span class="p">)</span>
        <span class="n">wdf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="n">count</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>
            <span class="nb">sum</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">()),</span>
            <span class="n">正负</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;正值&#39;</span>
        <span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ldf</span><span class="p">,</span> <span class="n">wdf</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">res</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_sbar</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;正负&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">]]),</span>
            <span class="s1">&#39;sum&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_sbar</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;正负&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">]])</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">plot_market_ex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cat</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        按市场和按交易所的变化可以合成一组。</span>
<span class="sd">        cat:market, ex</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">df</span>  <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="n">cat</span><span class="p">])[</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_sbar</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">mostn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入为3列df,第一列为year, indu | name, data</span>
<span class="sd">        mostn: 合计前后n</span>
<span class="sd">        mostn_byear：分年前后n</span>
<span class="sd">        mostn_count:上榜前后n次数统计</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">res</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;mostn_</span><span class="si">{</span><span class="n">flag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_mostn</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">)</span>
            <span class="n">res</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;mostn_byear_</span><span class="si">{</span><span class="n">flag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_mostn_byear</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">)</span>
            <span class="n">res</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;mostn_count_</span><span class="si">{</span><span class="n">flag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_mostn_count</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">)</span>
            <span class="n">res</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;most_</span><span class="si">{</span><span class="s2">&quot;min&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;max&quot;</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_minmax_years</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">plot_mostn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">agg</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;.0s&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入为3列df,第一列为year, indu | name, data</span>
<span class="sd">        flag=0, 统计总和前十的行业。不分年。</span>
<span class="sd">        flag=1, 统计总和后十的行业。不分年。        </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="n">flag</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">总</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">后十&#39;</span> <span class="k">if</span> <span class="n">flag</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">总</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">前</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_hbar</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_mostn_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        df columns : year, indu, profit</span>
<span class="sd">        统计每一年份进入前后十名的名字，然后统计出现次数</span>
<span class="sd">        flag = 0, 前十汇总</span>
<span class="sd">        flag = 1, 后十汇总</span>
<span class="sd">        n为前10</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">topn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="n">flag</span><span class="p">])</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">nth</span><span class="p">[:</span><span class="n">n</span><span class="p">][</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">前</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">上榜次数统计[</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">topn</span><span class="p">)</span><span class="si">}</span><span class="s1">个]&#39;</span> <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">后</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">上榜次数统计[</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">topn</span><span class="p">)</span><span class="si">}</span><span class="s1">个]&#39;</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_hbar</span><span class="p">(</span><span class="n">topn</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;.0f&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_minmax_years</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;.0s&#39;</span><span class="p">):</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">top</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="n">flag</span><span class="p">])</span>
               <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
               <span class="o">.</span><span class="n">nth</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">top</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">top</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">top</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">历年</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">最小值&#39;</span> <span class="k">if</span> <span class="n">flag</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">历年</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">最大值&#39;</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="n">top</span><span class="p">[[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]],</span> <span class="n">title</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_mostn_byear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        df columns : year, indu, profit</span>
<span class="sd">        flag=0, 统计每年利润前十的名字，3年一组全部绘制出来。</span>
<span class="sd">        flag=1, 统计每年利润后十的名字，3年一组全部绘制出来。</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="n">flag</span><span class="p">])</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">nth</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>
        <span class="c1"># 统一x坐标，以显示历史变化。</span>
        <span class="n">smax</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mf">1.05</span>
        <span class="n">smin</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mf">1.05</span>

        <span class="n">gp</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># 绘制每一年的df图，存入list</span>
        <span class="n">chartlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">sort</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span> <span class="k">if</span> <span class="n">flag</span> <span class="k">else</span> <span class="s1">&#39;-x&#39;</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">gp</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">(</span><span class="n">color</span><span class="o">=</span> <span class="s1">&#39;brown&#39;</span> <span class="k">if</span> <span class="n">flag</span> <span class="k">else</span> <span class="s1">&#39;cornflowerblue&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;.0s&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">(</span><span class="n">smin</span> <span class="k">if</span> <span class="n">flag</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span><span class="n">smax</span><span class="p">)),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:O&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort</span><span class="p">),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">n</span><span class="o">*</span><span class="mi">16</span><span class="o">+</span><span class="mi">60</span>
            <span class="p">)</span>
            <span class="n">chartlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

        <span class="c1"># 一行两列图形，先分割成两个一组的列表</span>
        <span class="n">chars</span> <span class="o">=</span> <span class="p">[</span><span class="n">chartlist</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">chartlist</span><span class="p">),</span> <span class="mi">3</span><span class="p">)]</span>
        <span class="c1"># 最终的图形是纵向拼接每一组两个横向拼接的图</span>
        <span class="n">figs</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">vconcat</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">hconcat</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
                <span class="n">row</span> <span class="o">|=</span> <span class="n">c</span>
            <span class="n">figs</span> <span class="o">&amp;=</span> <span class="n">row</span>
        
        <span class="k">return</span> <span class="n">figs</span>

    <span class="k">def</span> <span class="nf">plot_den</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        input is a series</span>
<span class="sd">        将s从大到小排列，然后累计占比。</span>
<span class="sd">        输出一个累计百分比图，显示集中度。</span>
<span class="sd">        横轴是排名前百分之几的项目，纵轴是累计占比。</span>
<span class="sd">        由天alt只能接受行数少于5000, 所以将数据百分比化。</span>
<span class="sd">        200行内直接给制，200行以上将数据缩减到100个。</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">step</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">200</span> <span class="k">else</span> <span class="mi">1</span>
        <span class="n">cum_pct</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">s</span><span class="o">/</span><span class="n">s</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
        <span class="n">num_pct</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">))])</span> <span class="o">*</span><span class="mi">100</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;cum_pct&#39;</span><span class="p">:</span><span class="n">cum_pct</span><span class="p">,</span> <span class="s1">&#39;num_pct&#39;</span><span class="p">:</span><span class="n">num_pct</span><span class="p">})</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[::</span><span class="n">step</span><span class="p">,:]</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cum_pct&#39;</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s1">&#39;num_pct&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_bank_pct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        银行、保险、券商三个行业加一起的利润占比的按年变化。</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;indu&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;banks&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;银行&#39;</span><span class="p">,</span><span class="s1">&#39;保险&#39;</span><span class="p">,</span><span class="s1">&#39;证券&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;others&#39;</span><span class="p">)</span>
        <span class="n">banks_profit</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;cat&#39;</span><span class="p">])[[</span><span class="s1">&#39;profit&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">banks_profit</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;sum(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="s1">&#39;normalize&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
            <span class="n">color</span><span class="o">=</span> <span class="s1">&#39;cat&#39;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;大金融利润占比变化&#39;</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span><span class="p">,</span>
            <span class="n">height</span> <span class="o">=</span> <span class="mi">340</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">code_shapee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        计算所有代码的shapee值</span>
<span class="sd">        输出一个从历年到最后一个报告年度的df</span>
<span class="sd">        以及一个平均值的s</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">indu_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">indu_table</span><span class="o">.</span><span class="n">columns</span>

        <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="o">-</span><span class="mi">5</span><span class="p">):</span>

            <span class="c1"># 以每年的开始持有到目前都做测试。到前三年止，只计算两年的数据可能会奇高。</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="n">indu_table</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="n">i</span><span class="p">:]</span>
            <span class="c1"># 去掉所有包含空值的项目，空值表明要么当时还没有上市，要么表示当年没法出报告。</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

            <span class="c1"># 出现过亏损的去掉，因为无法正常计算平均增长率</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="n">sel</span><span class="p">[</span><span class="n">sel</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">sel</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">res_df</span><span class="p">,</span> <span class="n">res</span><span class="p">])</span>

        <span class="n">df_by_year</span> <span class="o">=</span> <span class="n">res_df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;2010&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">s_avg</span> <span class="o">=</span> <span class="n">df_by_year</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">df_by_year</span><span class="p">,</span> <span class="n">s_avg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">indu_shapee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        计算所有行业的shapee值</span>
<span class="sd">        输出一个从历年到最后一个报告年度的df</span>
<span class="sd">        以及一个平均值的s</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">indu_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="s1">&#39;indu&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">indu_table</span><span class="o">.</span><span class="n">columns</span>

        <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">):</span>

            <span class="c1"># 以每年的开始持有到目前都做测试。到前三年止，只计算两年的数据可能会奇高。</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="n">indu_table</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="n">i</span><span class="p">:]</span>
            <span class="c1"># 去掉所有包含空值的项目，空值表明要么当时还没有这个行业，要么表示当年没法出报告。</span>
            <span class="n">sel</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="c1"># group到indu</span>
            <span class="n">byindu</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="c1"># 行业出现过亏损的去掉，因为无法正常计算平均增长率</span>
            <span class="n">byindu</span> <span class="o">=</span> <span class="n">byindu</span><span class="p">[</span><span class="n">byindu</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">byindu</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">byindu</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">res_df</span><span class="p">,</span> <span class="n">res</span><span class="p">])</span>

        <span class="n">df_by_year</span> <span class="o">=</span> <span class="n">res_df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;2010&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">s_avg</span> <span class="o">=</span> <span class="n">df_by_year</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">df_by_year</span><span class="p">,</span> <span class="n">s_avg</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">inc_byear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        df有三列</span>
<span class="sd">        df: merged[[&#39;year&#39;, &#39;name&#39;, &#39;profit&#39;]] or indudf</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)[[</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">a_mean</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;平均增长&#39;</span><span class="p">:</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">:</span><span class="s1">.2%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;byear&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;历年</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="si">}</span><span class="s1">增长&#39;</span><span class="p">,</span> <span class="s1">&#39;.0%&#39;</span><span class="p">),</span><span class="s1">&#39;a_mean&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">card</span><span class="p">(</span><span class="n">a_mean</span><span class="p">)}</span>

    <span class="k">def</span> <span class="nf">inc_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入一个表：col是年份，index是标签。</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wdf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># 去除历史上出现过负值的行</span>
        <span class="n">wdf</span> <span class="o">=</span> <span class="n">wdf</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="c1"># 去除第1列，因为是空值</span>
        <span class="n">all_win</span> <span class="o">=</span> <span class="n">wdf</span><span class="p">[</span><span class="n">wdf</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">stat</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;总数&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span><span class="s1">&#39;保持正值&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">wdf</span><span class="p">),</span><span class="s1">&#39;保持增长&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_win</span><span class="p">)}</span>

        <span class="n">neg_count</span> <span class="o">=</span> <span class="n">wdf</span><span class="p">[</span><span class="n">wdf</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;次数&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="c1"># win_bin = win_bin.to_frame(&#39;数量&#39;).reset_index(names= &#39;负增长次数&#39;)</span>
        <span class="c1"># plot_win_bin = self.plot_ybar(win_bin, &#39;出现负增长情况统计&#39;,&#39;.0f&#39;)</span>
        <span class="c1"># count_gp = wdf[wdf &lt; 0 ].count(axis=1).to_frame(&#39;counts&#39;).groupby(&#39;counts&#39;)</span>
        <span class="c1"># def plot_abin_byear(i, title):</span>
        <span class="c1">#     df = wdf[wdf.index.isin(count_gp.get_group(i).index) == True]</span>
        <span class="c1">#     df = df.melt(var_name=&#39;year&#39;, value_name=&#39;inc&#39;, ignore_index=False).reset_index()</span>
        <span class="c1">#     fig = alt.Chart(df).mark_line().encode(</span>
        <span class="c1">#         alt.X(&#39;year:O&#39;),</span>
        <span class="c1">#         alt.Y(&#39;inc:Q&#39;),</span>
        <span class="c1">#         alt.Color(&#39;indu&#39;).legend(orient=&#39;top&#39;)</span>
        <span class="c1">#     ).properties(</span>
        <span class="c1">#         title= title,</span>
        <span class="c1">#         width = &#39;container&#39;</span>
        <span class="c1">#     )</span>
        <span class="c1">#     return fig</span>

        <span class="k">def</span> <span class="nf">plot_bin</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">neg_count</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;负增长次数分布&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;.0f&#39;</span><span class="p">):</span>
            <span class="c1"># 第一列是属性，对第二列bin</span>
        
            <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bin</span><span class="p">()</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;count()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;数量&#39;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">fig</span>
        
        <span class="c1"># def plot_bin_most10(df, f, title):        </span>
        <span class="c1">#     # 数据分析做条形图</span>
        <span class="c1">#     # 取数据的前十和后十做条形图</span>
        <span class="c1">#     fig_bin = plot_bin(df, f&#39;{title}分布&#39;, f)</span>
        <span class="c1">#     fig1 = self.plot_hbar(df.head(10), f&#39;{title}前十&#39;, f)</span>
        <span class="c1">#     fig2 = self.plot_hbar(df.tail(10), f&#39;{title}后十&#39;, f)</span>
        <span class="c1">#     return (fig_bin, fig1, fig2)</span>
        
        <span class="c1"># def plot_mean():</span>
        <span class="c1">#     df = wdf.mean(1).sort_values(ascending=0).to_frame(&#39;mean&#39;).reset_index()</span>
        <span class="c1">#     return plot_bin_most10(df, &#39;.0%&#39;, &#39;平均增长率&#39;)</span>

        <span class="c1"># def plot_shapee():</span>
        <span class="c1">#     df = (wdf.mean(1) / wdf.std(1)).sort_values(ascending = 0).to_frame(&#39;shapee&#39;).reset_index()</span>
        <span class="c1">#     return plot_bin_most10(df, &#39;.2f&#39;, &#39;夏普指数&#39;)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">wdf</span><span class="p">,</span> <span class="n">neg_count</span><span class="p">,</span> <span class="n">plot_bin</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_inc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">agg</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入三列：年份，标签，数据，数据去除了绝对值为负的项目。</span>
<span class="sd">        输入：同样三列，将原来的数据列变化增长率</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">dft</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">agg</span><span class="p">)</span>
        <span class="n">dft</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">dft</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">dft</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">dft</span><span class="o">.</span><span class="n">pct_change</span><span class="p">())</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:,:]</span>
        <span class="n">ldf</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;inc&#39;</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ldf</span>

    <span class="k">def</span> <span class="nf">get_shapee</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输入三列：year, indu|name, inc,即通过get_inc()轮换的df。</span>
<span class="sd">        输出三列：year, indu|name, shapee</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inc</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>  
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>      
        <span class="n">dft</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
        <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dft</span><span class="p">)</span> <span class="o">-</span><span class="mi">3</span> <span class="p">):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">dft</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">:,]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">/</span> <span class="n">dft</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">:,]</span><span class="o">.</span><span class="n">std</span><span class="p">())</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">res_df</span><span class="p">,</span><span class="n">res</span><span class="p">])</span>

        <span class="n">res_df</span> <span class="o">=</span> <span class="n">res_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;shapee&#39;</span><span class="p">]]</span>

        <span class="k">return</span> <span class="n">res_df</span>
    
    <span class="k">def</span> <span class="nf">tidy_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        数据集中个股的报表数据出现多个空值。这分两种情况：</span>
<span class="sd">        1、报告首年不是从2010年开始的。</span>
<span class="sd">        2、在某一年缺失报告数。</span>
<span class="sd">        第二种情况出现说明出现了某种不好的状况，所以要将第二种情况排除掉。</span>
<span class="sd">        首先计算出报告首年度（注意和上市年度并不对应），第一个报告年度以前出现的空值没问题，以后出现的空值排除。</span>
<span class="sd">        每一个报告首年度对应一个报告总数，如果实际报告数等于这个数则保留，否则排除。</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">fyear</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">nth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fyear</span><span class="p">[</span><span class="s1">&#39;fyear&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fyear</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span>
        <span class="n">dft</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
        <span class="n">dft</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

        <span class="n">k</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">-</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">))]</span>
        <span class="n">tdic</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>

        <span class="n">fyear</span><span class="p">[</span><span class="s1">&#39;r_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fyear</span><span class="p">[</span><span class="s1">&#39;fyear&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">tdic</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="n">sel</span> <span class="o">=</span> <span class="n">fyear</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dft</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;r_act&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">on</span> <span class="o">=</span> <span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">sel0</span> <span class="o">=</span> <span class="n">sel</span><span class="p">[</span><span class="n">sel</span><span class="p">[</span><span class="s1">&#39;r_counts&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sel</span><span class="p">[</span><span class="s1">&#39;r_act&#39;</span><span class="p">]][</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="c1"># 中间缺少数据的个股96家，大部分不重要，但有两个：中国移动和中国人保相对重要。此数据集质量一般。</span>
        <span class="c1"># dft_sel = dft.loc[sel0,]</span>
        <span class="n">df_sel</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">sel0</span><span class="p">),]</span>

        <span class="k">return</span> <span class="n">df_sel</span>

    <span class="k">def</span> <span class="nf">plot_neg_pos_compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        输出正负值的数量和金额比</span>
<span class="sd">        输入为三年，年，标签，数据</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">c_win</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">&gt;</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">])[[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">c_loss</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">&lt;</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">])[[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">c_win</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;赢利&#39;</span>
        <span class="n">c_loss</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;亏损&#39;</span>
        <span class="n">cdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">c_win</span><span class="p">,</span> <span class="n">c_loss</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">cdf</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;cat&#39;</span><span class="p">]</span>
        <span class="n">cdf</span><span class="p">[</span><span class="s1">&#39;typ&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;数量比&#39;</span>

        <span class="n">s_win</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">&gt;</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">])[[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">s_loss</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">&lt;</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">])[[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">s_win</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;赢利&#39;</span>
        <span class="n">s_loss</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;亏损&#39;</span>
        <span class="n">sdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">s_win</span><span class="p">,</span> <span class="n">s_loss</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">sdf</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;cat&#39;</span><span class="p">]</span>
        <span class="n">sdf</span><span class="p">[</span><span class="s1">&#39;typ&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;金额比&#39;</span>

        <span class="n">plot_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">cdf</span><span class="p">,</span> <span class="n">sdf</span><span class="p">])</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">plot_df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="s1">&#39;normalize&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;百分比&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;typ:O&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;正负值数量和金额对比&#39;</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>  <span class="c1"># width = container seems not work in any h or v stack</span>
            <span class="c1"># height = len(cdf),</span>

        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

<span class="n">profit</span> <span class="o">=</span> <span class="n">Anaindex</span><span class="p">(</span><span class="s1">&#39;profit&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">526</span>
<span class="g g-Whitespace">    </span><span class="mi">513</span>         <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">plot_df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">514</span>             <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="s1">&#39;normalize&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;百分比&#39;</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">515</span>             <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;typ:O&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">522</span> 
<span class="g g-Whitespace">    </span><span class="mi">523</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">524</span>         <span class="k">return</span> <span class="n">fig</span>
<span class="ne">--&gt; </span><span class="mi">526</span> <span class="n">profit</span> <span class="o">=</span> <span class="n">Anaindex</span><span class="p">(</span><span class="s1">&#39;profit&#39;</span><span class="p">)</span>

<span class="nn">Cell In[2], line 10,</span> in <span class="ni">Anaindex.__init__</span><span class="nt">(self, idx)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="n">idx_s</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;../../mydata/yjbg_y2022_</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s1">.pkl.gz&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="n">code_s</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;../../mydata//ashare_basic.pkl.gz&#39;</span>
<span class="ne">---&gt; </span><span class="mi">10</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="n">idx_s</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="n">code_s</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="nn">File ~/jb_reports/.venv/lib/python3.12/site-packages/pandas/io/pickle.py:185,</span> in <span class="ni">read_pickle</span><span class="nt">(filepath_or_buffer, compression, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">123</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">124</span><span class="sd"> Load pickled pandas object (or any object) from file.</span>
<span class="g g-Whitespace">    </span><span class="mi">125</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">    </span><span class="mi">182</span><span class="sd"> 4    4    9</span>
<span class="g g-Whitespace">    </span><span class="mi">183</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">184</span> <span class="n">excs_to_catch</span> <span class="o">=</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">185</span> <span class="k">with</span> <span class="n">get_handle</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">186</span>     <span class="n">filepath_or_buffer</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">187</span>     <span class="s2">&quot;rb&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">188</span>     <span class="n">compression</span><span class="o">=</span><span class="n">compression</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">189</span>     <span class="n">is_text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">190</span>     <span class="n">storage_options</span><span class="o">=</span><span class="n">storage_options</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">191</span> <span class="p">)</span> <span class="k">as</span> <span class="n">handles</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">192</span>     <span class="c1"># 1) try standard library Pickle</span>
<span class="g g-Whitespace">    </span><span class="mi">193</span>     <span class="c1"># 2) try pickle_compat (older pandas version) to handle subclass changes</span>
<span class="g g-Whitespace">    </span><span class="mi">194</span>     <span class="c1"># 3) try pickle_compat with latin-1 encoding upon a UnicodeDecodeError</span>
<span class="g g-Whitespace">    </span><span class="mi">196</span>     <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">197</span>         <span class="c1"># TypeError for Cython complaints about object.__new__ vs Tick.__new__</span>
<span class="g g-Whitespace">    </span><span class="mi">198</span>         <span class="k">try</span><span class="p">:</span>

<span class="nn">File ~/jb_reports/.venv/lib/python3.12/site-packages/pandas/io/common.py:765,</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">761</span> <span class="k">if</span> <span class="n">compression</span> <span class="o">==</span> <span class="s2">&quot;gzip&quot;</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">762</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">763</span>         <span class="c1"># error: Incompatible types in assignment (expression has type</span>
<span class="g g-Whitespace">    </span><span class="mi">764</span>         <span class="c1"># &quot;GzipFile&quot;, variable has type &quot;Union[str, BaseBuffer]&quot;)</span>
<span class="ne">--&gt; </span><span class="mi">765</span>         <span class="n">handle</span> <span class="o">=</span> <span class="n">gzip</span><span class="o">.</span><span class="n">GzipFile</span><span class="p">(</span>  <span class="c1"># type: ignore[assignment]</span>
<span class="g g-Whitespace">    </span><span class="mi">766</span>             <span class="n">filename</span><span class="o">=</span><span class="n">handle</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">767</span>             <span class="n">mode</span><span class="o">=</span><span class="n">ioargs</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">768</span>             <span class="o">**</span><span class="n">compression_args</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">769</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">770</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">771</span>         <span class="n">handle</span> <span class="o">=</span> <span class="n">gzip</span><span class="o">.</span><span class="n">GzipFile</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">772</span>             <span class="c1"># No overload variant of &quot;GzipFile&quot; matches argument types</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span>             <span class="c1"># &quot;Union[str, BaseBuffer]&quot;, &quot;str&quot;, &quot;Dict[str, Any]&quot;</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>             <span class="o">**</span><span class="n">compression_args</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">777</span>         <span class="p">)</span>

<span class="nn">File /usr/lib/python3.12/gzip.py:192,</span> in <span class="ni">GzipFile.__init__</span><span class="nt">(self, filename, mode, compresslevel, fileobj, mtime)</span>
<span class="g g-Whitespace">    </span><span class="mi">190</span>     <span class="n">mode</span> <span class="o">+=</span> <span class="s1">&#39;b&#39;</span>
<span class="g g-Whitespace">    </span><span class="mi">191</span> <span class="k">if</span> <span class="n">fileobj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">192</span>     <span class="n">fileobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myfileobj</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span> <span class="ow">or</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">193</span> <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">194</span>     <span class="n">filename</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">fileobj</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;../../mydata/yjbg_y2022_profit.pkl.gz&#39;
</pre></div>
</div>
</div>
</div>
<section id="id1">
<h1>总体情况<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>总利润和总的利润增长（几何平均）</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">data_overall</span><span class="p">()[</span><span class="s1">&#39;stat&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><!DOCTYPE >
<html>
  <head>
    <meta charset="utf-8" />
    <title>MaterialDesignCard</title>
    <style>
      .card_group {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;

        text-align: center;
      }

      .card {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #fff;
        border-radius: 10px;
        display: inline-block;
        height: 240px;
        margin: 1rem;
        width: 240px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12), 0 3px 6px rgba(0, 0, 0, 0.24);
      }

      .card_title {
        border-bottom: 5px;
        border-bottom-style: dotted;
        border-bottom-color: grey;
        margin: 5px;
        padding: 5px;
        font-size: 2em;
      }
      .card_content {
        font-size: 4em;
        margin: 5px;
        align-self: center;
        height: 200px;

        display: flex;
        align-items: center;
        justify-content: center;
        justify-items: center;
      }
    </style>
  </head>
  <body>
    <div class="card_group">
      
      <div class="card">
        <div class="card_title">sum</div>
        <div class="card_content">
          <span>4.4e+13</span>
        </div>
      </div>
      
      <div class="card">
        <div class="card_title">inc</div>
        <div class="card_content">
          <span> 8.99%</span>
        </div>
      </div>
      
    </div>
  </body>
</html></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">data_overall</span><span class="p">()[</span><span class="s1">&#39;quant_byear&#39;</span><span class="p">][</span><span class="s1">&#39;sum&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-41ea6589f04d495298f9cfb4d70d3590.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-41ea6589f04d495298f9cfb4d70d3590.vega-embed details,
  #altair-viz-41ea6589f04d495298f9cfb4d70d3590.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-41ea6589f04d495298f9cfb4d70d3590"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-41ea6589f04d495298f9cfb4d70d3590") {
      outputDiv = document.getElementById("altair-viz-41ea6589f04d495298f9cfb4d70d3590");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-24ee53255d519658668341a6c4e41b9c"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "sum", "type": "quantitative"}], "x": {"axis": {"format": ".2s"}, "field": "sum", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 314, "title": "sum of profit", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-24ee53255d519658668341a6c4e41b9c": [{"year": "2010", "sum": 1845427989404.7}, {"year": "2011", "sum": 2253045804231.393}, {"year": "2012", "sum": 2170686123561.4}, {"year": "2013", "sum": 2508562027999.03}, {"year": "2014", "sum": 2759373482565.75}, {"year": "2015", "sum": 2884374399278.57}, {"year": "2016", "sum": 3074586003415.21}, {"year": "2017", "sum": 3710739481196.84}, {"year": "2018", "sum": 3937215260934.35}, {"year": "2019", "sum": 4230200812142.19}, {"year": "2020", "sum": 4317787470704.66}, {"year": "2021", "sum": 5141388454933.62}, {"year": "2022", "sum": 5186771166747.7}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>上市公司总体利润保持增长,特别是疫情爆发后第2年,即2021年,出现了爆涨.</p></li>
<li><p>利润增长是公司利润增长和新增上市公司共同作用的结果。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">inc_byear</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">indudf</span><span class="p">)[</span><span class="s1">&#39;byear&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-5c72032baacd4c378da883a0e3cd883a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5c72032baacd4c378da883a0e3cd883a.vega-embed details,
  #altair-viz-5c72032baacd4c378da883a0e3cd883a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5c72032baacd4c378da883a0e3cd883a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5c72032baacd4c378da883a0e3cd883a") {
      outputDiv = document.getElementById("altair-viz-5c72032baacd4c378da883a0e3cd883a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-2bbc9ca233878775af2e1db0b3ba6399"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "profit", "type": "quantitative"}], "x": {"axis": {"format": ".0%"}, "field": "profit", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 314, "title": "\u5386\u5e74profit\u589e\u957f", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-2bbc9ca233878775af2e1db0b3ba6399": [{"year": "2010", "profit": null}, {"year": "2011", "profit": 0.22087982688405128}, {"year": "2012", "profit": -0.036554818599477845}, {"year": "2013", "profit": 0.15565396616774962}, {"year": "2014", "profit": 0.09998216179919672}, {"year": "2015", "profit": 0.04530047037945373}, {"year": "2016", "profit": 0.06594553196152875}, {"year": "2017", "profit": 0.2069070362887877}, {"year": "2018", "profit": 0.061032519497829174}, {"year": "2019", "profit": 0.07441441013268624}, {"year": "2020", "profit": 0.020705082914991957}, {"year": "2021", "profit": 0.19074606840121966}, {"year": "2022", "profit": 0.008826936966906507}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>最近一年是利润增长最少的一年。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">data_overall</span><span class="p">()[</span><span class="s1">&#39;quant_byear&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-291abc2762f6480fa0b98bf0de617037.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-291abc2762f6480fa0b98bf0de617037.vega-embed details,
  #altair-viz-291abc2762f6480fa0b98bf0de617037.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-291abc2762f6480fa0b98bf0de617037"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-291abc2762f6480fa0b98bf0de617037") {
      outputDiv = document.getElementById("altair-viz-291abc2762f6480fa0b98bf0de617037");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-426118e41c6e67ceb65f0774f6a7f8b4"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "mean", "type": "quantitative"}], "x": {"axis": {"format": ".2s"}, "field": "mean", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 314, "title": "mean of profit", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-426118e41c6e67ceb65f0774f6a7f8b4": [{"year": "2010", "mean": 703556229.2812428}, {"year": "2011", "mean": 711413263.0980085}, {"year": "2012", "mean": 616147068.850809}, {"year": "2013", "mean": 632676425.7248499}, {"year": "2014", "mean": 657463302.9701573}, {"year": "2015", "mean": 675814057.9378092}, {"year": "2016", "mean": 676774378.9159608}, {"year": "2017", "mean": 761646034.7284154}, {"year": "2018", "mean": 778567384.0091655}, {"year": "2019", "mean": 836008065.640749}, {"year": "2020", "mean": 853317681.9574428}, {"year": "2021", "mean": 1016084674.8880672}, {"year": "2022", "mean": 1026270511.8218639}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>上市公司的平均利润总体有增长，大约为10亿左右。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">data_overall</span><span class="p">()[</span><span class="s1">&#39;quant_byear&#39;</span><span class="p">][</span><span class="s1">&#39;median&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-51fb4c9739064b2e89e2555d9465e0d5.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-51fb4c9739064b2e89e2555d9465e0d5.vega-embed details,
  #altair-viz-51fb4c9739064b2e89e2555d9465e0d5.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-51fb4c9739064b2e89e2555d9465e0d5"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-51fb4c9739064b2e89e2555d9465e0d5") {
      outputDiv = document.getElementById("altair-viz-51fb4c9739064b2e89e2555d9465e0d5");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-73c49a12935784fd88359771065e45f5"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "median", "type": "quantitative"}], "x": {"axis": {"format": ".2s"}, "field": "median", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 314, "title": "median of profit", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-73c49a12935784fd88359771065e45f5": [{"year": "2010", "median": 83080980.65}, {"year": "2011", "median": 76689666.32}, {"year": "2012", "median": 65375902.9}, {"year": "2013", "median": 60660291.84}, {"year": "2014", "median": 62675976.22}, {"year": "2015", "median": 67174988.675}, {"year": "2016", "median": 84090715.43}, {"year": "2017", "median": 91910551.07}, {"year": "2018", "median": 91811779.99}, {"year": "2019", "median": 99882269.495}, {"year": "2020", "median": 111236988.13499999}, {"year": "2021", "median": 121975567.66499999}, {"year": "2022", "median": 106183271.13499999}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>上市公司利润中位数在2022年急剧下降，略高于1亿。</p></li>
<li><p>平均值和中位数差一个数量级，说明上市公司利润的分布是左偏的。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">data_overall</span><span class="p">()[</span><span class="s1">&#39;market_ex&#39;</span><span class="p">][</span><span class="s1">&#39;market&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-2ae29acee8f54c5c815f8446448fc7c1.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-2ae29acee8f54c5c815f8446448fc7c1.vega-embed details,
  #altair-viz-2ae29acee8f54c5c815f8446448fc7c1.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-2ae29acee8f54c5c815f8446448fc7c1"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2ae29acee8f54c5c815f8446448fc7c1") {
      outputDiv = document.getElementById("altair-viz-2ae29acee8f54c5c815f8446448fc7c1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-c606e8927800cd82c55ec521171a9934"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "market", "type": "nominal"}, "x": {"aggregate": "sum", "field": "profit", "stack": "normalize", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 411, "title": "percent by market", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-c606e8927800cd82c55ec521171a9934": [{"year": "2010", "market": "\u4e3b\u677fA\u80a1", "profit": 1816957799178.06}, {"year": "2010", "market": "\u521b\u4e1a\u677f", "profit": 25983898534.3}, {"year": "2010", "market": "\u79d1\u521b\u677f", "profit": 2486291692.34}, {"year": "2011", "market": "\u4e3b\u677fA\u80a1", "profit": 2208217581056.953}, {"year": "2011", "market": "\u521b\u4e1a\u677f", "profit": 42108721816.23}, {"year": "2011", "market": "\u79d1\u521b\u677f", "profit": 2719501358.21}, {"year": "2012", "market": "\u4e3b\u677fA\u80a1", "profit": 2124444273270.18}, {"year": "2012", "market": "\u521b\u4e1a\u677f", "profit": 44680913768.35}, {"year": "2012", "market": "\u79d1\u521b\u677f", "profit": 1560936522.8700001}, {"year": "2013", "market": "\u4e3b\u677fA\u80a1", "profit": 2453457342167.22}, {"year": "2013", "market": "\u521b\u4e1a\u677f", "profit": 52000215478.25}, {"year": "2013", "market": "\u79d1\u521b\u677f", "profit": 3104470353.56}, {"year": "2014", "market": "\u4e3b\u677fA\u80a1", "profit": 2685849322677.75}, {"year": "2014", "market": "\u521b\u4e1a\u677f", "profit": 67224472930.96}, {"year": "2014", "market": "\u79d1\u521b\u677f", "profit": 6299686957.04}, {"year": "2015", "market": "\u4e3b\u677fA\u80a1", "profit": 2792075436996.94}, {"year": "2015", "market": "\u521b\u4e1a\u677f", "profit": 84422863061.32}, {"year": "2015", "market": "\u79d1\u521b\u677f", "profit": 7876099220.309999}, {"year": "2016", "market": "\u4e3b\u677fA\u80a1", "profit": 2939245059014.6}, {"year": "2016", "market": "\u521b\u4e1a\u677f", "profit": 121544192879.79}, {"year": "2016", "market": "\u79d1\u521b\u677f", "profit": 13796751520.82}, {"year": "2017", "market": "\u4e3b\u677fA\u80a1", "profit": 3542630797925.64}, {"year": "2017", "market": "\u521b\u4e1a\u677f", "profit": 145570832788.86}, {"year": "2017", "market": "\u79d1\u521b\u677f", "profit": 22537850482.34}, {"year": "2018", "market": "\u4e3b\u677fA\u80a1", "profit": 3819738304186.01}, {"year": "2018", "market": "\u521b\u4e1a\u677f", "profit": 93251574686.43}, {"year": "2018", "market": "\u79d1\u521b\u677f", "profit": 24225382061.91}, {"year": "2019", "market": "\u4e3b\u677fA\u80a1", "profit": 4072814709384.3}, {"year": "2019", "market": "\u521b\u4e1a\u677f", "profit": 127252951641.99}, {"year": "2019", "market": "\u79d1\u521b\u677f", "profit": 30133151115.9}, {"year": "2020", "market": "\u4e3b\u677fA\u80a1", "profit": 4085411027863.2}, {"year": "2020", "market": "\u521b\u4e1a\u677f", "profit": 175136704370.99}, {"year": "2020", "market": "\u79d1\u521b\u677f", "profit": 57239738470.47}, {"year": "2021", "market": "\u4e3b\u677fA\u80a1", "profit": 4823105473421.91}, {"year": "2021", "market": "\u521b\u4e1a\u677f", "profit": 211990582788.92}, {"year": "2021", "market": "\u79d1\u521b\u677f", "profit": 106292398722.79}, {"year": "2022", "market": "\u4e3b\u677fA\u80a1", "profit": 4841190997473.3}, {"year": "2022", "market": "\u521b\u4e1a\u677f", "profit": 232895624606.91}, {"year": "2022", "market": "\u79d1\u521b\u677f", "profit": 112684544667.49}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">data_overall</span><span class="p">()[</span><span class="s1">&#39;market_ex&#39;</span><span class="p">][</span><span class="s1">&#39;ex&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-6e64103c0b6c442289b3eb8a209c122f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-6e64103c0b6c442289b3eb8a209c122f.vega-embed details,
  #altair-viz-6e64103c0b6c442289b3eb8a209c122f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-6e64103c0b6c442289b3eb8a209c122f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6e64103c0b6c442289b3eb8a209c122f") {
      outputDiv = document.getElementById("altair-viz-6e64103c0b6c442289b3eb8a209c122f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-a39dfdd9ff846e3b4547b879c911a11a"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "ex", "type": "nominal"}, "x": {"aggregate": "sum", "field": "profit", "stack": "normalize", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 411, "title": "percent by ex", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-a39dfdd9ff846e3b4547b879c911a11a": [{"year": "2010", "ex": "\u4e0a\u4ea4\u6240", "profit": 1554054694239.49}, {"year": "2010", "ex": "\u5317\u4ea4\u6240", "profit": 296112799.86}, {"year": "2010", "ex": "\u6df1\u4ea4\u6240", "profit": 291077182365.35}, {"year": "2011", "ex": "\u4e0a\u4ea4\u6240", "profit": 1914797660088.8032}, {"year": "2011", "ex": "\u5317\u4ea4\u6240", "profit": 229138630.01}, {"year": "2011", "ex": "\u6df1\u4ea4\u6240", "profit": 338019005512.58}, {"year": "2012", "ex": "\u4e0a\u4ea4\u6240", "profit": 1854380058291.6}, {"year": "2012", "ex": "\u5317\u4ea4\u6240", "profit": 569151771.25}, {"year": "2012", "ex": "\u6df1\u4ea4\u6240", "profit": 315736913498.55}, {"year": "2013", "ex": "\u4e0a\u4ea4\u6240", "profit": 2127967200944.25}, {"year": "2013", "ex": "\u5317\u4ea4\u6240", "profit": 1358856499.61}, {"year": "2013", "ex": "\u6df1\u4ea4\u6240", "profit": 379235970555.17}, {"year": "2014", "ex": "\u4e0a\u4ea4\u6240", "profit": 2309711619501.0}, {"year": "2014", "ex": "\u5317\u4ea4\u6240", "profit": 1611845714.33}, {"year": "2014", "ex": "\u6df1\u4ea4\u6240", "profit": 448050017350.42}, {"year": "2015", "ex": "\u4e0a\u4ea4\u6240", "profit": 2371277206737.42}, {"year": "2015", "ex": "\u5317\u4ea4\u6240", "profit": 2393544503.22}, {"year": "2015", "ex": "\u6df1\u4ea4\u6240", "profit": 510703648037.93}, {"year": "2016", "ex": "\u4e0a\u4ea4\u6240", "profit": 2424707802584.96}, {"year": "2016", "ex": "\u5317\u4ea4\u6240", "profit": 3364041975.62}, {"year": "2016", "ex": "\u6df1\u4ea4\u6240", "profit": 646514158854.63}, {"year": "2017", "ex": "\u4e0a\u4ea4\u6240", "profit": 2869985492442.65}, {"year": "2017", "ex": "\u5317\u4ea4\u6240", "profit": 4636771223.25}, {"year": "2017", "ex": "\u6df1\u4ea4\u6240", "profit": 836117217530.94}, {"year": "2018", "ex": "\u4e0a\u4ea4\u6240", "profit": 3217827870219.1}, {"year": "2018", "ex": "\u5317\u4ea4\u6240", "profit": 5537579405.87}, {"year": "2018", "ex": "\u6df1\u4ea4\u6240", "profit": 713849811309.38}, {"year": "2019", "ex": "\u4e0a\u4ea4\u6240", "profit": 3513579634565.85}, {"year": "2019", "ex": "\u5317\u4ea4\u6240", "profit": 6698541857.01}, {"year": "2019", "ex": "\u6df1\u4ea4\u6240", "profit": 709922635719.3301}, {"year": "2020", "ex": "\u4e0a\u4ea4\u6240", "profit": 3348325241150.41}, {"year": "2020", "ex": "\u5317\u4ea4\u6240", "profit": 8179020772.09}, {"year": "2020", "ex": "\u6df1\u4ea4\u6240", "profit": 961283208782.16}, {"year": "2021", "ex": "\u4e0a\u4ea4\u6240", "profit": 4166087233258.56}, {"year": "2021", "ex": "\u5317\u4ea4\u6240", "profit": 10922971573.68}, {"year": "2021", "ex": "\u6df1\u4ea4\u6240", "profit": 964378250101.38}, {"year": "2022", "ex": "\u4e0a\u4ea4\u6240", "profit": 4255346860074.5}, {"year": "2022", "ex": "\u5317\u4ea4\u6240", "profit": 11626378234.14}, {"year": "2022", "ex": "\u6df1\u4ea4\u6240", "profit": 919797928439.06}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>2020年对上交所打击比较大。</p></li>
<li><p>但第二年2021年，上交所又迎来狂欢。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">plot_neg_pos_compare</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">namedf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-7cf2868f56064209bfecca0a9a9eb2a1.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7cf2868f56064209bfecca0a9a9eb2a1.vega-embed details,
  #altair-viz-7cf2868f56064209bfecca0a9a9eb2a1.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7cf2868f56064209bfecca0a9a9eb2a1"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7cf2868f56064209bfecca0a9a9eb2a1") {
      outputDiv = document.getElementById("altair-viz-7cf2868f56064209bfecca0a9a9eb2a1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-f6ee22ef3692a50e272bcab820d9a6aa"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "cat", "type": "nominal"}, "row": {"field": "year", "type": "nominal"}, "x": {"axis": {"title": "\u767e\u5206\u6bd4"}, "field": "profit", "stack": "normalize", "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "typ", "type": "ordinal"}}, "title": "\u6b63\u8d1f\u503c\u6570\u91cf\u548c\u91d1\u989d\u5bf9\u6bd4", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-f6ee22ef3692a50e272bcab820d9a6aa": [{"year": "2010", "profit": 2519.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2011", "profit": 3020.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2012", "profit": 3309.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2013", "profit": 3721.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2014", "profit": 3931.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2015", "profit": 3924.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2016", "profit": 4301.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2017", "profit": 4596.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2018", "profit": 4569.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2019", "profit": 4577.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2020", "profit": 4465.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2021", "profit": 4343.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2022", "profit": 4012.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2010", "profit": 104.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2011", "profit": 147.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2012", "profit": 214.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2013", "profit": 244.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2014", "profit": 266.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2015", "profit": 344.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2016", "profit": 242.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2017", "profit": 276.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2018", "profit": 488.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2019", "profit": 483.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2020", "profit": 595.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2021", "profit": 717.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2022", "profit": 1042.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2010", "profit": 1862193441051.97, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2011", "profit": 2294703216407.6733, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2012", "profit": 2271243715899.64, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2013", "profit": 2580047994057.36, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2014", "profit": 2846472179309.43, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2015", "profit": 3043695659350.79, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2016", "profit": 3203489565486.61, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2017", "profit": 3802470317393.67, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2018", "profit": 4257819956948.88, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2019", "profit": 4640778685201.56, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2020", "profit": 4829629584318.56, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2021", "profit": 5746864462771.1, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2022", "profit": 5941333031597.24, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2010", "profit": 16765451647.27, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2011", "profit": 41657412176.28, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2012", "profit": 100557592338.24, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2013", "profit": 71485966058.33, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2014", "profit": 87098696743.68, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2015", "profit": 159321260072.22, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2016", "profit": 128903562071.4, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2017", "profit": 91730836196.83, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2018", "profit": 320604696014.53, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2019", "profit": 410577873059.37, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2020", "profit": 511842113613.9, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2021", "profit": 605476007837.48, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2022", "profit": 754561864849.54, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>录得亏损的上市公司无论是数量还是金额都在持续增加。</p></li>
<li><p>相比之下，数量的增长更加明显。</p></li>
<li><p>2022年有超过20%的公司出现亏损。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">plot_min</span><span class="p">(</span><span class="s1">&#39;历年亏损王&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>上市公司亏损王呈现出不断创新高的情况。</p></li>
<li><p>谁又能想到中海远控，曾经勇巨亏王呢？</p></li>
<li><p>疫情来临之际，中海远控大翻身，而同为交通行业的大航空，却整整苦了三年。</p></li>
<li><p>看到其中的一个亏损王，感觉自己也算是亲历一段历史。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">plot_max</span><span class="p">(</span><span class="s1">&#39;历年赢利王&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>赢利王没什么惊喜，宇宙第一行，永远行，疫情完全没受到影响。可怕。</p></li>
</ul>
</section>
<section id="id2">
<h1>利润构成-分行业看<a class="headerlink" href="#id2" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>一般人可能不知道，中国上市银行有多挣钱，不然无法解释为什么银行股在大部分时候都被嫌弃。</p></li>
<li><p>先看一下所有利润加在一起按行业分的情况。</p></li>
</ul>
<section id="id3">
<h2>分行业利润绝对值<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">mostn</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">indudf</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">plot_neg_pos_compare</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">indudf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-5290b8a171a5463c8fd33af96946d6da.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5290b8a171a5463c8fd33af96946d6da.vega-embed details,
  #altair-viz-5290b8a171a5463c8fd33af96946d6da.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5290b8a171a5463c8fd33af96946d6da"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5290b8a171a5463c8fd33af96946d6da") {
      outputDiv = document.getElementById("altair-viz-5290b8a171a5463c8fd33af96946d6da");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-5f7ebeb055325a02cb3eac64d19bdd61"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "cat", "type": "nominal"}, "row": {"field": "year", "type": "nominal"}, "x": {"axis": {"title": "\u767e\u5206\u6bd4"}, "field": "profit", "stack": "normalize", "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "typ", "type": "ordinal"}}, "title": "\u6b63\u8d1f\u503c\u6570\u91cf\u548c\u91d1\u989d\u5bf9\u6bd4", "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-5f7ebeb055325a02cb3eac64d19bdd61": [{"year": "2010", "profit": 86.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2011", "profit": 86.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2012", "profit": 83.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2013", "profit": 85.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2014", "profit": 84.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2015", "profit": 81.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2016", "profit": 82.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2017", "profit": 84.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2018", "profit": 81.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2019", "profit": 82.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2020", "profit": 83.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2021", "profit": 78.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2022", "profit": 76.0, "cat": "\u8d62\u5229", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2012", "profit": 3.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2013", "profit": 1.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2014", "profit": 2.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2015", "profit": 5.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2016", "profit": 4.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2017", "profit": 2.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2018", "profit": 5.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2019", "profit": 4.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2020", "profit": 3.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2021", "profit": 8.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2022", "profit": 10.0, "cat": "\u4e8f\u635f", "typ": "\u6570\u91cf\u6bd4"}, {"year": "2010", "profit": 1845427989404.7, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2011", "profit": 2253045804231.393, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2012", "profit": 2180648779060.21, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2013", "profit": 2511250135959.06, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2014", "profit": 2767420021542.8203, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2015", "profit": 2945399338758.4697, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2016", "profit": 3102406121742.08, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2017", "profit": 3719428817522.01, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2018", "profit": 3945890624866.34, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2019", "profit": 4280881661575.52, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2020", "profit": 4433767941346.6, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2021", "profit": 5288680344318.851, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2022", "profit": 5432442775706.9795, "cat": "\u8d62\u5229", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2012", "profit": 9962655498.810001, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2013", "profit": 2688107960.03, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2014", "profit": 8046538977.070001, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2015", "profit": 61024939479.9, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2016", "profit": 27820118326.87, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2017", "profit": 8689336325.17, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2018", "profit": 8675363931.99, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2019", "profit": 50680849433.329994, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2020", "profit": 115980470641.94, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2021", "profit": 147291889385.23, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}, {"year": "2022", "profit": 245671608959.28003, "cat": "\u4e8f\u635f", "typ": "\u91d1\u989d\u6bd4"}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profit</span><span class="o">.</span><span class="n">plot_den</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">indudf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;indu&#39;</span><span class="p">)[</span><span class="s1">&#39;profit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-7d97ad8673f74f309604ade40c7b5187.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7d97ad8673f74f309604ade40c7b5187.vega-embed details,
  #altair-viz-7d97ad8673f74f309604ade40c7b5187.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7d97ad8673f74f309604ade40c7b5187"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7d97ad8673f74f309604ade40c7b5187") {
      outputDiv = document.getElementById("altair-viz-7d97ad8673f74f309604ade40c7b5187");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-d317f6daaecc0c5efdec238ef5b1524e"}, "mark": {"type": "line"}, "encoding": {"x": {"field": "num_pct", "type": "quantitative"}, "y": {"field": "cum_pct", "type": "quantitative"}}, "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-d317f6daaecc0c5efdec238ef5b1524e": [{"cum_pct": 42.319177304022865, "num_pct": 1.1627906976744187}, {"cum_pct": 47.364270436084624, "num_pct": 2.3255813953488373}, {"cum_pct": 51.476481795210724, "num_pct": 3.488372093023256}, {"cum_pct": 54.83846873588514, "num_pct": 4.651162790697675}, {"cum_pct": 57.93721318030338, "num_pct": 5.813953488372093}, {"cum_pct": 61.000815244544754, "num_pct": 6.976744186046512}, {"cum_pct": 63.66967392118027, "num_pct": 8.13953488372093}, {"cum_pct": 66.04604023403171, "num_pct": 9.30232558139535}, {"cum_pct": 68.32440412861855, "num_pct": 10.465116279069768}, {"cum_pct": 70.17419389283069, "num_pct": 11.627906976744185}, {"cum_pct": 71.81872429283725, "num_pct": 12.790697674418604}, {"cum_pct": 73.21532895885697, "num_pct": 13.953488372093023}, {"cum_pct": 74.45145261122542, "num_pct": 15.116279069767442}, {"cum_pct": 75.60183022504265, "num_pct": 16.27906976744186}, {"cum_pct": 76.57388221405498, "num_pct": 17.441860465116278}, {"cum_pct": 77.53023088385304, "num_pct": 18.6046511627907}, {"cum_pct": 78.46648369641717, "num_pct": 19.767441860465116}, {"cum_pct": 79.39094036522982, "num_pct": 20.930232558139537}, {"cum_pct": 80.24831000219811, "num_pct": 22.093023255813954}, {"cum_pct": 81.08435183177652, "num_pct": 23.25581395348837}, {"cum_pct": 81.85680700749212, "num_pct": 24.41860465116279}, {"cum_pct": 82.55844318867838, "num_pct": 25.58139534883721}, {"cum_pct": 83.25844691163284, "num_pct": 26.74418604651163}, {"cum_pct": 83.87718524628222, "num_pct": 27.906976744186046}, {"cum_pct": 84.47162704894679, "num_pct": 29.069767441860463}, {"cum_pct": 85.05893830123703, "num_pct": 30.232558139534884}, {"cum_pct": 85.63388621683657, "num_pct": 31.3953488372093}, {"cum_pct": 86.20265625198002, "num_pct": 32.55813953488372}, {"cum_pct": 86.71610062276848, "num_pct": 33.72093023255814}, {"cum_pct": 87.22292663694267, "num_pct": 34.883720930232556}, {"cum_pct": 87.72351209223937, "num_pct": 36.04651162790697}, {"cum_pct": 88.20973270546138, "num_pct": 37.2093023255814}, {"cum_pct": 88.69426659360954, "num_pct": 38.372093023255815}, {"cum_pct": 89.163999785437, "num_pct": 39.53488372093023}, {"cum_pct": 89.62733319687968, "num_pct": 40.69767441860465}, {"cum_pct": 90.05768719605747, "num_pct": 41.86046511627907}, {"cum_pct": 90.47824074590437, "num_pct": 43.02325581395349}, {"cum_pct": 90.89566616365633, "num_pct": 44.18604651162791}, {"cum_pct": 91.30699235629866, "num_pct": 45.348837209302324}, {"cum_pct": 91.71111855250255, "num_pct": 46.51162790697674}, {"cum_pct": 92.09501006760856, "num_pct": 47.674418604651166}, {"cum_pct": 92.46460268363334, "num_pct": 48.83720930232558}, {"cum_pct": 92.83007868294953, "num_pct": 50.0}, {"cum_pct": 93.18689691065877, "num_pct": 51.16279069767442}, {"cum_pct": 93.54178592948122, "num_pct": 52.325581395348834}, {"cum_pct": 93.89585434189888, "num_pct": 53.48837209302326}, {"cum_pct": 94.24138873153117, "num_pct": 54.651162790697676}, {"cum_pct": 94.5786572631478, "num_pct": 55.81395348837209}, {"cum_pct": 94.91544956979651, "num_pct": 56.97674418604651}, {"cum_pct": 95.19681722683707, "num_pct": 58.13953488372093}, {"cum_pct": 95.47523976580523, "num_pct": 59.30232558139535}, {"cum_pct": 95.75231422960094, "num_pct": 60.46511627906977}, {"cum_pct": 96.02084857973249, "num_pct": 61.627906976744185}, {"cum_pct": 96.26160458395984, "num_pct": 62.7906976744186}, {"cum_pct": 96.48881183382572, "num_pct": 63.95348837209303}, {"cum_pct": 96.71077953884259, "num_pct": 65.11627906976744}, {"cum_pct": 96.919567246501, "num_pct": 66.27906976744185}, {"cum_pct": 97.11951059645091, "num_pct": 67.44186046511628}, {"cum_pct": 97.30725046061292, "num_pct": 68.6046511627907}, {"cum_pct": 97.49071049435824, "num_pct": 69.76744186046511}, {"cum_pct": 97.66575922787598, "num_pct": 70.93023255813954}, {"cum_pct": 97.83157791040621, "num_pct": 72.09302325581395}, {"cum_pct": 97.9888703111387, "num_pct": 73.25581395348837}, {"cum_pct": 98.14552168075241, "num_pct": 74.4186046511628}, {"cum_pct": 98.29312863436847, "num_pct": 75.5813953488372}, {"cum_pct": 98.43948227579503, "num_pct": 76.74418604651163}, {"cum_pct": 98.58317201323412, "num_pct": 77.90697674418605}, {"cum_pct": 98.7174276917291, "num_pct": 79.06976744186046}, {"cum_pct": 98.83900147573418, "num_pct": 80.23255813953489}, {"cum_pct": 98.95264653867021, "num_pct": 81.3953488372093}, {"cum_pct": 99.06251314489248, "num_pct": 82.55813953488372}, {"cum_pct": 99.1718267528121, "num_pct": 83.72093023255815}, {"cum_pct": 99.28022620936667, "num_pct": 84.88372093023256}, {"cum_pct": 99.38856987669887, "num_pct": 86.04651162790698}, {"cum_pct": 99.49682764486121, "num_pct": 87.20930232558139}, {"cum_pct": 99.5972956939271, "num_pct": 88.37209302325581}, {"cum_pct": 99.67656207104616, "num_pct": 89.53488372093024}, {"cum_pct": 99.7545142012007, "num_pct": 90.69767441860465}, {"cum_pct": 99.83161301173003, "num_pct": 91.86046511627907}, {"cum_pct": 99.9031075046479, "num_pct": 93.02325581395348}, {"cum_pct": 99.971994284829, "num_pct": 94.18604651162791}, {"cum_pct": 100.03693064343197, "num_pct": 95.34883720930233}, {"cum_pct": 100.08713232768223, "num_pct": 96.51162790697674}, {"cum_pct": 100.13198987501953, "num_pct": 97.67441860465117}, {"cum_pct": 100.12512722361937, "num_pct": 98.83720930232558}, {"cum_pct": 100.0, "num_pct": 100.0}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>大约前20%的行业占了全部利润的80%</p></li>
<li><p>排名第一的行业占比超过了40%，很显然就是银行业。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;mostn_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-118fad6d736d4e4b90cc705b52865489.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-118fad6d736d4e4b90cc705b52865489.vega-embed details,
  #altair-viz-118fad6d736d4e4b90cc705b52865489.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-118fad6d736d4e4b90cc705b52865489"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-118fad6d736d4e4b90cc705b52865489") {
      outputDiv = document.getElementById("altair-viz-118fad6d736d4e4b90cc705b52865489");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-883bacdbccc10ae3b7e2948537de3272"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "profit", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "profit", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "indu\u603bprofit\u524d10", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-883bacdbccc10ae3b7e2948537de3272": [{"indu": "\u94f6\u884c", "profit": 18628968915442.324}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 2220857992051.65}, {"indu": "\u4fdd\u9669", "profit": 1810201957201.25}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 1479951979264.8}, {"indu": "\u8bc1\u5238", "profit": 1364072215233.72}, {"indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 1348602483787.23}, {"indu": "\u7164\u70ad\u884c\u4e1a", "profit": 1174835818985.2}, {"indu": "\u7535\u529b\u884c\u4e1a", "profit": 1046080216913.99}, {"indu": "\u901a\u4fe1\u670d\u52a1", "profit": 1002939397082.51}, {"indu": "\u917f\u9152\u884c\u4e1a", "profit": 814280385699.64}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>这个数据极度集中，银行占据了超过43%的总利润。</p></li>
<li><p>前三个行业占比超过了50%， 前20个行业取得了80%的利润。真八二定律。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;mostn_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-987754b6f20a4e5fa1ad58a7bed98a2f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-987754b6f20a4e5fa1ad58a7bed98a2f.vega-embed details,
  #altair-viz-987754b6f20a4e5fa1ad58a7bed98a2f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-987754b6f20a4e5fa1ad58a7bed98a2f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-987754b6f20a4e5fa1ad58a7bed98a2f") {
      outputDiv = document.getElementById("altair-viz-987754b6f20a4e5fa1ad58a7bed98a2f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-864559efa57c6837d1726505b1173a58"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "profit", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "profit", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "indu\u603bprofit\u540e\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-864559efa57c6837d1726505b1173a58": [{"indu": "\u822a\u7a7a\u673a\u573a", "profit": -55081202135.26001}, {"indu": "\u6559\u80b2", "profit": -3020950022.0799994}, {"indu": "\u7535\u673a", "profit": 19746363426.83}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 22098860965.14}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 28585087966.3}, {"indu": "\u8239\u8236\u5236\u9020", "profit": 30324069805.5}, {"indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 31471989084.86}, {"indu": "\u6c7d\u8f66\u670d\u52a1", "profit": 33939018578.980003}, {"indu": "\u88c5\u4fee\u88c5\u9970", "profit": 34314651230.32}, {"indu": "\u7efc\u5408\u884c\u4e1a", "profit": 34893184826.88}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>只有航空机场和教育行业是总体亏损了。</p></li>
<li><p>航空机场应该是受疫情影响。</p></li>
<li><p>教育行业算是团灭。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;mostn_count_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-e14bd31909d9497aada04cb5b33c21d2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e14bd31909d9497aada04cb5b33c21d2.vega-embed details,
  #altair-viz-e14bd31909d9497aada04cb5b33c21d2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e14bd31909d9497aada04cb5b33c21d2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e14bd31909d9497aada04cb5b33c21d2") {
      outputDiv = document.getElementById("altair-viz-e14bd31909d9497aada04cb5b33c21d2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-636e6b828064a6eec800f291c3c17054"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "count", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 332, "title": "indu\u524d10\u4e0a\u699c\u6b21\u6570\u7edf\u8ba1[14\u4e2a]", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-636e6b828064a6eec800f291c3c17054": [{"indu": "\u94f6\u884c", "count": 13}, {"indu": "\u4fdd\u9669", "count": 13}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "count": 13}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "count": 12}, {"indu": "\u8bc1\u5238", "count": 12}, {"indu": "\u7164\u70ad\u884c\u4e1a", "count": 11}, {"indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "count": 11}, {"indu": "\u7535\u529b\u884c\u4e1a", "count": 11}, {"indu": "\u917f\u9152\u884c\u4e1a", "count": 9}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "count": 7}, {"indu": "\u901a\u4fe1\u670d\u52a1", "count": 6}, {"indu": "\u5bb6\u7535\u884c\u4e1a", "count": 6}, {"indu": "\u94a2\u94c1\u884c\u4e1a", "count": 4}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "count": 2}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>行业利润榜是指每年平均利润进入前十的行业，汇总统计资料。如果使用总利润的话，结果变化不大。</p></li>
<li><p>有三个行业年年都上榜，银行业年年都第一。</p></li>
<li><p>利润上榜的行业比较集中，只有18个行业。每年变化都不太大。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;mostn_count_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-c9669de7dd5e474da3c8db23e9d1cd49.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c9669de7dd5e474da3c8db23e9d1cd49.vega-embed details,
  #altair-viz-c9669de7dd5e474da3c8db23e9d1cd49.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c9669de7dd5e474da3c8db23e9d1cd49"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c9669de7dd5e474da3c8db23e9d1cd49") {
      outputDiv = document.getElementById("altair-viz-c9669de7dd5e474da3c8db23e9d1cd49");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-0bb1f3a0f327220b14142587cffd5f67"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "count", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 800, "title": "indu\u540e10\u4e0a\u699c\u6b21\u6570\u7edf\u8ba1[40\u4e2a]", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-0bb1f3a0f327220b14142587cffd5f67": [{"indu": "\u6559\u80b2", "count": 12}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "count": 12}, {"indu": "\u7535\u673a", "count": 11}, {"indu": "\u80fd\u6e90\u91d1\u5c5e", "count": 8}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "count": 7}, {"indu": "\u8239\u8236\u5236\u9020", "count": 6}, {"indu": "\u5316\u80a5\u884c\u4e1a", "count": 6}, {"indu": "\u5bb6\u7528\u8f7b\u5de5", "count": 6}, {"indu": "\u533b\u7597\u670d\u52a1", "count": 5}, {"indu": "\u7f8e\u5bb9\u62a4\u7406", "count": 3}, {"indu": "\u7efc\u5408\u884c\u4e1a", "count": 3}, {"indu": "\u91c7\u6398\u884c\u4e1a", "count": 3}, {"indu": "\u822a\u7a7a\u673a\u573a", "count": 3}, {"indu": "\u6709\u8272\u91d1\u5c5e", "count": 3}, {"indu": "\u6c7d\u8f66\u670d\u52a1", "count": 3}, {"indu": "\u751f\u7269\u5236\u54c1", "count": 2}, {"indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "count": 2}, {"indu": "\u6e38\u620f", "count": 2}, {"indu": "\u5149\u5b66\u5149\u7535\u5b50", "count": 2}, {"indu": "\u88c5\u4fee\u88c5\u9970", "count": 2}, {"indu": "\u623f\u5730\u4ea7\u670d\u52a1", "count": 2}, {"indu": "\u5546\u4e1a\u767e\u8d27", "count": 2}, {"indu": "\u5de5\u7a0b\u673a\u68b0", "count": 2}, {"indu": "\u4eea\u5668\u4eea\u8868", "count": 2}, {"indu": "\u5316\u7ea4\u884c\u4e1a", "count": 2}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "count": 2}, {"indu": "\u98ce\u7535\u8bbe\u5907", "count": 2}, {"indu": "\u94a2\u94c1\u884c\u4e1a", "count": 2}, {"indu": "\u5149\u4f0f\u8bbe\u5907", "count": 2}, {"indu": "\u8d38\u6613\u884c\u4e1a", "count": 1}, {"indu": "\u65c5\u6e38\u9152\u5e97", "count": 1}, {"indu": "\u7535\u6e90\u8bbe\u5907", "count": 1}, {"indu": "\u519c\u7267\u9972\u6e14", "count": 1}, {"indu": "\u4e2d\u836f", "count": 1}, {"indu": "\u6587\u5316\u4f20\u5a92", "count": 1}, {"indu": "\u975e\u91d1\u5c5e\u6750\u6599", "count": 1}, {"indu": "\u901a\u7528\u8bbe\u5907", "count": 1}, {"indu": "\u7164\u70ad\u884c\u4e1a", "count": 1}, {"indu": "\u5c0f\u91d1\u5c5e", "count": 1}, {"indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "count": 1}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>而在每年利润落后榜单中，数量就很大了。</p></li>
<li><p>86个行业中，有超过一半，46个行业，在过去13年中至少一次进入到利润倒数10名内。</p></li>
<li><p>教育行业，这个是没想到的，原来一直这么惨。</p></li>
<li><p>半导体也是，炒得这么厉害，结果，大部分时间利润很惨。</p></li>
<li><p>房地产开发，跌落神坛。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;most_max&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-65aa7f346ea84fc19ede0f9a04e4dd46.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-65aa7f346ea84fc19ede0f9a04e4dd46.vega-embed details,
  #altair-viz-65aa7f346ea84fc19ede0f9a04e4dd46.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-65aa7f346ea84fc19ede0f9a04e4dd46"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-65aa7f346ea84fc19ede0f9a04e4dd46") {
      outputDiv = document.getElementById("altair-viz-65aa7f346ea84fc19ede0f9a04e4dd46");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-b2e5661c04ee5f03053e82b2a9645e6e"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "profit", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "profit", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 314, "title": "indu\u5386\u5e74profit\u6700\u5927\u503c", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-b2e5661c04ee5f03053e82b2a9645e6e": [{"year": "2010-\u94f6\u884c", "profit": 717891235853.88}, {"year": "2011-\u94f6\u884c", "profit": 940887164797.5933}, {"year": "2012-\u94f6\u884c", "profit": 1109735058518.21}, {"year": "2013-\u94f6\u884c", "profit": 1250751923730.68}, {"year": "2014-\u94f6\u884c", "profit": 1349791292634.52}, {"year": "2015-\u94f6\u884c", "profit": 1382706544931.19}, {"year": "2016-\u94f6\u884c", "profit": 1418731482817.92}, {"year": "2017-\u94f6\u884c", "profit": 1497018251859.41}, {"year": "2018-\u94f6\u884c", "profit": 1582277496113.48}, {"year": "2019-\u94f6\u884c", "profit": 1692330058802.84}, {"year": "2020-\u94f6\u884c", "profit": 1703499772650.52}, {"year": "2021-\u94f6\u884c", "profit": 1918812916648.83}, {"year": "2022-\u94f6\u884c", "profit": 2064535716083.25}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>每年的利润最大行业都是银行，而且还在不断增长。</p></li>
<li><p>疫情期间的增长特别可观，为什么？</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;most_min&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-21168115da594d60afff82a2e41ff428.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-21168115da594d60afff82a2e41ff428.vega-embed details,
  #altair-viz-21168115da594d60afff82a2e41ff428.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-21168115da594d60afff82a2e41ff428"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-21168115da594d60afff82a2e41ff428") {
      outputDiv = document.getElementById("altair-viz-21168115da594d60afff82a2e41ff428");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-1bc53c7eb9ec7716ac829163048e50a8"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "profit", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "profit", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 314, "title": "indu\u5386\u5e74profit\u6700\u5c0f\u503c", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-1bc53c7eb9ec7716ac829163048e50a8": [{"year": "2010-\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "profit": 288660060.77}, {"year": "2011-\u533b\u7597\u670d\u52a1", "profit": 441457540.64}, {"year": "2012-\u5149\u4f0f\u8bbe\u5907", "profit": -4649645395.35}, {"year": "2013-\u5149\u4f0f\u8bbe\u5907", "profit": -2688107960.03}, {"year": "2014-\u6709\u8272\u91d1\u5c5e", "profit": -7918363229.290001}, {"year": "2015-\u94a2\u94c1\u884c\u4e1a", "profit": -50528834004.76}, {"year": "2016-\u91c7\u6398\u884c\u4e1a", "profit": -23122731966.19}, {"year": "2017-\u91c7\u6398\u884c\u4e1a", "profit": -7467259207.92}, {"year": "2018-\u7535\u673a", "profit": -4149869663.16}, {"year": "2019-\u5316\u80a5\u884c\u4e1a", "profit": -43875304476.92999}, {"year": "2020-\u822a\u7a7a\u673a\u573a", "profit": -110387482673.41}, {"year": "2021-\u519c\u7267\u9972\u6e14", "profit": -43180494075.43}, {"year": "2022-\u822a\u7a7a\u673a\u573a", "profit": -141222516590.17}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>光伏行业、采掘行业、航空机场曾经两度最差。</p></li>
<li><p>疫情对航空机场的影响特别巨大。</p></li>
<li><p>十年前的光伏行业连续低迷，也算是见证到了。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;mostn_byear_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-c02fe12651d04907a46bb06c879310f3.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c02fe12651d04907a46bb06c879310f3.vega-embed details,
  #altair-viz-c02fe12651d04907a46bb06c879310f3.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c02fe12651d04907a46bb06c879310f3"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c02fe12651d04907a46bb06c879310f3") {
      outputDiv = document.getElementById("altair-viz-c02fe12651d04907a46bb06c879310f3");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2010", "width": 180}, {"data": {"name": "data-5fd8c24e6ff713e5f918e16d502d7ced"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2011", "width": 180}, {"data": {"name": "data-83b12dcc6e1905e688a4291b189d039a"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2012", "width": 180}]}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2013", "width": 180}, {"data": {"name": "data-cdf01bc0dce28003fcbb1b9d94e33ab1"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2014", "width": 180}, {"data": {"name": "data-ad74ca3733e1e163029ebbae1acb7f94"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2015", "width": 180}], "data": {"name": "data-39ace1bab305d9941103e22bc0c57557"}}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2016", "width": 180}, {"data": {"name": "data-16aae107dc0be4e3838d959649b90834"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2017", "width": 180}, {"data": {"name": "data-e3111c77c36390b779f62574160a90ac"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2018", "width": 180}], "data": {"name": "data-d9f9b2838d788a91daab5362506f84be"}}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2019", "width": 180}, {"data": {"name": "data-8f00b70fecf2fc30404327600b58b839"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2020", "width": 180}, {"data": {"name": "data-680132953323f9ca0310e438881cf199"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2021", "width": 180}], "data": {"name": "data-292319223de58214f08e22747b365102"}}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [0, 2167762501887.4126]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2022", "width": 180}], "data": {"name": "data-35460a374f8ee4d5de1e5b6ffacc19fa"}}], "data": {"name": "data-a4eeeea867dc22fddde6a3e49fee95d5"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-a4eeeea867dc22fddde6a3e49fee95d5": [{"year": "2010", "indu": "\u94f6\u884c", "profit": 717891235853.88}, {"year": "2010", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 215689979883.37997}, {"year": "2010", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 85655186189.70999}, {"year": "2010", "indu": "\u4fdd\u9669", "profit": 67448342248.509995}, {"year": "2010", "indu": "\u8bc1\u5238", "profit": 63243428566.0}, {"year": "2010", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 51927890438.92}, {"year": "2010", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 46719152194.69}, {"year": "2010", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 37810840698.7}, {"year": "2010", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 36853417106.31}, {"year": "2010", "indu": "\u94a2\u94c1\u884c\u4e1a", "profit": 30819244488.0}], "data-5fd8c24e6ff713e5f918e16d502d7ced": [{"year": "2011", "indu": "\u94f6\u884c", "profit": 940887164797.5933}, {"year": "2011", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 208400468514.39}, {"year": "2011", "indu": "\u901a\u4fe1\u670d\u52a1", "profit": 145757606357.64}, {"year": "2011", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 104254050018.89}, {"year": "2011", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 60411389207.21}, {"year": "2011", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 58195884386.51}, {"year": "2011", "indu": "\u4fdd\u9669", "profit": 48816316098.19}, {"year": "2011", "indu": "\u8bc1\u5238", "profit": 42498344577.85}, {"year": "2011", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 38842387650.65}, {"year": "2011", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 37849472795.02}], "data-83b12dcc6e1905e688a4291b189d039a": [{"year": "2012", "indu": "\u94f6\u884c", "profit": 1109735058518.21}, {"year": "2012", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 178834054420.91}, {"year": "2012", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 92090784627.53}, {"year": "2012", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 67199194407.28}, {"year": "2012", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 58082435422.770004}, {"year": "2012", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 56152692673.38}, {"year": "2012", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 45194218464.45}, {"year": "2012", "indu": "\u4fdd\u9669", "profit": 39132824926.41}, {"year": "2012", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 34771753054.55}, {"year": "2012", "indu": "\u8bc1\u5238", "profit": 30643676907.75}], "data-39ace1bab305d9941103e22bc0c57557": [{"year": "2013", "indu": "\u94f6\u884c", "profit": 1250751923730.68}, {"year": "2013", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 199980863004.92}, {"year": "2013", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 78902537203.33}, {"year": "2013", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 77595107139.27}, {"year": "2013", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 77112357605.81}, {"year": "2013", "indu": "\u4fdd\u9669", "profit": 66500989019.82}, {"year": "2013", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 64399745462.73}, {"year": "2013", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 47860170113.13}, {"year": "2013", "indu": "\u8bc1\u5238", "profit": 42156604349.4}, {"year": "2013", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 40202495439.79}], "data-cdf01bc0dce28003fcbb1b9d94e33ab1": [{"year": "2014", "indu": "\u94f6\u884c", "profit": 1349791292634.52}, {"year": "2014", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 154836026695.5}, {"year": "2014", "indu": "\u4fdd\u9669", "profit": 101846822760.82}, {"year": "2014", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 90889299575.95999}, {"year": "2014", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 88673428225.69}, {"year": "2014", "indu": "\u8bc1\u5238", "profit": 88563175688.34}, {"year": "2014", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 87132197713.3}, {"year": "2014", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 55047948003.5}, {"year": "2014", "indu": "\u5bb6\u7535\u884c\u4e1a", "profit": 41337932900.38}, {"year": "2014", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 40802733160.44}], "data-ad74ca3733e1e163029ebbae1acb7f94": [{"year": "2015", "indu": "\u94f6\u884c", "profit": 1382706544931.19}, {"year": "2015", "indu": "\u8bc1\u5238", "profit": 218374835009.22}, {"year": "2015", "indu": "\u4fdd\u9669", "profit": 134654266665.79001}, {"year": "2015", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 107102731136.63}, {"year": "2015", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 96710453019.86}, {"year": "2015", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 92656995556.69}, {"year": "2015", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 73053242775.06}, {"year": "2015", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 64575854842.37}, {"year": "2015", "indu": "\u5bb6\u7535\u884c\u4e1a", "profit": 40366016746.7}, {"year": "2015", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 37210662341.15}], "data-d9f9b2838d788a91daab5362506f84be": [{"year": "2016", "indu": "\u94f6\u884c", "profit": 1418731482817.92}, {"year": "2016", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 127229541286.28}, {"year": "2016", "indu": "\u4fdd\u9669", "profit": 114632718929.20999}, {"year": "2016", "indu": "\u8bc1\u5238", "profit": 112797193544.88}, {"year": "2016", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 107320276851.29}, {"year": "2016", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 97468434729.65001}, {"year": "2016", "indu": "\u6c7d\u8f66\u6574\u8f66", "profit": 71877076500.18}, {"year": "2016", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 63776986732.04}, {"year": "2016", "indu": "\u5bb6\u7535\u884c\u4e1a", "profit": 54644391074.38}, {"year": "2016", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 39063204717.979996}], "data-16aae107dc0be4e3838d959649b90834": [{"year": "2017", "indu": "\u94f6\u884c", "profit": 1497018251859.41}, {"year": "2017", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 163675267491.71}, {"year": "2017", "indu": "\u4fdd\u9669", "profit": 159358164178.53}, {"year": "2017", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 125689553253.99}, {"year": "2017", "indu": "\u8bc1\u5238", "profit": 109042020536.85}, {"year": "2017", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 85710649352.35}, {"year": "2017", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 84692289495.31999}, {"year": "2017", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 81130009290.84}, {"year": "2017", "indu": "\u94a2\u94c1\u884c\u4e1a", "profit": 79662278055.82}, {"year": "2017", "indu": "\u5bb6\u7535\u884c\u4e1a", "profit": 70968360686.96}], "data-e3111c77c36390b779f62574160a90ac": [{"year": "2018", "indu": "\u94f6\u884c", "profit": 1582277496113.48}, {"year": "2018", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 194842954830.26}, {"year": "2018", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 179731941656.1}, {"year": "2018", "indu": "\u4fdd\u9669", "profit": 159516520092.79}, {"year": "2018", "indu": "\u901a\u4fe1\u670d\u52a1", "profit": 137443136166.65}, {"year": "2018", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 135437827955.68001}, {"year": "2018", "indu": "\u94a2\u94c1\u884c\u4e1a", "profit": 111226982310.36}, {"year": "2018", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 95035225779.16}, {"year": "2018", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 92304277715.68}, {"year": "2018", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 73387097801.06999}], "data-292319223de58214f08e22747b365102": [{"year": "2019", "indu": "\u94f6\u884c", "profit": 1692330058802.84}, {"year": "2019", "indu": "\u4fdd\u9669", "profit": 274170935211.13}, {"year": "2019", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 225251836187.76}, {"year": "2019", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 171765189358.19}, {"year": "2019", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 150970866724.03}, {"year": "2019", "indu": "\u901a\u4fe1\u670d\u52a1", "profit": 127345920300.97}, {"year": "2019", "indu": "\u8bc1\u5238", "profit": 113718878497.67}, {"year": "2019", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 100572424662.56}, {"year": "2019", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 93713637725.53}, {"year": "2019", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 87318079511.5}], "data-8f00b70fecf2fc30404327600b58b839": [{"year": "2020", "indu": "\u94f6\u884c", "profit": 1703499772650.52}, {"year": "2020", "indu": "\u4fdd\u9669", "profit": 252883292292.66}, {"year": "2020", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": 202479674502.24}, {"year": "2020", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 159570736067.08}, {"year": "2020", "indu": "\u8bc1\u5238", "profit": 152506998482.93}, {"year": "2020", "indu": "\u901a\u4fe1\u670d\u52a1", "profit": 134578692836.92001}, {"year": "2020", "indu": "\u7535\u529b\u884c\u4e1a", "profit": 129916303793.1}, {"year": "2020", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 97407965494.43}, {"year": "2020", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 86552380934.78}, {"year": "2020", "indu": "\u5bb6\u7535\u884c\u4e1a", "profit": 84201796522.81999}], "data-680132953323f9ca0310e438881cf199": [{"year": "2021", "indu": "\u94f6\u884c", "profit": 1918812916648.83}, {"year": "2021", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 243088001205.41998}, {"year": "2021", "indu": "\u4fdd\u9669", "profit": 216273713660.35}, {"year": "2021", "indu": "\u8bc1\u5238", "profit": 197586996700.16}, {"year": "2021", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 182129019935.78}, {"year": "2021", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 160814806423.21}, {"year": "2021", "indu": "\u901a\u4fe1\u670d\u52a1", "profit": 143235608413.13}, {"year": "2021", "indu": "\u822a\u8fd0\u6e2f\u53e3", "profit": 138454534441.19}, {"year": "2021", "indu": "\u94a2\u94c1\u884c\u4e1a", "profit": 124015783903.23}, {"year": "2021", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 114898270890.34001}], "data-35460a374f8ee4d5de1e5b6ffacc19fa": [{"year": "2022", "indu": "\u94f6\u884c", "profit": 2064535716083.25}, {"year": "2022", "indu": "\u77f3\u6cb9\u884c\u4e1a", "profit": 367657335023.49}, {"year": "2022", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": 241443667725.18}, {"year": "2022", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "profit": 194595456062.69998}, {"year": "2022", "indu": "\u4fdd\u9669", "profit": 174967051117.04}, {"year": "2022", "indu": "\u822a\u8fd0\u6e2f\u53e3", "profit": 165592425221.11002}, {"year": "2022", "indu": "\u901a\u4fe1\u670d\u52a1", "profit": 159580243204.38998}, {"year": "2022", "indu": "\u917f\u9152\u884c\u4e1a", "profit": 136686746998.98}, {"year": "2022", "indu": "\u8bc1\u5238", "profit": 127562829495.7}, {"year": "2022", "indu": "\u5bb6\u7535\u884c\u4e1a", "profit": 102822390463.49}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus</span><span class="p">[</span><span class="s1">&#39;mostn_byear_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-62589f7fdce4465d90fb7bb83ed5302d.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-62589f7fdce4465d90fb7bb83ed5302d.vega-embed details,
  #altair-viz-62589f7fdce4465d90fb7bb83ed5302d.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-62589f7fdce4465d90fb7bb83ed5302d"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-62589f7fdce4465d90fb7bb83ed5302d") {
      outputDiv = document.getElementById("altair-viz-62589f7fdce4465d90fb7bb83ed5302d");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2010", "width": 180}, {"data": {"name": "data-8a970751eed91d90f4209d6b5e586b32"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2011", "width": 180}, {"data": {"name": "data-2f0da8ca8b29450db4b688f71b65da3e"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2012", "width": 180}]}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2013", "width": 180}, {"data": {"name": "data-f1b644072b2459e741afc1e37026e8d9"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2014", "width": 180}, {"data": {"name": "data-c03eac07b423c5cdd2e55e4d34877ed7"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2015", "width": 180}], "data": {"name": "data-e8c93aef8695e405546c35b663023728"}}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2016", "width": 180}, {"data": {"name": "data-2492bdb10a3f1acbec78920e5c3291b6"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2017", "width": 180}, {"data": {"name": "data-acf58db5014621b062d635993300fa3d"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2018", "width": 180}], "data": {"name": "data-2ccdd3c9c1414bf781565862719fe19f"}}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2019", "width": 180}, {"data": {"name": "data-5911e515fe20615c435a8807df13d9f5"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2020", "width": 180}, {"data": {"name": "data-b85eb7c7f5b2e7c1d7aff61b3770470a"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2021", "width": 180}], "data": {"name": "data-c3ad63ad931c9eb169686e952f922e02"}}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "profit", "scale": {"domain": [-148283642419.67853, 3979938048.8175]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2022", "width": 180}], "data": {"name": "data-046aed9432c30e5fb0a868f983446883"}}], "data": {"name": "data-26da0cdf480c819e7bf42123689a55e0"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-26da0cdf480c819e7bf42123689a55e0": [{"year": "2010", "indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "profit": 288660060.77}, {"year": "2010", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 307842134.89}, {"year": "2010", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 342996409.87}, {"year": "2010", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 434170303.89}, {"year": "2010", "indu": "\u7f8e\u5bb9\u62a4\u7406", "profit": 590435212.24}, {"year": "2010", "indu": "\u7535\u673a", "profit": 772164546.38}, {"year": "2010", "indu": "\u6559\u80b2", "profit": 817339308.27}, {"year": "2010", "indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 936287607.21}, {"year": "2010", "indu": "\u4eea\u5668\u4eea\u8868", "profit": 947888340.63}, {"year": "2010", "indu": "\u533b\u7597\u670d\u52a1", "profit": 1014258145.29}], "data-8a970751eed91d90f4209d6b5e586b32": [{"year": "2011", "indu": "\u533b\u7597\u670d\u52a1", "profit": 441457540.64}, {"year": "2011", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 487852314.28000003}, {"year": "2011", "indu": "\u822a\u8fd0\u6e2f\u53e3", "profit": 513383351.2699989}, {"year": "2011", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 707451434.98}, {"year": "2011", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 723377345.96}, {"year": "2011", "indu": "\u7f8e\u5bb9\u62a4\u7406", "profit": 749722962.23}, {"year": "2011", "indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "profit": 808669008.4200001}, {"year": "2011", "indu": "\u7535\u673a", "profit": 1041664273.51}, {"year": "2011", "indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 1236147533.69}, {"year": "2011", "indu": "\u4eea\u5668\u4eea\u8868", "profit": 1427344428.36}], "data-2f0da8ca8b29450db4b688f71b65da3e": [{"year": "2012", "indu": "\u5149\u4f0f\u8bbe\u5907", "profit": -4649645395.35}, {"year": "2012", "indu": "\u94a2\u94c1\u884c\u4e1a", "profit": -4552680964.4800005}, {"year": "2012", "indu": "\u6709\u8272\u91d1\u5c5e", "profit": -760329138.9799998}, {"year": "2012", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 245774606.66}, {"year": "2012", "indu": "\u6c7d\u8f66\u670d\u52a1", "profit": 770283133.4000001}, {"year": "2012", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 792222389.38}, {"year": "2012", "indu": "\u6559\u80b2", "profit": 822648338.26}, {"year": "2012", "indu": "\u98ce\u7535\u8bbe\u5907", "profit": 878760725.5699999}, {"year": "2012", "indu": "\u7535\u673a", "profit": 907569733.01}, {"year": "2012", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 921669502.05}], "data-e8c93aef8695e405546c35b663023728": [{"year": "2013", "indu": "\u5149\u4f0f\u8bbe\u5907", "profit": -2688107960.03}, {"year": "2013", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 278571881.71000004}, {"year": "2013", "indu": "\u6559\u80b2", "profit": 803600458.34}, {"year": "2013", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 835996551.11}, {"year": "2013", "indu": "\u822a\u8fd0\u6e2f\u53e3", "profit": 887370872.6600015}, {"year": "2013", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 1188472040.2}, {"year": "2013", "indu": "\u533b\u7597\u670d\u52a1", "profit": 1247411319.29}, {"year": "2013", "indu": "\u7535\u673a", "profit": 1291449402.65}, {"year": "2013", "indu": "\u98ce\u7535\u8bbe\u5907", "profit": 1345586855.33}, {"year": "2013", "indu": "\u5316\u7ea4\u884c\u4e1a", "profit": 1350770111.1}], "data-f1b644072b2459e741afc1e37026e8d9": [{"year": "2014", "indu": "\u6709\u8272\u91d1\u5c5e", "profit": -7918363229.290001}, {"year": "2014", "indu": "\u5316\u80a5\u884c\u4e1a", "profit": -128175747.78000014}, {"year": "2014", "indu": "\u5316\u7ea4\u884c\u4e1a", "profit": 260309343.79000008}, {"year": "2014", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 661801897.37}, {"year": "2014", "indu": "\u6559\u80b2", "profit": 838358281.35}, {"year": "2014", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 1088034064.46}, {"year": "2014", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 1224454572.67}, {"year": "2014", "indu": "\u7535\u673a", "profit": 1415514019.84}, {"year": "2014", "indu": "\u533b\u7597\u670d\u52a1", "profit": 1676660547.55}, {"year": "2014", "indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 1677967344.59}], "data-c03eac07b423c5cdd2e55e4d34877ed7": [{"year": "2015", "indu": "\u94a2\u94c1\u884c\u4e1a", "profit": -50528834004.76}, {"year": "2015", "indu": "\u7164\u70ad\u884c\u4e1a", "profit": -5429942566.62}, {"year": "2015", "indu": "\u5c0f\u91d1\u5c5e", "profit": -2889013837.6}, {"year": "2015", "indu": "\u5de5\u7a0b\u673a\u68b0", "profit": -1158812248.1699998}, {"year": "2015", "indu": "\u8239\u8236\u5236\u9020", "profit": -1018336822.7499999}, {"year": "2015", "indu": "\u6559\u80b2", "profit": 188570618.68000004}, {"year": "2015", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 342893330.21}, {"year": "2015", "indu": "\u8d38\u6613\u884c\u4e1a", "profit": 485135171.0800001}, {"year": "2015", "indu": "\u7535\u673a", "profit": 1302970280.3600001}, {"year": "2015", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 1333968036.69}], "data-2ccdd3c9c1414bf781565862719fe19f": [{"year": "2016", "indu": "\u91c7\u6398\u884c\u4e1a", "profit": -23122731966.19}, {"year": "2016", "indu": "\u5316\u80a5\u884c\u4e1a", "profit": -3041735214.7}, {"year": "2016", "indu": "\u5de5\u7a0b\u673a\u68b0", "profit": -1305994246.9200006}, {"year": "2016", "indu": "\u8239\u8236\u5236\u9020", "profit": -349656899.0599997}, {"year": "2016", "indu": "\u6559\u80b2", "profit": 1244518835.6899998}, {"year": "2016", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 1270212757.89}, {"year": "2016", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 1591761512.92}, {"year": "2016", "indu": "\u7535\u673a", "profit": 1864494398.29}, {"year": "2016", "indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 2204256765.85}, {"year": "2016", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "profit": 2451834745.54}], "data-2492bdb10a3f1acbec78920e5c3291b6": [{"year": "2017", "indu": "\u91c7\u6398\u884c\u4e1a", "profit": -7467259207.92}, {"year": "2017", "indu": "\u5316\u80a5\u884c\u4e1a", "profit": -1222077117.2499998}, {"year": "2017", "indu": "\u8239\u8236\u5236\u9020", "profit": 225955792.22999963}, {"year": "2017", "indu": "\u6559\u80b2", "profit": 1695578184.9}, {"year": "2017", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 1986276180.11}, {"year": "2017", "indu": "\u7efc\u5408\u884c\u4e1a", "profit": 2636450424.85}, {"year": "2017", "indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 2691742885.71}, {"year": "2017", "indu": "\u4e13\u4e1a\u670d\u52a1", "profit": 2698685600.26}, {"year": "2017", "indu": "\u7535\u673a", "profit": 2852087507.68}, {"year": "2017", "indu": "\u7f8e\u5bb9\u62a4\u7406", "profit": 3790417189.35}], "data-acf58db5014621b062d635993300fa3d": [{"year": "2018", "indu": "\u7535\u673a", "profit": -4149869663.16}, {"year": "2018", "indu": "\u6559\u80b2", "profit": -2604245542.0899997}, {"year": "2018", "indu": "\u6709\u8272\u91d1\u5c5e", "profit": -846633615.5300004}, {"year": "2018", "indu": "\u8239\u8236\u5236\u9020", "profit": -804006882.3699998}, {"year": "2018", "indu": "\u6c7d\u8f66\u670d\u52a1", "profit": -270608228.8399997}, {"year": "2018", "indu": "\u5316\u80a5\u884c\u4e1a", "profit": 496588918.2399996}, {"year": "2018", "indu": "\u91c7\u6398\u884c\u4e1a", "profit": 1892830409.8300002}, {"year": "2018", "indu": "\u5bb6\u7528\u8f7b\u5de5", "profit": 2195873980.13}, {"year": "2018", "indu": "\u751f\u7269\u5236\u54c1", "profit": 2301841336.61}, {"year": "2018", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 2432085569.54}], "data-c3ad63ad931c9eb169686e952f922e02": [{"year": "2019", "indu": "\u5316\u80a5\u884c\u4e1a", "profit": -43875304476.92999}, {"year": "2019", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": -4585814841.24}, {"year": "2019", "indu": "\u6e38\u620f", "profit": -1922610974.8199997}, {"year": "2019", "indu": "\u7535\u673a", "profit": -297119140.33999985}, {"year": "2019", "indu": "\u751f\u7269\u5236\u54c1", "profit": 781453077.7499998}, {"year": "2019", "indu": "\u533b\u7597\u670d\u52a1", "profit": 967087867.1300001}, {"year": "2019", "indu": "\u6559\u80b2", "profit": 1119261422.8899999}, {"year": "2019", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 2403056491.81}, {"year": "2019", "indu": "\u901a\u7528\u8bbe\u5907", "profit": 2533577406.6000004}, {"year": "2019", "indu": "\u5149\u5b66\u5149\u7535\u5b50", "profit": 2972760161.8099995}], "data-5911e515fe20615c435a8807df13d9f5": [{"year": "2020", "indu": "\u822a\u7a7a\u673a\u573a", "profit": -110387482673.41}, {"year": "2020", "indu": "\u4e2d\u836f", "profit": -3507242127.2499986}, {"year": "2020", "indu": "\u6559\u80b2", "profit": -2085745841.2800004}, {"year": "2020", "indu": "\u7efc\u5408\u884c\u4e1a", "profit": 309477876.1900002}, {"year": "2020", "indu": "\u6587\u5316\u4f20\u5a92", "profit": 487387744.3800001}, {"year": "2020", "indu": "\u65c5\u6e38\u9152\u5e97", "profit": 542365360.0100006}, {"year": "2020", "indu": "\u80fd\u6e90\u91d1\u5c5e", "profit": 1960711891.98}, {"year": "2020", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 2058489247.9}, {"year": "2020", "indu": "\u5316\u80a5\u884c\u4e1a", "profit": 2134352052.74}, {"year": "2020", "indu": "\u7535\u673a", "profit": 2912142818.65}], "data-b85eb7c7f5b2e7c1d7aff61b3770470a": [{"year": "2021", "indu": "\u519c\u7267\u9972\u6e14", "profit": -43180494075.43}, {"year": "2021", "indu": "\u822a\u7a7a\u673a\u573a", "profit": -37956101290.840004}, {"year": "2021", "indu": "\u5546\u4e1a\u767e\u8d27", "profit": -30255551230.72}, {"year": "2021", "indu": "\u88c5\u4fee\u88c5\u9970", "profit": -18733359249.670002}, {"year": "2021", "indu": "\u623f\u5730\u4ea7\u670d\u52a1", "profit": -6490812565.389999}, {"year": "2021", "indu": "\u6559\u80b2", "profit": -5482098685.65}, {"year": "2021", "indu": "\u7535\u6e90\u8bbe\u5907", "profit": -5191330912.0}, {"year": "2021", "indu": "\u8239\u8236\u5236\u9020", "profit": -2141375.5300000235}, {"year": "2021", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "profit": 2826234746.34}, {"year": "2021", "indu": "\u7efc\u5408\u884c\u4e1a", "profit": 2933776591.81}], "data-046aed9432c30e5fb0a868f983446883": [{"year": "2022", "indu": "\u822a\u7a7a\u673a\u573a", "profit": -141222516590.17}, {"year": "2022", "indu": "\u623f\u5730\u4ea7\u5f00\u53d1", "profit": -50074346457.00001}, {"year": "2022", "indu": "\u623f\u5730\u4ea7\u670d\u52a1", "profit": -18423035809.89}, {"year": "2022", "indu": "\u5546\u4e1a\u767e\u8d27", "profit": -16311305275.98}, {"year": "2022", "indu": "\u88c5\u4fee\u88c5\u9970", "profit": -8081717703.28}, {"year": "2022", "indu": "\u5149\u5b66\u5149\u7535\u5b50", "profit": -2793900618.2899995}, {"year": "2022", "indu": "\u6c7d\u8f66\u670d\u52a1", "profit": -2780658556.7200003}, {"year": "2022", "indu": "\u8239\u8236\u5236\u9020", "profit": -2645582522.22}, {"year": "2022", "indu": "\u6559\u80b2", "profit": -2046358334.8600001}, {"year": "2022", "indu": "\u6e38\u620f", "profit": -1292187090.87}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>房地产开发出现了巨大的由盛转衰，从利润第二、第三，快速到如今的倒数第二。</p></li>
</ul>
</section>
<section id="id4">
<h2>行业增长<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>数据是去除了出现过亏损的行业。出现过亏损无法正确计算增长率。</p></li>
<li><p>使用对数增长率，所以增长率可以相加。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_inc</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">get_inc</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">indudf</span><span class="p">)</span>
<span class="n">indus_inc_mostn</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">mostn</span><span class="p">(</span><span class="n">indu_inc</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;mostn_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-a1f1b2ba2ba74049a8df15b0ee169d66.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-a1f1b2ba2ba74049a8df15b0ee169d66.vega-embed details,
  #altair-viz-a1f1b2ba2ba74049a8df15b0ee169d66.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-a1f1b2ba2ba74049a8df15b0ee169d66"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-a1f1b2ba2ba74049a8df15b0ee169d66") {
      outputDiv = document.getElementById("altair-viz-a1f1b2ba2ba74049a8df15b0ee169d66");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-51ca366c4901604bb360ecce18a3f617"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "inc", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "inc", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "indu\u603binc\u524d10", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-51ca366c4901604bb360ecce18a3f617": [{"indu": "\u7535\u6c60", "inc": 3.938016103852198}, {"indu": "\u533b\u7597\u5668\u68b0", "inc": 3.6915169344536944}, {"indu": "\u534a\u5bfc\u4f53", "inc": 3.4715852199691257}, {"indu": "\u533b\u7597\u670d\u52a1", "inc": 3.175344862723153}, {"indu": "\u6d88\u8d39\u7535\u5b50", "inc": 3.019574167337433}, {"indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "inc": 2.805248914183324}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "inc": 2.6807804954418075}, {"indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": 2.502693961331243}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "inc": 2.496034490039855}, {"indu": "\u519c\u836f\u517d\u836f", "inc": 2.300958832205292}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;mostn_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-f1a1d10d1e3f485e899b656cf8833387.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-f1a1d10d1e3f485e899b656cf8833387.vega-embed details,
  #altair-viz-f1a1d10d1e3f485e899b656cf8833387.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-f1a1d10d1e3f485e899b656cf8833387"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-f1a1d10d1e3f485e899b656cf8833387") {
      outputDiv = document.getElementById("altair-viz-f1a1d10d1e3f485e899b656cf8833387");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-d0d55487a3c69b3acb8daccd6382b4d0"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "inc", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "inc", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "indu\u603binc\u540e\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-d0d55487a3c69b3acb8daccd6382b4d0": [{"indu": "\u65c5\u6e38\u9152\u5e97", "inc": -1.9448250926563588}, {"indu": "\u751f\u7269\u5236\u54c1", "inc": -0.46249337665340406}, {"indu": "\u7efc\u5408\u884c\u4e1a", "inc": -0.3056472116814019}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "inc": -0.1785580462513079}, {"indu": "\u5305\u88c5\u6750\u6599", "inc": 0.007038250603613294}, {"indu": "\u6587\u5316\u4f20\u5a92", "inc": 0.06580515038003476}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "inc": 0.11736215778377324}, {"indu": "\u591a\u5143\u91d1\u878d", "inc": 0.19577690651827706}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "inc": 0.20320168071585681}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "inc": 0.41959871284946737}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>环保行业，汽车整车，软件开发，这些感觉很火的行业，其实利润增长很有限。</p></li>
<li><p>旅游酒店行业的利润快速萎缩可能是暂时的，疫情过后应该能恢复。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;most_max&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-b7c00f50a2e54d8f94183a243a25c26a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b7c00f50a2e54d8f94183a243a25c26a.vega-embed details,
  #altair-viz-b7c00f50a2e54d8f94183a243a25c26a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b7c00f50a2e54d8f94183a243a25c26a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b7c00f50a2e54d8f94183a243a25c26a") {
      outputDiv = document.getElementById("altair-viz-b7c00f50a2e54d8f94183a243a25c26a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-4f955b296332be6673dd0a7fcd6fab86"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "inc", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "inc", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 296, "title": "indu\u5386\u5e74inc\u6700\u5927\u503c", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-4f955b296332be6673dd0a7fcd6fab86": [{"year": "2011-\u901a\u4fe1\u670d\u52a1", "inc": 2.092776010209171}, {"year": "2012-\u822a\u8fd0\u6e2f\u53e3", "inc": 1.9130933708688374}, {"year": "2013-\u901a\u4fe1\u8bbe\u5907", "inc": 0.9224504153396239}, {"year": "2014-\u822a\u8fd0\u6e2f\u53e3", "inc": 3.3677233621281113}, {"year": "2015-\u5316\u7ea4\u884c\u4e1a", "inc": 2.633710271669452}, {"year": "2016-\u8d38\u6613\u884c\u4e1a", "inc": 2.8777032771690183}, {"year": "2017-\u4e13\u7528\u8bbe\u5907", "inc": 1.5675126629812555}, {"year": "2018-\u901a\u4fe1\u670d\u52a1", "inc": 1.8799318279097927}, {"year": "2019-\u4e92\u8054\u7f51\u670d\u52a1", "inc": 0.8429997670144617}, {"year": "2020-\u533b\u7597\u670d\u52a1", "inc": 2.594985500129778}, {"year": "2021-\u6587\u5316\u4f20\u5a92", "inc": 4.059667233391124}, {"year": "2022-\u519c\u836f\u517d\u836f", "inc": 0.5651470344279774}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;most_min&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-19dfce62848644a6b731c88d41b8cdaf.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-19dfce62848644a6b731c88d41b8cdaf.vega-embed details,
  #altair-viz-19dfce62848644a6b731c88d41b8cdaf.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-19dfce62848644a6b731c88d41b8cdaf"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-19dfce62848644a6b731c88d41b8cdaf") {
      outputDiv = document.getElementById("altair-viz-19dfce62848644a6b731c88d41b8cdaf");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-265f14b8ee735477d3f6760aa6fd2950"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "year", "type": "nominal"}, {"field": "inc", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "inc", "type": "quantitative"}, "y": {"field": "year", "type": "ordinal"}}, "height": 296, "title": "indu\u5386\u5e74inc\u6700\u5c0f\u503c", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-265f14b8ee735477d3f6760aa6fd2950": [{"year": "2011-\u822a\u8fd0\u6e2f\u53e3", "inc": -3.9822738546439638}, {"year": "2012-\u901a\u4fe1\u670d\u52a1", "inc": -2.0144928058031244}, {"year": "2013-\u822a\u8fd0\u6e2f\u53e3", "inc": -1.365853195230937}, {"year": "2014-\u5316\u7ea4\u884c\u4e1a", "inc": -1.646559453861492}, {"year": "2015-\u8d38\u6613\u884c\u4e1a", "inc": -2.588899840514421}, {"year": "2016-\u4e13\u7528\u8bbe\u5907", "inc": -1.1321962044597667}, {"year": "2017-\u7535\u529b\u884c\u4e1a", "inc": -0.18347565829916904}, {"year": "2018-\u4e92\u8054\u7f51\u670d\u52a1", "inc": -1.4792511392021936}, {"year": "2019-\u533b\u7597\u670d\u52a1", "inc": -2.1222259993721293}, {"year": "2020-\u6587\u5316\u4f20\u5a92", "inc": -3.1691777730163038}, {"year": "2021-\u7535\u529b\u884c\u4e1a", "inc": -0.9875522799087344}, {"year": "2022-\u65c5\u6e38\u9152\u5e97", "inc": -3.067673220497637}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>航运港口，上窜下跳，经常上一年负增长最大，下一年又正增长最大。</p></li>
<li><p>医疗服务、互联网服务、文化传媒等多个行业也有类似情况。</p></li>
<li><p>也许这是一种周期性的模式？暴发性增长后，常伴随着报复性负增长。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;mostn_count_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-8a62f4a4e9b84810a6fe81f7d826b074.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-8a62f4a4e9b84810a6fe81f7d826b074.vega-embed details,
  #altair-viz-8a62f4a4e9b84810a6fe81f7d826b074.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-8a62f4a4e9b84810a6fe81f7d826b074"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8a62f4a4e9b84810a6fe81f7d826b074") {
      outputDiv = document.getElementById("altair-viz-8a62f4a4e9b84810a6fe81f7d826b074");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-e2baaa947daf826ec990e8835407f280"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "count", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 944, "title": "indu\u524d10\u4e0a\u699c\u6b21\u6570\u7edf\u8ba1[48\u4e2a]", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-e2baaa947daf826ec990e8835407f280": [{"indu": "\u533b\u7597\u670d\u52a1", "count": 6}, {"indu": "\u5316\u5b66\u539f\u6599", "count": 5}, {"indu": "\u7535\u6c60", "count": 5}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "count": 4}, {"indu": "\u6c34\u6ce5\u5efa\u6750", "count": 4}, {"indu": "\u975e\u91d1\u5c5e\u6750\u6599", "count": 4}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "count": 4}, {"indu": "\u98ce\u7535\u8bbe\u5907", "count": 4}, {"indu": "\u534a\u5bfc\u4f53", "count": 4}, {"indu": "\u5316\u7ea4\u884c\u4e1a", "count": 4}, {"indu": "\u4e13\u7528\u8bbe\u5907", "count": 3}, {"indu": "\u8bc1\u5238", "count": 3}, {"indu": "\u7535\u7f51\u8bbe\u5907", "count": 3}, {"indu": "\u533b\u7597\u5668\u68b0", "count": 3}, {"indu": "\u9020\u7eb8\u5370\u5237", "count": 3}, {"indu": "\u751f\u7269\u5236\u54c1", "count": 3}, {"indu": "\u4fdd\u9669", "count": 3}, {"indu": "\u4e92\u8054\u7f51\u670d\u52a1", "count": 3}, {"indu": "\u73e0\u5b9d\u9996\u9970", "count": 3}, {"indu": "\u6d88\u8d39\u7535\u5b50", "count": 3}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "count": 3}, {"indu": "\u6a61\u80f6\u5236\u54c1", "count": 2}, {"indu": "\u901a\u7528\u8bbe\u5907", "count": 2}, {"indu": "\u7efc\u5408\u884c\u4e1a", "count": 2}, {"indu": "\u8d35\u91d1\u5c5e", "count": 2}, {"indu": "\u901a\u4fe1\u670d\u52a1", "count": 2}, {"indu": "\u519c\u836f\u517d\u836f", "count": 2}, {"indu": "\u73bb\u7483\u73bb\u7ea4", "count": 2}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "count": 2}, {"indu": "\u6587\u5316\u4f20\u5a92", "count": 2}, {"indu": "\u7f8e\u5bb9\u62a4\u7406", "count": 2}, {"indu": "\u7535\u529b\u884c\u4e1a", "count": 2}, {"indu": "\u591a\u5143\u91d1\u878d", "count": 2}, {"indu": "\u901a\u4fe1\u8bbe\u5907", "count": 2}, {"indu": "\u917f\u9152\u884c\u4e1a", "count": 2}, {"indu": "\u8d38\u6613\u884c\u4e1a", "count": 2}, {"indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "count": 2}, {"indu": "\u5316\u5b66\u5236\u54c1", "count": 1}, {"indu": "\u5305\u88c5\u6750\u6599", "count": 1}, {"indu": "\u71c3\u6c14", "count": 1}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "count": 1}, {"indu": "\u8ba1\u7b97\u673a\u8bbe\u5907", "count": 1}, {"indu": "\u4ea4\u8fd0\u8bbe\u5907", "count": 1}, {"indu": "\u98df\u54c1\u996e\u6599", "count": 1}, {"indu": "\u4eea\u5668\u4eea\u8868", "count": 1}, {"indu": "\u5bb6\u7528\u8f7b\u5de5", "count": 1}, {"indu": "\u822a\u5929\u822a\u7a7a", "count": 1}, {"indu": "\u65c5\u6e38\u9152\u5e97", "count": 1}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;mostn_count_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-05bd5cc5ec444741827aa6ee47531802.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-05bd5cc5ec444741827aa6ee47531802.vega-embed details,
  #altair-viz-05bd5cc5ec444741827aa6ee47531802.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-05bd5cc5ec444741827aa6ee47531802"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-05bd5cc5ec444741827aa6ee47531802") {
      outputDiv = document.getElementById("altair-viz-05bd5cc5ec444741827aa6ee47531802");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-5a86b4015afe93ab43fdc8ca73df7d09"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "count", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 998, "title": "indu\u540e10\u4e0a\u699c\u6b21\u6570\u7edf\u8ba1[51\u4e2a]", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-5a86b4015afe93ab43fdc8ca73df7d09": [{"indu": "\u5316\u7ea4\u884c\u4e1a", "count": 5}, {"indu": "\u7535\u7f51\u8bbe\u5907", "count": 4}, {"indu": "\u8d35\u91d1\u5c5e", "count": 4}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "count": 4}, {"indu": "\u6c34\u6ce5\u5efa\u6750", "count": 4}, {"indu": "\u901a\u7528\u8bbe\u5907", "count": 4}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "count": 4}, {"indu": "\u901a\u4fe1\u8bbe\u5907", "count": 4}, {"indu": "\u8bc1\u5238", "count": 4}, {"indu": "\u7efc\u5408\u884c\u4e1a", "count": 3}, {"indu": "\u7535\u6c60", "count": 3}, {"indu": "\u7535\u529b\u884c\u4e1a", "count": 3}, {"indu": "\u6a61\u80f6\u5236\u54c1", "count": 3}, {"indu": "\u533b\u7597\u670d\u52a1", "count": 3}, {"indu": "\u751f\u7269\u5236\u54c1", "count": 3}, {"indu": "\u6587\u5316\u4f20\u5a92", "count": 3}, {"indu": "\u4e13\u7528\u8bbe\u5907", "count": 3}, {"indu": "\u73e0\u5b9d\u9996\u9970", "count": 3}, {"indu": "\u65c5\u6e38\u9152\u5e97", "count": 3}, {"indu": "\u5316\u5b66\u539f\u6599", "count": 3}, {"indu": "\u98ce\u7535\u8bbe\u5907", "count": 3}, {"indu": "\u9020\u7eb8\u5370\u5237", "count": 3}, {"indu": "\u975e\u91d1\u5c5e\u6750\u6599", "count": 3}, {"indu": "\u901a\u4fe1\u670d\u52a1", "count": 3}, {"indu": "\u4fdd\u9669", "count": 3}, {"indu": "\u917f\u9152\u884c\u4e1a", "count": 2}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "count": 2}, {"indu": "\u591a\u5143\u91d1\u878d", "count": 2}, {"indu": "\u4e92\u8054\u7f51\u670d\u52a1", "count": 2}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "count": 2}, {"indu": "\u73bb\u7483\u73bb\u7ea4", "count": 2}, {"indu": "\u8d38\u6613\u884c\u4e1a", "count": 2}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "count": 2}, {"indu": "\u94c1\u8def\u516c\u8def", "count": 2}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "count": 1}, {"indu": "\u4ea4\u8fd0\u8bbe\u5907", "count": 1}, {"indu": "\u88c5\u4fee\u5efa\u6750", "count": 1}, {"indu": "\u5bb6\u7528\u8f7b\u5de5", "count": 1}, {"indu": "\u822a\u5929\u822a\u7a7a", "count": 1}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "count": 1}, {"indu": "\u516c\u7528\u4e8b\u4e1a", "count": 1}, {"indu": "\u519c\u836f\u517d\u836f", "count": 1}, {"indu": "\u5316\u5b66\u5236\u836f", "count": 1}, {"indu": "\u6d88\u8d39\u7535\u5b50", "count": 1}, {"indu": "\u7f8e\u5bb9\u62a4\u7406", "count": 1}, {"indu": "\u5316\u5b66\u5236\u54c1", "count": 1}, {"indu": "\u5851\u6599\u5236\u54c1", "count": 1}, {"indu": "\u71c3\u6c14", "count": 1}, {"indu": "\u7269\u6d41\u884c\u4e1a", "count": 1}, {"indu": "\u5305\u88c5\u6750\u6599", "count": 1}, {"indu": "\u98df\u54c1\u996e\u6599", "count": 1}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>这个方面重复性就很高了。</p></li>
<li><p>说明行业是充分分散化的，一个行业很难保持永远增长。</p></li>
<li><p>但实际上有两个行业是保持了期间内一直正增长。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;mostn_byear_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-29685d8561e941d3b59887fa7adf1487.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-29685d8561e941d3b59887fa7adf1487.vega-embed details,
  #altair-viz-29685d8561e941d3b59887fa7adf1487.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-29685d8561e941d3b59887fa7adf1487"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-29685d8561e941d3b59887fa7adf1487") {
      outputDiv = document.getElementById("altair-viz-29685d8561e941d3b59887fa7adf1487");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2011", "width": 180}, {"data": {"name": "data-1cfaf659e8776046e1dce16f0077deee"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2012", "width": 180}, {"data": {"name": "data-378abb540b4bfcd67f607729a4f9cf99"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2013", "width": 180}]}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2014", "width": 180}, {"data": {"name": "data-25fcdc38842d59b858df21f13dfbec89"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2015", "width": 180}, {"data": {"name": "data-4795cc49f5c552b59c387c6f414009b4"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2016", "width": 180}], "data": {"name": "data-88183a5ec58cb4612293100e89671ce8"}}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2017", "width": 180}, {"data": {"name": "data-a5faeb3a7f127e5b1ca3aae7d7dc56ae"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2018", "width": 180}, {"data": {"name": "data-d92931ca468abf04f8bb829afaf3ff27"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2019", "width": 180}], "data": {"name": "data-aea18e0cc85c8e503fde8d68e4cb8d7c"}}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2020", "width": 180}, {"data": {"name": "data-d24e4fb7c301c03ab1940e6697e29a13"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2021", "width": 180}, {"data": {"name": "data-e9c79c6f04000ed9b48b6f7e3c3bdfe0"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [0, 4.262650595060681]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2022", "width": 180}], "data": {"name": "data-5e92992b732b3fff17207b1b2fc1a062"}}], "data": {"name": "data-6a5ca6fe7e6d957d29d4b42a9f20578c"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-6a5ca6fe7e6d957d29d4b42a9f20578c": [{"year": "2011", "indu": "\u901a\u4fe1\u670d\u52a1", "inc": 2.092776010209171}, {"year": "2011", "indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "inc": 1.0301399611880857}, {"year": "2011", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "inc": 0.832081881506572}, {"year": "2011", "indu": "\u4e13\u4e1a\u670d\u52a1", "inc": 0.7462110227047536}, {"year": "2011", "indu": "\u6d88\u8d39\u7535\u5b50", "inc": 0.5874479044483178}, {"year": "2011", "indu": "\u73e0\u5b9d\u9996\u9970", "inc": 0.575480293471288}, {"year": "2011", "indu": "\u6587\u5316\u4f20\u5a92", "inc": 0.5288590026602684}, {"year": "2011", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": 0.4901068623930578}, {"year": "2011", "indu": "\u7535\u6c60", "inc": 0.46774052498156904}, {"year": "2011", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": 0.44711923699609735}], "data-1cfaf659e8776046e1dce16f0077deee": [{"year": "2012", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": 1.9130933708688374}, {"year": "2012", "indu": "\u533b\u7597\u670d\u52a1", "inc": 0.8162020397434776}, {"year": "2012", "indu": "\u7f8e\u5bb9\u62a4\u7406", "inc": 0.6040323465785642}, {"year": "2012", "indu": "\u534a\u5bfc\u4f53", "inc": 0.4675600549551612}, {"year": "2012", "indu": "\u7535\u529b\u884c\u4e1a", "inc": 0.4023511863013471}, {"year": "2012", "indu": "\u73af\u4fdd\u884c\u4e1a", "inc": 0.3990815081783454}, {"year": "2012", "indu": "\u917f\u9152\u884c\u4e1a", "inc": 0.35456035099135497}, {"year": "2012", "indu": "\u591a\u5143\u91d1\u878d", "inc": 0.2976762588358341}, {"year": "2012", "indu": "\u4e13\u4e1a\u670d\u52a1", "inc": 0.24225569868426988}, {"year": "2012", "indu": "\u751f\u7269\u5236\u54c1", "inc": 0.23148072294387279}], "data-378abb540b4bfcd67f607729a4f9cf99": [{"year": "2013", "indu": "\u901a\u4fe1\u8bbe\u5907", "inc": 0.9224504153396239}, {"year": "2013", "indu": "\u9020\u7eb8\u5370\u5237", "inc": 0.7250507517495924}, {"year": "2013", "indu": "\u73bb\u7483\u73bb\u7ea4", "inc": 0.6285892585667757}, {"year": "2013", "indu": "\u8d38\u6613\u884c\u4e1a", "inc": 0.6126934530965814}, {"year": "2013", "indu": "\u98df\u54c1\u996e\u6599", "inc": 0.5622843161573152}, {"year": "2013", "indu": "\u4fdd\u9669", "inc": 0.5302551930472453}, {"year": "2013", "indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "inc": 0.5274912056806887}, {"year": "2013", "indu": "\u519c\u836f\u517d\u836f", "inc": 0.4900643778145527}, {"year": "2013", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": 0.426072872004424}, {"year": "2013", "indu": "\u71c3\u6c14", "inc": 0.35448228790257674}], "data-88183a5ec58cb4612293100e89671ce8": [{"year": "2014", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": 3.3677233621281113}, {"year": "2014", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": 0.9470420354380711}, {"year": "2014", "indu": "\u5316\u5b66\u539f\u6599", "inc": 0.768368188418821}, {"year": "2014", "indu": "\u8bc1\u5238", "inc": 0.7423247879379484}, {"year": "2014", "indu": "\u4ea4\u8fd0\u8bbe\u5907", "inc": 0.6847795639256337}, {"year": "2014", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": 0.6065814319560275}, {"year": "2014", "indu": "\u5305\u88c5\u6750\u6599", "inc": 0.49902886593772977}, {"year": "2014", "indu": "\u5316\u5b66\u5236\u54c1", "inc": 0.46945884342790895}, {"year": "2014", "indu": "\u4fdd\u9669", "inc": 0.42625312687738565}, {"year": "2014", "indu": "\u533b\u7597\u5668\u68b0", "inc": 0.42193574442345627}], "data-25fcdc38842d59b858df21f13dfbec89": [{"year": "2015", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": 2.633710271669452}, {"year": "2015", "indu": "\u6d88\u8d39\u7535\u5b50", "inc": 1.060644304246298}, {"year": "2015", "indu": "\u7535\u6c60", "inc": 1.0364500454863796}, {"year": "2015", "indu": "\u8bc1\u5238", "inc": 0.9024968659849394}, {"year": "2015", "indu": "\u591a\u5143\u91d1\u878d", "inc": 0.7753997630222461}, {"year": "2015", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": 0.4969172504904168}, {"year": "2015", "indu": "\u7f8e\u5bb9\u62a4\u7406", "inc": 0.4966196485240928}, {"year": "2015", "indu": "\u533b\u7597\u670d\u52a1", "inc": 0.4398399657520051}, {"year": "2015", "indu": "\u4e13\u7528\u8bbe\u5907", "inc": 0.43595321659735914}, {"year": "2015", "indu": "\u4e92\u8054\u7f51\u670d\u52a1", "inc": 0.4305515370218327}], "data-4795cc49f5c552b59c387c6f414009b4": [{"year": "2016", "indu": "\u8d38\u6613\u884c\u4e1a", "inc": 2.8777032771690183}, {"year": "2016", "indu": "\u6a61\u80f6\u5236\u54c1", "inc": 0.7797055277062162}, {"year": "2016", "indu": "\u533b\u7597\u670d\u52a1", "inc": 0.7595361406285827}, {"year": "2016", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": 0.7030853265470343}, {"year": "2016", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": 0.6955560697784353}, {"year": "2016", "indu": "\u9020\u7eb8\u5370\u5237", "inc": 0.6867199294069588}, {"year": "2016", "indu": "\u7535\u6c60", "inc": 0.5506532971086073}, {"year": "2016", "indu": "\u5316\u5b66\u539f\u6599", "inc": 0.5308995357962394}, {"year": "2016", "indu": "\u73bb\u7483\u73bb\u7ea4", "inc": 0.4598834789042105}, {"year": "2016", "indu": "\u8ba1\u7b97\u673a\u8bbe\u5907", "inc": 0.4160383425066414}], "data-aea18e0cc85c8e503fde8d68e4cb8d7c": [{"year": "2017", "indu": "\u4e13\u7528\u8bbe\u5907", "inc": 1.5675126629812555}, {"year": "2017", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": 1.1224797058920495}, {"year": "2017", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": 0.9817000280948355}, {"year": "2017", "indu": "\u5316\u5b66\u539f\u6599", "inc": 0.8128724506626798}, {"year": "2017", "indu": "\u4e13\u4e1a\u670d\u52a1", "inc": 0.7535804274217678}, {"year": "2017", "indu": "\u73e0\u5b9d\u9996\u9970", "inc": 0.752592856405643}, {"year": "2017", "indu": "\u9020\u7eb8\u5370\u5237", "inc": 0.7204070220137389}, {"year": "2017", "indu": "\u901a\u7528\u8bbe\u5907", "inc": 0.627822852617695}, {"year": "2017", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": 0.6166842406779238}, {"year": "2017", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": 0.6124529462896936}], "data-a5faeb3a7f127e5b1ca3aae7d7dc56ae": [{"year": "2018", "indu": "\u901a\u4fe1\u670d\u52a1", "inc": 1.8799318279097927}, {"year": "2018", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": 0.7524419634875591}, {"year": "2018", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": 0.6539527173623043}, {"year": "2018", "indu": "\u5316\u5b66\u539f\u6599", "inc": 0.4778262341423537}, {"year": "2018", "indu": "\u6a61\u80f6\u5236\u54c1", "inc": 0.46013390198982024}, {"year": "2018", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": 0.41211324342317396}, {"year": "2018", "indu": "\u7efc\u5408\u884c\u4e1a", "inc": 0.39552305466048376}, {"year": "2018", "indu": "\u533b\u7597\u670d\u52a1", "inc": 0.3782337418018733}, {"year": "2018", "indu": "\u533b\u7597\u5668\u68b0", "inc": 0.28882062544158543}, {"year": "2018", "indu": "\u917f\u9152\u884c\u4e1a", "inc": 0.27227294429835003}], "data-d92931ca468abf04f8bb829afaf3ff27": [{"year": "2019", "indu": "\u4e92\u8054\u7f51\u670d\u52a1", "inc": 0.8429997670144617}, {"year": "2019", "indu": "\u4eea\u5668\u4eea\u8868", "inc": 0.7267282957102278}, {"year": "2019", "indu": "\u534a\u5bfc\u4f53", "inc": 0.6654938173911389}, {"year": "2019", "indu": "\u4e13\u7528\u8bbe\u5907", "inc": 0.6489049326176844}, {"year": "2019", "indu": "\u5bb6\u7528\u8f7b\u5de5", "inc": 0.568758019620023}, {"year": "2019", "indu": "\u8bc1\u5238", "inc": 0.5535553480643973}, {"year": "2019", "indu": "\u7535\u6c60", "inc": 0.5454521485226487}, {"year": "2019", "indu": "\u4fdd\u9669", "inc": 0.5416042718984319}, {"year": "2019", "indu": "\u6d88\u8d39\u7535\u5b50", "inc": 0.5142771803263476}, {"year": "2019", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": 0.5105673002462492}], "data-5e92992b732b3fff17207b1b2fc1a062": [{"year": "2020", "indu": "\u533b\u7597\u670d\u52a1", "inc": 2.594985500129778}, {"year": "2020", "indu": "\u901a\u7528\u8bbe\u5907", "inc": 2.1037982413799368}, {"year": "2020", "indu": "\u751f\u7269\u5236\u54c1", "inc": 1.3511950580821885}, {"year": "2020", "indu": "\u8d35\u91d1\u5c5e", "inc": 1.2576995660301433}, {"year": "2020", "indu": "\u533b\u7597\u5668\u68b0", "inc": 1.023636257421362}, {"year": "2020", "indu": "\u534a\u5bfc\u4f53", "inc": 0.8384602303045453}, {"year": "2020", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": 0.7949683800494123}, {"year": "2020", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": 0.713531845833726}, {"year": "2020", "indu": "\u4e92\u8054\u7f51\u670d\u52a1", "inc": 0.63515190103396}, {"year": "2020", "indu": "\u822a\u5929\u822a\u7a7a", "inc": 0.607431472762646}], "data-d24e4fb7c301c03ab1940e6697e29a13": [{"year": "2021", "indu": "\u6587\u5316\u4f20\u5a92", "inc": 4.059667233391124}, {"year": "2021", "indu": "\u65c5\u6e38\u9152\u5e97", "inc": 2.6734015257724515}, {"year": "2021", "indu": "\u7efc\u5408\u884c\u4e1a", "inc": 2.249159204080015}, {"year": "2021", "indu": "\u751f\u7269\u5236\u54c1", "inc": 1.8349656714458538}, {"year": "2021", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": 1.2838065476939335}, {"year": "2021", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": 1.2253386362102792}, {"year": "2021", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": 1.1195347446161896}, {"year": "2021", "indu": "\u73e0\u5b9d\u9996\u9970", "inc": 0.9950232380100748}, {"year": "2021", "indu": "\u5316\u5b66\u539f\u6599", "inc": 0.9775018046101301}, {"year": "2021", "indu": "\u534a\u5bfc\u4f53", "inc": 0.9082684804027676}], "data-e9c79c6f04000ed9b48b6f7e3c3bdfe0": [{"year": "2022", "indu": "\u519c\u836f\u517d\u836f", "inc": 0.5651470344279774}, {"year": "2022", "indu": "\u7535\u529b\u884c\u4e1a", "inc": 0.5538599187313881}, {"year": "2022", "indu": "\u7535\u6c60", "inc": 0.5489387686405603}, {"year": "2022", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": 0.4137278268873037}, {"year": "2022", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": 0.3451141913408524}, {"year": "2022", "indu": "\u533b\u7597\u670d\u52a1", "inc": 0.33918916505980645}, {"year": "2022", "indu": "\u901a\u4fe1\u8bbe\u5907", "inc": 0.2994121667718188}, {"year": "2022", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "inc": 0.2789209661167533}, {"year": "2022", "indu": "\u8d35\u91d1\u5c5e", "inc": 0.26402661972609237}, {"year": "2022", "indu": "\u4e13\u4e1a\u670d\u52a1", "inc": 0.2409389750206124}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_inc_mostn</span><span class="p">[</span><span class="s1">&#39;mostn_byear_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-80835b707acb48a28817460f502099ca.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-80835b707acb48a28817460f502099ca.vega-embed details,
  #altair-viz-80835b707acb48a28817460f502099ca.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-80835b707acb48a28817460f502099ca"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-80835b707acb48a28817460f502099ca") {
      outputDiv = document.getElementById("altair-viz-80835b707acb48a28817460f502099ca");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2011", "width": 180}, {"data": {"name": "data-a50c7b95a4911784d6c37214b81d3f6f"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2012", "width": 180}, {"data": {"name": "data-7088bc7b05e37b8ec4834ef5fe5c80ac"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2013", "width": 180}]}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2014", "width": 180}, {"data": {"name": "data-f6c8423c8fb9f0be89d4aefcd2e5261b"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2015", "width": 180}, {"data": {"name": "data-919d6e7bd3602a6822c545a84beaf217"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2016", "width": 180}], "data": {"name": "data-478f5fb85e35de800840a84709326733"}}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2017", "width": 180}, {"data": {"name": "data-276600c7a5a904b392302dfec8b75994"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2018", "width": 180}, {"data": {"name": "data-c346bbc918fff40be0777f72ab4eaf3e"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2019", "width": 180}], "data": {"name": "data-bbdb712ad531eda53a45949057be54b7"}}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2020", "width": 180}, {"data": {"name": "data-5f47537e4b2a7347aefdd746e6a8d81d"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2021", "width": 180}, {"data": {"name": "data-69d0d9acf8a4caa5d8490ad3215ef973"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "inc", "scale": {"domain": [-4.181387547376162, 0.028779547444558545]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2022", "width": 180}], "data": {"name": "data-d828bd5689080fc1fdfdfc299c61501d"}}], "data": {"name": "data-37e6a0322d20c4429f2dfd093488b46f"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-37e6a0322d20c4429f2dfd093488b46f": [{"year": "2011", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": -3.9822738546439638}, {"year": "2011", "indu": "\u533b\u7597\u670d\u52a1", "inc": -0.8318308881762011}, {"year": "2011", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": -0.7777823176784284}, {"year": "2011", "indu": "\u9020\u7eb8\u5370\u5237", "inc": -0.4200112756822933}, {"year": "2011", "indu": "\u8bc1\u5238", "inc": -0.3975261019579781}, {"year": "2011", "indu": "\u4fdd\u9669", "inc": -0.3232974016126276}, {"year": "2011", "indu": "\u901a\u4fe1\u8bbe\u5907", "inc": -0.20860784746157293}, {"year": "2011", "indu": "\u73bb\u7483\u73bb\u7ea4", "inc": -0.20270699628493286}, {"year": "2011", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": -0.1626314362580527}, {"year": "2011", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": -0.09066123393357566}], "data-a50c7b95a4911784d6c37214b81d3f6f": [{"year": "2012", "indu": "\u901a\u4fe1\u670d\u52a1", "inc": -2.0144928058031244}, {"year": "2012", "indu": "\u8d38\u6613\u884c\u4e1a", "inc": -0.9231551525687186}, {"year": "2012", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": -0.7908603247464977}, {"year": "2012", "indu": "\u901a\u4fe1\u8bbe\u5907", "inc": -0.741213609417503}, {"year": "2012", "indu": "\u73bb\u7483\u73bb\u7ea4", "inc": -0.6667219298223721}, {"year": "2012", "indu": "\u9020\u7eb8\u5370\u5237", "inc": -0.6413661547337784}, {"year": "2012", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": -0.6288103583034341}, {"year": "2012", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": -0.5869564610133637}, {"year": "2012", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": -0.5597902665278376}, {"year": "2012", "indu": "\u5316\u5b66\u539f\u6599", "inc": -0.508935702797064}], "data-7088bc7b05e37b8ec4834ef5fe5c80ac": [{"year": "2013", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": -1.365853195230937}, {"year": "2013", "indu": "\u8d35\u91d1\u5c5e", "inc": -0.7164861188073492}, {"year": "2013", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": -0.5450114397446628}, {"year": "2013", "indu": "\u5316\u5b66\u539f\u6599", "inc": -0.5292264205111186}, {"year": "2013", "indu": "\u65c5\u6e38\u9152\u5e97", "inc": -0.14917075906429714}, {"year": "2013", "indu": "\u7535\u6c60", "inc": -0.1222940711001929}, {"year": "2013", "indu": "\u917f\u9152\u884c\u4e1a", "inc": -0.1170400992634232}, {"year": "2013", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": -0.0522342698883457}, {"year": "2013", "indu": "\u5305\u88c5\u6750\u6599", "inc": -0.0395144831523157}, {"year": "2013", "indu": "\u94c1\u8def\u516c\u8def", "inc": 0.0047130740532580345}], "data-478f5fb85e35de800840a84709326733": [{"year": "2014", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": -1.646559453861492}, {"year": "2014", "indu": "\u4e13\u7528\u8bbe\u5907", "inc": -0.345138328697589}, {"year": "2014", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": -0.2558550123253883}, {"year": "2014", "indu": "\u8d35\u91d1\u5c5e", "inc": -0.24421342348455838}, {"year": "2014", "indu": "\u917f\u9152\u884c\u4e1a", "inc": -0.15108539411001282}, {"year": "2014", "indu": "\u7535\u6c60", "inc": -0.0833988293823128}, {"year": "2014", "indu": "\u7269\u6d41\u884c\u4e1a", "inc": -0.061175246826910536}, {"year": "2014", "indu": "\u71c3\u6c14", "inc": 0.020463383369211666}, {"year": "2014", "indu": "\u516c\u7528\u4e8b\u4e1a", "inc": 0.02232177266954242}, {"year": "2014", "indu": "\u5851\u6599\u5236\u54c1", "inc": 0.02740909280434147}], "data-f6c8423c8fb9f0be89d4aefcd2e5261b": [{"year": "2015", "indu": "\u8d38\u6613\u884c\u4e1a", "inc": -2.588899840514421}, {"year": "2015", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": -0.9755877438187113}, {"year": "2015", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": -0.7511781362864469}, {"year": "2015", "indu": "\u6a61\u80f6\u5236\u54c1", "inc": -0.7222412195041442}, {"year": "2015", "indu": "\u901a\u7528\u8bbe\u5907", "inc": -0.25669760792212076}, {"year": "2015", "indu": "\u8d35\u91d1\u5c5e", "inc": -0.23536918496778228}, {"year": "2015", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": -0.14891700560985466}, {"year": "2015", "indu": "\u7efc\u5408\u884c\u4e1a", "inc": -0.12619610927469607}, {"year": "2015", "indu": "\u5316\u5b66\u539f\u6599", "inc": -0.08466409875566576}, {"year": "2015", "indu": "\u5316\u5b66\u5236\u54c1", "inc": -0.07913584206838788}], "data-919d6e7bd3602a6822c545a84beaf217": [{"year": "2016", "indu": "\u4e13\u7528\u8bbe\u5907", "inc": -1.1321962044597667}, {"year": "2016", "indu": "\u8bc1\u5238", "inc": -0.6606215540819885}, {"year": "2016", "indu": "\u822a\u8fd0\u6e2f\u53e3", "inc": -0.4976235223092062}, {"year": "2016", "indu": "\u901a\u4fe1\u8bbe\u5907", "inc": -0.3882673506825065}, {"year": "2016", "indu": "\u7f8e\u5bb9\u62a4\u7406", "inc": -0.3109985166217968}, {"year": "2016", "indu": "\u901a\u4fe1\u670d\u52a1", "inc": -0.1996252785935363}, {"year": "2016", "indu": "\u901a\u7528\u8bbe\u5907", "inc": -0.18367083300697407}, {"year": "2016", "indu": "\u4fdd\u9669", "inc": -0.16097723681686754}, {"year": "2016", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": -0.13579611263244215}, {"year": "2016", "indu": "\u7535\u529b\u884c\u4e1a", "inc": -0.09425989871336293}], "data-bbdb712ad531eda53a45949057be54b7": [{"year": "2017", "indu": "\u7535\u529b\u884c\u4e1a", "inc": -0.18347565829916904}, {"year": "2017", "indu": "\u6a61\u80f6\u5236\u54c1", "inc": -0.15338302155862443}, {"year": "2017", "indu": "\u98ce\u7535\u8bbe\u5907", "inc": -0.12267156931506049}, {"year": "2017", "indu": "\u7535\u6c60", "inc": -0.1180777413655452}, {"year": "2017", "indu": "\u901a\u4fe1\u670d\u52a1", "inc": -0.05421956248351728}, {"year": "2017", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": -0.04523453665443609}, {"year": "2017", "indu": "\u8bc1\u5238", "inc": -0.033858141381342306}, {"year": "2017", "indu": "\u6c7d\u8f66\u6574\u8f66", "inc": -0.025342977518798035}, {"year": "2017", "indu": "\u7efc\u5408\u884c\u4e1a", "inc": -0.01753918284045343}, {"year": "2017", "indu": "\u533b\u7597\u670d\u52a1", "inc": -0.005653816633490391}], "data-276600c7a5a904b392302dfec8b75994": [{"year": "2018", "indu": "\u4e92\u8054\u7f51\u670d\u52a1", "inc": -1.4792511392021936}, {"year": "2018", "indu": "\u751f\u7269\u5236\u54c1", "inc": -1.3026327270173046}, {"year": "2018", "indu": "\u6587\u5316\u4f20\u5a92", "inc": -1.0048051301956746}, {"year": "2018", "indu": "\u4e13\u7528\u8bbe\u5907", "inc": -0.7224315323761978}, {"year": "2018", "indu": "\u901a\u4fe1\u8bbe\u5907", "inc": -0.532234545714007}, {"year": "2018", "indu": "\u8bc1\u5238", "inc": -0.511559240744157}, {"year": "2018", "indu": "\u6d88\u8d39\u7535\u5b50", "inc": -0.4118796422319918}, {"year": "2018", "indu": "\u5316\u5b66\u5236\u836f", "inc": -0.3283705216540931}, {"year": "2018", "indu": "\u901a\u7528\u8bbe\u5907", "inc": -0.3116434816669638}, {"year": "2018", "indu": "\u73e0\u5b9d\u9996\u9970", "inc": -0.3066896719749013}], "data-c346bbc918fff40be0777f72ab4eaf3e": [{"year": "2019", "indu": "\u533b\u7597\u670d\u52a1", "inc": -2.1222259993721293}, {"year": "2019", "indu": "\u901a\u7528\u8bbe\u5907", "inc": -1.3431956181750349}, {"year": "2019", "indu": "\u751f\u7269\u5236\u54c1", "inc": -1.080309555965696}, {"year": "2019", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": -0.7191097828623498}, {"year": "2019", "indu": "\u6c7d\u8f66\u6574\u8f66", "inc": -0.6932943267045132}, {"year": "2019", "indu": "\u8d35\u91d1\u5c5e", "inc": -0.6432032955260811}, {"year": "2019", "indu": "\u519c\u836f\u517d\u836f", "inc": -0.5624355465376409}, {"year": "2019", "indu": "\u822a\u5929\u822a\u7a7a", "inc": -0.47378660624896435}, {"year": "2019", "indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "inc": -0.43284812449761273}, {"year": "2019", "indu": "\u7535\u7f51\u8bbe\u5907", "inc": -0.3715843339686413}], "data-d828bd5689080fc1fdfdfc299c61501d": [{"year": "2020", "indu": "\u6587\u5316\u4f20\u5a92", "inc": -3.1691777730163038}, {"year": "2020", "indu": "\u65c5\u6e38\u9152\u5e97", "inc": -2.9955395050889972}, {"year": "2020", "indu": "\u7efc\u5408\u884c\u4e1a", "inc": -2.5659778750152578}, {"year": "2020", "indu": "\u591a\u5143\u91d1\u878d", "inc": -0.9809990166305205}, {"year": "2020", "indu": "\u77f3\u6cb9\u884c\u4e1a", "inc": -0.7722395879147342}, {"year": "2020", "indu": "\u94c1\u8def\u516c\u8def", "inc": -0.4857845729906209}, {"year": "2020", "indu": "\u73e0\u5b9d\u9996\u9970", "inc": -0.4309236643724728}, {"year": "2020", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "inc": -0.23242567922879565}, {"year": "2020", "indu": "\u7eba\u7ec7\u670d\u88c5", "inc": -0.1633253432752573}, {"year": "2020", "indu": "\u975e\u91d1\u5c5e\u6750\u6599", "inc": -0.1582665470432203}], "data-5f47537e4b2a7347aefdd746e6a8d81d": [{"year": "2021", "indu": "\u7535\u529b\u884c\u4e1a", "inc": -0.9875522799087344}, {"year": "2021", "indu": "\u6a61\u80f6\u5236\u54c1", "inc": -0.3959128967217008}, {"year": "2021", "indu": "\u88c5\u4fee\u5efa\u6750", "inc": -0.3217046060858075}, {"year": "2021", "indu": "\u4fdd\u9669", "inc": -0.15638328866728843}, {"year": "2021", "indu": "\u5bb6\u7528\u8f7b\u5de5", "inc": -0.13810115213240134}, {"year": "2021", "indu": "\u73af\u4fdd\u884c\u4e1a", "inc": -0.1126193783411259}, {"year": "2021", "indu": "\u4ea4\u8fd0\u8bbe\u5907", "inc": -0.10157367554612283}, {"year": "2021", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": -0.08265397818292207}, {"year": "2021", "indu": "\u98df\u54c1\u996e\u6599", "inc": -0.053583697803315525}, {"year": "2021", "indu": "\u4e92\u8054\u7f51\u670d\u52a1", "inc": -0.04397547195458938}], "data-69d0d9acf8a4caa5d8490ad3215ef973": [{"year": "2022", "indu": "\u65c5\u6e38\u9152\u5e97", "inc": -3.067673220497637}, {"year": "2022", "indu": "\u751f\u7269\u5236\u54c1", "inc": -2.3087474057125332}, {"year": "2022", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "inc": -1.5182334792452155}, {"year": "2022", "indu": "\u5316\u7ea4\u884c\u4e1a", "inc": -1.5151191240564372}, {"year": "2022", "indu": "\u6587\u5316\u4f20\u5a92", "inc": -1.3339573749790041}, {"year": "2022", "indu": "\u73af\u4fdd\u884c\u4e1a", "inc": -1.0992057321722442}, {"year": "2022", "indu": "\u591a\u5143\u91d1\u878d", "inc": -1.024030496759544}, {"year": "2022", "indu": "\u6c34\u6ce5\u5efa\u6750", "inc": -0.9371121260861381}, {"year": "2022", "indu": "\u9020\u7eb8\u5370\u5237", "inc": -0.8714126436912735}, {"year": "2022", "indu": "\u73e0\u5b9d\u9996\u9970", "inc": -0.7089996858937142}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>2017年和2021年，看起来象是黄金时代。</p></li>
<li><p>2022年无疑是最惨的一年。</p></li>
</ul>
</section>
<section id="id5">
<h2>行业利润增长波动<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>去除了出现亏损的行业。</p></li>
<li><p>有的值是总和，只有排名上的意义。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_sha</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">get_shapee</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">indudf</span><span class="p">)</span>
<span class="n">indus_sha</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">mostn</span><span class="p">(</span><span class="n">indu_sha</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_sha</span><span class="p">[</span><span class="s1">&#39;mostn_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-efec34fdc1a7484ca26fbb795ff666a3.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-efec34fdc1a7484ca26fbb795ff666a3.vega-embed details,
  #altair-viz-efec34fdc1a7484ca26fbb795ff666a3.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-efec34fdc1a7484ca26fbb795ff666a3"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-efec34fdc1a7484ca26fbb795ff666a3") {
      outputDiv = document.getElementById("altair-viz-efec34fdc1a7484ca26fbb795ff666a3");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-7f56db4004f26ff5a2aee1251feb4283"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "shapee", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "shapee", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "indu\u603bshapee\u524d10", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-7f56db4004f26ff5a2aee1251feb4283": [{"indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 20.448956366684495}, {"indu": "\u917f\u9152\u884c\u4e1a", "shapee": 17.182835944707765}, {"indu": "\u94f6\u884c", "shapee": 13.853426916799126}, {"indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 10.377264786198936}, {"indu": "\u7535\u6c60", "shapee": 9.831363176194234}, {"indu": "\u533b\u7597\u5668\u68b0", "shapee": 9.646286899713932}, {"indu": "\u71c3\u6c14", "shapee": 9.645617891320823}, {"indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 8.389598075944196}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 7.7943957425408055}, {"indu": "\u98df\u54c1\u996e\u6599", "shapee": 7.408496910557466}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_sha</span><span class="p">[</span><span class="s1">&#39;mostn_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-ae221ca5b2574562aa69ad21dc228ab0.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-ae221ca5b2574562aa69ad21dc228ab0.vega-embed details,
  #altair-viz-ae221ca5b2574562aa69ad21dc228ab0.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-ae221ca5b2574562aa69ad21dc228ab0"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-ae221ca5b2574562aa69ad21dc228ab0") {
      outputDiv = document.getElementById("altair-viz-ae221ca5b2574562aa69ad21dc228ab0");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-f73c5d6fc7dcdd4c88d082112e8bf200"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "shapee", "type": "quantitative"}], "x": {"axis": {"format": ".0s"}, "field": "shapee", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "indu\u603bshapee\u540e\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-f73c5d6fc7dcdd4c88d082112e8bf200": [{"indu": "\u591a\u5143\u91d1\u878d", "shapee": -2.662896394425214}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -2.2949107226413767}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -1.6960918399597538}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -1.671367928072452}, {"indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -1.60356770138798}, {"indu": "\u5305\u88c5\u6750\u6599", "shapee": -1.1289841200779236}, {"indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.7609546837551533}, {"indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.5754347861277378}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": -0.5018441204301931}, {"indu": "\u7efc\u5408\u884c\u4e1a", "shapee": -0.3022295173930406}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>这个应该有比较强的参考性。</p></li>
<li><p>环保行业很奇怪。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_sha</span><span class="p">[</span><span class="s1">&#39;mostn_count_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-e0fe580b368840f18f647ec27578a62c.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e0fe580b368840f18f647ec27578a62c.vega-embed details,
  #altair-viz-e0fe580b368840f18f647ec27578a62c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e0fe580b368840f18f647ec27578a62c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e0fe580b368840f18f647ec27578a62c") {
      outputDiv = document.getElementById("altair-viz-e0fe580b368840f18f647ec27578a62c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-97266fd5449eb48d8c0a71631cf81b77"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "count", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 386, "title": "indu\u524d10\u4e0a\u699c\u6b21\u6570\u7edf\u8ba1[17\u4e2a]", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-97266fd5449eb48d8c0a71631cf81b77": [{"indu": "\u71c3\u6c14", "count": 9}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "count": 9}, {"indu": "\u94f6\u884c", "count": 9}, {"indu": "\u533b\u7597\u5668\u68b0", "count": 8}, {"indu": "\u7535\u5b50\u5143\u4ef6", "count": 8}, {"indu": "\u7535\u6c60", "count": 8}, {"indu": "\u98df\u54c1\u996e\u6599", "count": 6}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "count": 6}, {"indu": "\u917f\u9152\u884c\u4e1a", "count": 6}, {"indu": "\u5bb6\u7535\u884c\u4e1a", "count": 5}, {"indu": "\u73bb\u7483\u73bb\u7ea4", "count": 5}, {"indu": "\u534a\u5bfc\u4f53", "count": 4}, {"indu": "\u533b\u836f\u5546\u4e1a", "count": 2}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "count": 2}, {"indu": "\u901a\u4fe1\u8bbe\u5907", "count": 1}, {"indu": "\u4e13\u7528\u8bbe\u5907", "count": 1}, {"indu": "\u5316\u5b66\u5236\u836f", "count": 1}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_sha</span><span class="p">[</span><span class="s1">&#39;mostn_count_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-b6e22b2e7bb54f3a9e3b73bfec41cfc8.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b6e22b2e7bb54f3a9e3b73bfec41cfc8.vega-embed details,
  #altair-viz-b6e22b2e7bb54f3a9e3b73bfec41cfc8.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b6e22b2e7bb54f3a9e3b73bfec41cfc8"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b6e22b2e7bb54f3a9e3b73bfec41cfc8") {
      outputDiv = document.getElementById("altair-viz-b6e22b2e7bb54f3a9e3b73bfec41cfc8");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-b7a411cd142653a2bc8e306ff478664a"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "count", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 422, "title": "indu\u540e10\u4e0a\u699c\u6b21\u6570\u7edf\u8ba1[19\u4e2a]", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-b7a411cd142653a2bc8e306ff478664a": [{"indu": "\u65c5\u6e38\u9152\u5e97", "count": 9}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "count": 9}, {"indu": "\u591a\u5143\u91d1\u878d", "count": 9}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "count": 9}, {"indu": "\u751f\u7269\u5236\u54c1", "count": 8}, {"indu": "\u5305\u88c5\u6750\u6599", "count": 8}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "count": 7}, {"indu": "\u6587\u5316\u4f20\u5a92", "count": 7}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "count": 6}, {"indu": "\u7efc\u5408\u884c\u4e1a", "count": 5}, {"indu": "\u6c34\u6ce5\u5efa\u6750", "count": 2}, {"indu": "\u7535\u529b\u884c\u4e1a", "count": 2}, {"indu": "\u9020\u7eb8\u5370\u5237", "count": 2}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "count": 2}, {"indu": "\u5316\u7ea4\u884c\u4e1a", "count": 1}, {"indu": "\u901a\u4fe1\u670d\u52a1", "count": 1}, {"indu": "\u8bc1\u5238", "count": 1}, {"indu": "\u4e92\u8054\u7f51\u670d\u52a1", "count": 1}, {"indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "count": 1}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_sha</span><span class="p">[</span><span class="s1">&#39;mostn_byear_0&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-ee3ff7c6c7c948ccaeab44bd5c1e53eb.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-ee3ff7c6c7c948ccaeab44bd5c1e53eb.vega-embed details,
  #altair-viz-ee3ff7c6c7c948ccaeab44bd5c1e53eb.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-ee3ff7c6c7c948ccaeab44bd5c1e53eb"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-ee3ff7c6c7c948ccaeab44bd5c1e53eb") {
      outputDiv = document.getElementById("altair-viz-ee3ff7c6c7c948ccaeab44bd5c1e53eb");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2011", "width": 180}, {"data": {"name": "data-3874f70aac4828dd5a2461672d97a32c"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2012", "width": 180}, {"data": {"name": "data-ab1c1b6a0caba05a04594af56b64c3fc"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2013", "width": 180}]}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2014", "width": 180}, {"data": {"name": "data-e0f84eb4bb05d96db44eeb751a34042c"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2015", "width": 180}, {"data": {"name": "data-81e5dde05d85b785ad01e08b0e891691"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2016", "width": 180}], "data": {"name": "data-02c2f976179ca281c8e828f126db4bf5"}}, {"hconcat": [{"mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2017", "width": 180}, {"data": {"name": "data-fd8341515dc24e5659a49444c87cb4f8"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2018", "width": 180}, {"data": {"name": "data-37f6d7f0d84fc79c71aab774466c372d"}, "mark": {"type": "bar", "color": "cornflowerblue"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [0, 5.262666722036393]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 220, "title": "2019", "width": 180}], "data": {"name": "data-dd381aed248921f961e1010a3847f2d2"}}], "data": {"name": "data-3097646758c0fb5fc16e4cde56bde1f6"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-3097646758c0fb5fc16e4cde56bde1f6": [{"year": "2011", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 1.243111014379088}, {"year": "2011", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.232437440997237}, {"year": "2011", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 1.2096016097113642}, {"year": "2011", "indu": "\u94f6\u884c", "shapee": 1.2037235081940494}, {"year": "2011", "indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 1.1086589292353435}, {"year": "2011", "indu": "\u71c3\u6c14", "shapee": 1.1072902115599845}, {"year": "2011", "indu": "\u98df\u54c1\u996e\u6599", "shapee": 1.011234472768969}, {"year": "2011", "indu": "\u533b\u836f\u5546\u4e1a", "shapee": 0.9309417148344554}, {"year": "2011", "indu": "\u7535\u6c60", "shapee": 0.8766706373691193}, {"year": "2011", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 0.873703172129604}], "data-3874f70aac4828dd5a2461672d97a32c": [{"year": "2012", "indu": "\u94f6\u884c", "shapee": 1.5059646185957705}, {"year": "2012", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.1753218398375405}, {"year": "2012", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 1.1608098857464744}, {"year": "2012", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 1.1502687829998932}, {"year": "2012", "indu": "\u71c3\u6c14", "shapee": 1.0823972803893809}, {"year": "2012", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 1.0734701742045982}, {"year": "2012", "indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 1.034191771208269}, {"year": "2012", "indu": "\u98df\u54c1\u996e\u6599", "shapee": 0.9355075559318967}, {"year": "2012", "indu": "\u533b\u836f\u5546\u4e1a", "shapee": 0.8462610269010836}, {"year": "2012", "indu": "\u534a\u5bfc\u4f53", "shapee": 0.8387678490696593}], "data-ab1c1b6a0caba05a04594af56b64c3fc": [{"year": "2013", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 1.6666719348835797}, {"year": "2013", "indu": "\u94f6\u884c", "shapee": 1.6420236596079787}, {"year": "2013", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.4073888843677291}, {"year": "2013", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 1.1323963862183486}, {"year": "2013", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 1.0482521718043696}, {"year": "2013", "indu": "\u71c3\u6c14", "shapee": 1.0344565665485383}, {"year": "2013", "indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 0.9724539729692883}, {"year": "2013", "indu": "\u73bb\u7483\u73bb\u7ea4", "shapee": 0.9519268958975543}, {"year": "2013", "indu": "\u98df\u54c1\u996e\u6599", "shapee": 0.9480121955145056}, {"year": "2013", "indu": "\u7535\u6c60", "shapee": 0.8087493096161803}], "data-02c2f976179ca281c8e828f126db4bf5": [{"year": "2014", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 3.1187769451898495}, {"year": "2014", "indu": "\u94f6\u884c", "shapee": 1.643451000699828}, {"year": "2014", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.3538411708781712}, {"year": "2014", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 1.0961190950669275}, {"year": "2014", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 1.0921059820586454}, {"year": "2014", "indu": "\u98df\u54c1\u996e\u6599", "shapee": 1.0703107962717127}, {"year": "2014", "indu": "\u7535\u6c60", "shapee": 0.9539702325874394}, {"year": "2014", "indu": "\u917f\u9152\u884c\u4e1a", "shapee": 0.9430196667474624}, {"year": "2014", "indu": "\u71c3\u6c14", "shapee": 0.9419258916372175}, {"year": "2014", "indu": "\u73bb\u7483\u73bb\u7ea4", "shapee": 0.8905490233944976}], "data-e0f84eb4bb05d96db44eeb751a34042c": [{"year": "2015", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 2.920157357413688}, {"year": "2015", "indu": "\u917f\u9152\u884c\u4e1a", "shapee": 1.6757539698428086}, {"year": "2015", "indu": "\u94f6\u884c", "shapee": 1.5058428150554688}, {"year": "2015", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.2306266881352848}, {"year": "2015", "indu": "\u7535\u6c60", "shapee": 1.142846946337741}, {"year": "2015", "indu": "\u71c3\u6c14", "shapee": 1.0218853405444148}, {"year": "2015", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 0.9910323820375144}, {"year": "2015", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 0.9752969256447531}, {"year": "2015", "indu": "\u98df\u54c1\u996e\u6599", "shapee": 0.9525713370821276}, {"year": "2015", "indu": "\u73bb\u7483\u73bb\u7ea4", "shapee": 0.882389913715662}], "data-81e5dde05d85b785ad01e08b0e891691": [{"year": "2016", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 2.691470743552313}, {"year": "2016", "indu": "\u917f\u9152\u884c\u4e1a", "shapee": 1.8193734048945178}, {"year": "2016", "indu": "\u94f6\u884c", "shapee": 1.5936327142951987}, {"year": "2016", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.2085115273806397}, {"year": "2016", "indu": "\u7535\u6c60", "shapee": 1.0974879482105893}, {"year": "2016", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 1.0943173375187762}, {"year": "2016", "indu": "\u71c3\u6c14", "shapee": 0.8973939097812851}, {"year": "2016", "indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 0.8780706409526715}, {"year": "2016", "indu": "\u73bb\u7483\u73bb\u7ea4", "shapee": 0.8758656713052808}, {"year": "2016", "indu": "\u98df\u54c1\u996e\u6599", "shapee": 0.8708391132869803}], "data-dd381aed248921f961e1010a3847f2d2": [{"year": "2017", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 2.44276356618027}, {"year": "2017", "indu": "\u917f\u9152\u884c\u4e1a", "shapee": 2.315635454724027}, {"year": "2017", "indu": "\u94f6\u884c", "shapee": 1.7226511475740598}, {"year": "2017", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 1.1113528313243728}, {"year": "2017", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 1.0334713186399975}, {"year": "2017", "indu": "\u71c3\u6c14", "shapee": 0.9864775656638802}, {"year": "2017", "indu": "\u7535\u6c60", "shapee": 0.9436011599282704}, {"year": "2017", "indu": "\u534a\u5bfc\u4f53", "shapee": 0.8080534028597721}, {"year": "2017", "indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 0.7685037304119738}, {"year": "2017", "indu": "\u4e13\u4e1a\u670d\u52a1", "shapee": 0.7360809494595622}], "data-fd8341515dc24e5659a49444c87cb4f8": [{"year": "2018", "indu": "\u917f\u9152\u884c\u4e1a", "shapee": 3.044993656599595}, {"year": "2018", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 2.733145386678563}, {"year": "2018", "indu": "\u94f6\u884c", "shapee": 1.5955402033755934}, {"year": "2018", "indu": "\u7535\u6c60", "shapee": 1.3889222672759742}, {"year": "2018", "indu": "\u533b\u7597\u5668\u68b0", "shapee": 0.9879378970298963}, {"year": "2018", "indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 0.9248489190583908}, {"year": "2018", "indu": "\u71c3\u6c14", "shapee": 0.8653627490438248}, {"year": "2018", "indu": "\u534a\u5bfc\u4f53", "shapee": 0.7608658659333066}, {"year": "2018", "indu": "\u73bb\u7483\u73bb\u7ea4", "shapee": 0.6714842307716367}, {"year": "2018", "indu": "\u4e13\u4e1a\u670d\u52a1", "shapee": 0.6351054166233362}], "data-37f6d7f0d84fc79c71aab774466c372d": [{"year": "2019", "indu": "\u917f\u9152\u884c\u4e1a", "shapee": 5.012063544796565}, {"year": "2019", "indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 2.5161000400749733}, {"year": "2019", "indu": "\u7535\u6c60", "shapee": 1.8099631846592066}, {"year": "2019", "indu": "\u71c3\u6c14", "shapee": 1.708428376152297}, {"year": "2019", "indu": "\u901a\u4fe1\u8bbe\u5907", "shapee": 1.5963231333521397}, {"year": "2019", "indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 1.514117988525124}, {"year": "2019", "indu": "\u94f6\u884c", "shapee": 1.4405972494011792}, {"year": "2019", "indu": "\u4e13\u7528\u8bbe\u5907", "shapee": 1.2740043847978366}, {"year": "2019", "indu": "\u534a\u5bfc\u4f53", "shapee": 1.0867229158412106}, {"year": "2019", "indu": "\u5316\u5b66\u5236\u836f", "shapee": 0.9419052620017329}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>这个数据的含义是自某一年起持有到现在的shapee值。</p></li>
<li><p>所以只有横向比较的意义，纵向比肯定是时间越短波动越大。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indus_sha</span><span class="p">[</span><span class="s1">&#39;mostn_byear_1&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-45efe14398d44380bdffb244f0e6d2e2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-45efe14398d44380bdffb244f0e6d2e2.vega-embed details,
  #altair-viz-45efe14398d44380bdffb244f0e6d2e2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-45efe14398d44380bdffb244f0e6d2e2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-45efe14398d44380bdffb244f0e6d2e2") {
      outputDiv = document.getElementById("altair-viz-45efe14398d44380bdffb244f0e6d2e2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2011", "width": 180}, {"data": {"name": "data-b06d7b5bb92085ef29ad2335544373e9"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2012", "width": 180}, {"data": {"name": "data-71720cc49701eafaa9aeae7d78812408"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2013", "width": 180}]}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2014", "width": 180}, {"data": {"name": "data-328ff35c18eb3fabd56660445fe20e2b"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2015", "width": 180}, {"data": {"name": "data-5b71cb3df01d1e3e6b57eb24083b00e1"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2016", "width": 180}], "data": {"name": "data-d5fdeeeaba75452e1d7f02d7f83c2b88"}}, {"hconcat": [{"mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2017", "width": 180}, {"data": {"name": "data-211a913e9ceb81764c9db8318bf5aa6a"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2018", "width": 180}, {"data": {"name": "data-30a2d863ba504196bca0277f82393aa1"}, "mark": {"type": "bar", "color": "brown"}, "encoding": {"x": {"axis": {"format": ".0s"}, "field": "shapee", "scale": {"domain": [-0.7232477473854269, 0.09424529696776054]}, "type": "quantitative"}, "y": {"field": "indu", "sort": "x", "type": "ordinal"}}, "height": 220, "title": "2019", "width": 180}], "data": {"name": "data-332656a7adc2aa3953d5bef399cdcb37"}}], "data": {"name": "data-87af29d06d2f68dd45da12ee8293c04a"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-87af29d06d2f68dd45da12ee8293c04a": [{"year": "2011", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.10612234269155425}, {"year": "2011", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.03468267072539933}, {"year": "2011", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.02883441908217421}, {"year": "2011", "indu": "\u7efc\u5408\u884c\u4e1a", "shapee": -0.024233055349528475}, {"year": "2011", "indu": "\u5305\u88c5\u6750\u6599", "shapee": 0.0020591421034009197}, {"year": "2011", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": 0.00332339711389716}, {"year": "2011", "indu": "\u591a\u5143\u91d1\u878d", "shapee": 0.030557889410290147}, {"year": "2011", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": 0.050713266336465536}, {"year": "2011", "indu": "\u5316\u7ea4\u884c\u4e1a", "shapee": 0.056545723264521924}, {"year": "2011", "indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": 0.060636706823883856}], "data-b06d7b5bb92085ef29ad2335544373e9": [{"year": "2012", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.1224859395277447}, {"year": "2012", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.06199480295977475}, {"year": "2012", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.05203585754248452}, {"year": "2012", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.0443109277289459}, {"year": "2012", "indu": "\u7efc\u5408\u884c\u4e1a", "shapee": -0.029442501843565637}, {"year": "2012", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.024446887762345187}, {"year": "2012", "indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.01330423550723958}, {"year": "2012", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.008968848334499116}, {"year": "2012", "indu": "\u901a\u4fe1\u670d\u52a1", "shapee": 0.009386011405395253}, {"year": "2012", "indu": "\u6c34\u6ce5\u5efa\u6750", "shapee": 0.014286380600024323}], "data-71720cc49701eafaa9aeae7d78812408": [{"year": "2013", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.13822752732369625}, {"year": "2013", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.06591014359235928}, {"year": "2013", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.06531102921143227}, {"year": "2013", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.06459008538727996}, {"year": "2013", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.06129258301097354}, {"year": "2013", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.03609172184419866}, {"year": "2013", "indu": "\u7efc\u5408\u884c\u4e1a", "shapee": -0.0033753065493153317}, {"year": "2013", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": 0.0067285250214983395}, {"year": "2013", "indu": "\u5305\u88c5\u6750\u6599", "shapee": 0.018044789487734376}, {"year": "2013", "indu": "\u7535\u529b\u884c\u4e1a", "shapee": 0.08975742568358147}], "data-d5fdeeeaba75452e1d7f02d7f83c2b88": [{"year": "2014", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.13551376485101568}, {"year": "2014", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.1325540097308327}, {"year": "2014", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.12491534855242338}, {"year": "2014", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.10385785105206978}, {"year": "2014", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.09287429168679884}, {"year": "2014", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.07132246030069535}, {"year": "2014", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.053082450226169066}, {"year": "2014", "indu": "\u7efc\u5408\u884c\u4e1a", "shapee": -0.01972888870620314}, {"year": "2014", "indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": -0.011773754793435282}, {"year": "2014", "indu": "\u7535\u529b\u884c\u4e1a", "shapee": 0.02117865185961592}], "data-328ff35c18eb3fabd56660445fe20e2b": [{"year": "2015", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.21218556168920702}, {"year": "2015", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.18144453675551567}, {"year": "2015", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.18030520178603934}, {"year": "2015", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.17385205087216382}, {"year": "2015", "indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.17083451415561732}, {"year": "2015", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.14901366834251045}, {"year": "2015", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.09717662915489364}, {"year": "2015", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.07798330475447676}, {"year": "2015", "indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": -0.06679244259017254}, {"year": "2015", "indu": "\u7efc\u5408\u884c\u4e1a", "shapee": -0.04534558451990317}], "data-5b71cb3df01d1e3e6b57eb24083b00e1": [{"year": "2016", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.4336137611188638}, {"year": "2016", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.28233230901534107}, {"year": "2016", "indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.25425585358936426}, {"year": "2016", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.24341794619634913}, {"year": "2016", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.19883688535545208}, {"year": "2016", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.18853818579580178}, {"year": "2016", "indu": "\u8bc1\u5238", "shapee": -0.16442222765936054}, {"year": "2016", "indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": -0.13975356414858636}, {"year": "2016", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.10895326631303767}, {"year": "2016", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.09330022761290911}], "data-332656a7adc2aa3953d5bef399cdcb37": [{"year": "2017", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.5425757396581158}, {"year": "2017", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.43115485608942283}, {"year": "2017", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.3201465451534591}, {"year": "2017", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.2599810552095697}, {"year": "2017", "indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.23908075396230286}, {"year": "2017", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.2092985666323404}, {"year": "2017", "indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": -0.2009477437182603}, {"year": "2017", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.14603976885748313}, {"year": "2017", "indu": "\u6587\u5316\u4f20\u5a92", "shapee": -0.11363547743030411}, {"year": "2017", "indu": "\u4e92\u8054\u7f51\u670d\u52a1", "shapee": -0.07929868989804344}], "data-211a913e9ceb81764c9db8318bf5aa6a": [{"year": "2018", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.6888073784623112}, {"year": "2018", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.6796697064328332}, {"year": "2018", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.40798349370825965}, {"year": "2018", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.39572624895718833}, {"year": "2018", "indu": "\u9020\u7eb8\u5370\u5237", "shapee": -0.38315529953403815}, {"year": "2018", "indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.313769131885695}, {"year": "2018", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.25664076996751983}, {"year": "2018", "indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": -0.20365553622669175}, {"year": "2018", "indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "shapee": -0.19925021097820445}, {"year": "2018", "indu": "\u751f\u7269\u5236\u54c1", "shapee": -0.16745073549432007}], "data-30a2d863ba504196bca0277f82393aa1": [{"year": "2019", "indu": "\u591a\u5143\u91d1\u878d", "shapee": -0.6529754229122784}, {"year": "2019", "indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": -0.633570880473344}, {"year": "2019", "indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.4271882346749404}, {"year": "2019", "indu": "\u9020\u7eb8\u5370\u5237", "shapee": -0.3928189547198572}, {"year": "2019", "indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.3813962298629983}, {"year": "2019", "indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "shapee": -0.36122691373957116}, {"year": "2019", "indu": "\u6c34\u6ce5\u5efa\u6750", "shapee": -0.31617050881005604}, {"year": "2019", "indu": "\u65c5\u6e38\u9152\u5e97", "shapee": -0.29772693625579677}, {"year": "2019", "indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.19002930239147342}, {"year": "2019", "indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "shapee": -0.13281781624310907}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>时间越短波动越大，这是可以理解的。shapee值最差的行业更明显。</p></li>
</ul>
</section>
</section>
<section id="id6">
<h1>利润增长<a class="headerlink" href="#id6" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>总体利润增长</p></li>
<li><p>行业利润增长</p></li>
<li><p>个股利润增长</p></li>
</ul>
<ul class="simple">
<li><p>利润增长包括了已经上市企业的业绩增长和新发上市带来的利润增长。</p></li>
<li><p>2022年在IPO数量创新高的情况下，利润增长几乎停滞，是个不好的迹象。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lose_indu</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">indudf</span>
    <span class="n">ldf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;profit&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;profit&#39;</span><span class="p">])</span>

    <span class="n">count_sum_byyear</span> <span class="o">=</span> <span class="n">ldf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">数量</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">),</span>
        <span class="n">金额</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="mi">1000000000</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;历年亏损行业数量和金额(B)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">lose_detail_bycount</span> <span class="o">=</span> <span class="n">ldf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;indu&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">数量</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">),</span>
        <span class="n">金额</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="mi">1000000000</span><span class="p">))</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;数量&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;亏损行业次数和金额（B）&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="n">overview</span> <span class="o">=</span> <span class="n">ldf</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">margins</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;All&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;亏损行业次数一览表&#39;</span><span class="p">)</span>
    <span class="n">overview_sum</span> <span class="o">=</span> <span class="n">ldf</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">margins</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;All&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mi">1000000000</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;亏损行业金额一览表&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">count_sum_byyear</span><span class="p">,</span> <span class="n">lose_detail_bycount</span><span class="p">,</span> <span class="n">overview</span><span class="p">,</span> <span class="n">overview_sum</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lose_indu</span><span class="p">():</span> 
    <span class="n">display</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_3465b">
  <caption>历年亏损行业数量和金额(B)</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_3465b_level0_col0" class="col_heading level0 col0" >year</th>
      <th id="T_3465b_level0_col1" class="col_heading level0 col1" >数量</th>
      <th id="T_3465b_level0_col2" class="col_heading level0 col2" >金额</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_3465b_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_3465b_row0_col0" class="data row0 col0" >2012</td>
      <td id="T_3465b_row0_col1" class="data row0 col1" >3</td>
      <td id="T_3465b_row0_col2" class="data row0 col2" >-9.96</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_3465b_row1_col0" class="data row1 col0" >2013</td>
      <td id="T_3465b_row1_col1" class="data row1 col1" >1</td>
      <td id="T_3465b_row1_col2" class="data row1 col2" >-2.69</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_3465b_row2_col0" class="data row2 col0" >2014</td>
      <td id="T_3465b_row2_col1" class="data row2 col1" >2</td>
      <td id="T_3465b_row2_col2" class="data row2 col2" >-8.05</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_3465b_row3_col0" class="data row3 col0" >2015</td>
      <td id="T_3465b_row3_col1" class="data row3 col1" >5</td>
      <td id="T_3465b_row3_col2" class="data row3 col2" >-61.02</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_3465b_row4_col0" class="data row4 col0" >2016</td>
      <td id="T_3465b_row4_col1" class="data row4 col1" >4</td>
      <td id="T_3465b_row4_col2" class="data row4 col2" >-27.82</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_3465b_row5_col0" class="data row5 col0" >2017</td>
      <td id="T_3465b_row5_col1" class="data row5 col1" >2</td>
      <td id="T_3465b_row5_col2" class="data row5 col2" >-8.69</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_3465b_row6_col0" class="data row6 col0" >2018</td>
      <td id="T_3465b_row6_col1" class="data row6 col1" >5</td>
      <td id="T_3465b_row6_col2" class="data row6 col2" >-8.68</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row7" class="row_heading level0 row7" >7</th>
      <td id="T_3465b_row7_col0" class="data row7 col0" >2019</td>
      <td id="T_3465b_row7_col1" class="data row7 col1" >4</td>
      <td id="T_3465b_row7_col2" class="data row7 col2" >-50.68</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row8" class="row_heading level0 row8" >8</th>
      <td id="T_3465b_row8_col0" class="data row8 col0" >2020</td>
      <td id="T_3465b_row8_col1" class="data row8 col1" >3</td>
      <td id="T_3465b_row8_col2" class="data row8 col2" >-115.98</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row9" class="row_heading level0 row9" >9</th>
      <td id="T_3465b_row9_col0" class="data row9 col0" >2021</td>
      <td id="T_3465b_row9_col1" class="data row9 col1" >8</td>
      <td id="T_3465b_row9_col2" class="data row9 col2" >-147.29</td>
    </tr>
    <tr>
      <th id="T_3465b_level0_row10" class="row_heading level0 row10" >10</th>
      <td id="T_3465b_row10_col0" class="data row10 col0" >2022</td>
      <td id="T_3465b_row10_col1" class="data row10 col1" >10</td>
      <td id="T_3465b_row10_col2" class="data row10 col2" >-245.67</td>
    </tr>
  </tbody>
</table>
</div><div class="output text_html"><style type="text/css">
</style>
<table id="T_889b6">
  <caption>亏损行业次数和金额（B）</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_889b6_level0_col0" class="col_heading level0 col0" >indu</th>
      <th id="T_889b6_level0_col1" class="col_heading level0 col1" >数量</th>
      <th id="T_889b6_level0_col2" class="col_heading level0 col2" >金额</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_889b6_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_889b6_row0_col0" class="data row0 col0" >船舶制造</td>
      <td id="T_889b6_row0_col1" class="data row0 col1" >5</td>
      <td id="T_889b6_row0_col2" class="data row0 col2" >-4.82</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_889b6_row1_col0" class="data row1 col0" >化肥行业</td>
      <td id="T_889b6_row1_col1" class="data row1 col1" >4</td>
      <td id="T_889b6_row1_col2" class="data row1 col2" >-48.27</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_889b6_row2_col0" class="data row2 col0" >教育</td>
      <td id="T_889b6_row2_col1" class="data row2 col1" >4</td>
      <td id="T_889b6_row2_col2" class="data row2 col2" >-12.22</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_889b6_row3_col0" class="data row3 col0" >有色金属</td>
      <td id="T_889b6_row3_col1" class="data row3 col1" >3</td>
      <td id="T_889b6_row3_col2" class="data row3 col2" >-9.53</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_889b6_row4_col0" class="data row4 col0" >航空机场</td>
      <td id="T_889b6_row4_col1" class="data row4 col1" >3</td>
      <td id="T_889b6_row4_col2" class="data row4 col2" >-289.57</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_889b6_row5_col0" class="data row5 col0" >光伏设备</td>
      <td id="T_889b6_row5_col1" class="data row5 col1" >2</td>
      <td id="T_889b6_row5_col2" class="data row5 col2" >-7.34</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_889b6_row6_col0" class="data row6 col0" >采掘行业</td>
      <td id="T_889b6_row6_col1" class="data row6 col1" >2</td>
      <td id="T_889b6_row6_col2" class="data row6 col2" >-30.59</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row7" class="row_heading level0 row7" >7</th>
      <td id="T_889b6_row7_col0" class="data row7 col0" >装修装饰</td>
      <td id="T_889b6_row7_col1" class="data row7 col1" >2</td>
      <td id="T_889b6_row7_col2" class="data row7 col2" >-26.82</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row8" class="row_heading level0 row8" >8</th>
      <td id="T_889b6_row8_col0" class="data row8 col0" >电机</td>
      <td id="T_889b6_row8_col1" class="data row8 col1" >2</td>
      <td id="T_889b6_row8_col2" class="data row8 col2" >-4.45</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row9" class="row_heading level0 row9" >9</th>
      <td id="T_889b6_row9_col0" class="data row9 col0" >游戏</td>
      <td id="T_889b6_row9_col1" class="data row9 col1" >2</td>
      <td id="T_889b6_row9_col2" class="data row9 col2" >-3.21</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row10" class="row_heading level0 row10" >10</th>
      <td id="T_889b6_row10_col0" class="data row10 col0" >汽车服务</td>
      <td id="T_889b6_row10_col1" class="data row10 col1" >2</td>
      <td id="T_889b6_row10_col2" class="data row10 col2" >-3.05</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row11" class="row_heading level0 row11" >11</th>
      <td id="T_889b6_row11_col0" class="data row11 col0" >钢铁行业</td>
      <td id="T_889b6_row11_col1" class="data row11 col1" >2</td>
      <td id="T_889b6_row11_col2" class="data row11 col2" >-55.08</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row12" class="row_heading level0 row12" >12</th>
      <td id="T_889b6_row12_col0" class="data row12 col0" >房地产服务</td>
      <td id="T_889b6_row12_col1" class="data row12 col1" >2</td>
      <td id="T_889b6_row12_col2" class="data row12 col2" >-24.91</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row13" class="row_heading level0 row13" >13</th>
      <td id="T_889b6_row13_col0" class="data row13 col0" >工程机械</td>
      <td id="T_889b6_row13_col1" class="data row13 col1" >2</td>
      <td id="T_889b6_row13_col2" class="data row13 col2" >-2.46</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row14" class="row_heading level0 row14" >14</th>
      <td id="T_889b6_row14_col0" class="data row14 col0" >商业百货</td>
      <td id="T_889b6_row14_col1" class="data row14 col1" >2</td>
      <td id="T_889b6_row14_col2" class="data row14 col2" >-46.57</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row15" class="row_heading level0 row15" >15</th>
      <td id="T_889b6_row15_col0" class="data row15 col0" >房地产开发</td>
      <td id="T_889b6_row15_col1" class="data row15 col1" >1</td>
      <td id="T_889b6_row15_col2" class="data row15 col2" >-50.07</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row16" class="row_heading level0 row16" >16</th>
      <td id="T_889b6_row16_col0" class="data row16 col0" >煤炭行业</td>
      <td id="T_889b6_row16_col1" class="data row16 col1" >1</td>
      <td id="T_889b6_row16_col2" class="data row16 col2" >-5.43</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row17" class="row_heading level0 row17" >17</th>
      <td id="T_889b6_row17_col0" class="data row17 col0" >电源设备</td>
      <td id="T_889b6_row17_col1" class="data row17 col1" >1</td>
      <td id="T_889b6_row17_col2" class="data row17 col2" >-5.19</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row18" class="row_heading level0 row18" >18</th>
      <td id="T_889b6_row18_col0" class="data row18 col0" >能源金属</td>
      <td id="T_889b6_row18_col1" class="data row18 col1" >1</td>
      <td id="T_889b6_row18_col2" class="data row18 col2" >-4.59</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row19" class="row_heading level0 row19" >19</th>
      <td id="T_889b6_row19_col0" class="data row19 col0" >小金属</td>
      <td id="T_889b6_row19_col1" class="data row19 col1" >1</td>
      <td id="T_889b6_row19_col2" class="data row19 col2" >-2.89</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row20" class="row_heading level0 row20" >20</th>
      <td id="T_889b6_row20_col0" class="data row20 col0" >农牧饲渔</td>
      <td id="T_889b6_row20_col1" class="data row20 col1" >1</td>
      <td id="T_889b6_row20_col2" class="data row20 col2" >-43.18</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row21" class="row_heading level0 row21" >21</th>
      <td id="T_889b6_row21_col0" class="data row21 col0" >光学光电子</td>
      <td id="T_889b6_row21_col1" class="data row21 col1" >1</td>
      <td id="T_889b6_row21_col2" class="data row21 col2" >-2.79</td>
    </tr>
    <tr>
      <th id="T_889b6_level0_row22" class="row_heading level0 row22" >22</th>
      <td id="T_889b6_row22_col0" class="data row22 col0" >中药</td>
      <td id="T_889b6_row22_col1" class="data row22 col1" >1</td>
      <td id="T_889b6_row22_col2" class="data row22 col2" >-3.51</td>
    </tr>
  </tbody>
</table>
</div><div class="output text_html"><style type="text/css">
</style>
<table id="T_c0c16">
  <caption>亏损行业次数一览表</caption>
  <thead>
    <tr>
      <th class="index_name level0" >year</th>
      <th id="T_c0c16_level0_col0" class="col_heading level0 col0" >2012</th>
      <th id="T_c0c16_level0_col1" class="col_heading level0 col1" >2013</th>
      <th id="T_c0c16_level0_col2" class="col_heading level0 col2" >2014</th>
      <th id="T_c0c16_level0_col3" class="col_heading level0 col3" >2015</th>
      <th id="T_c0c16_level0_col4" class="col_heading level0 col4" >2016</th>
      <th id="T_c0c16_level0_col5" class="col_heading level0 col5" >2017</th>
      <th id="T_c0c16_level0_col6" class="col_heading level0 col6" >2018</th>
      <th id="T_c0c16_level0_col7" class="col_heading level0 col7" >2019</th>
      <th id="T_c0c16_level0_col8" class="col_heading level0 col8" >2020</th>
      <th id="T_c0c16_level0_col9" class="col_heading level0 col9" >2021</th>
      <th id="T_c0c16_level0_col10" class="col_heading level0 col10" >2022</th>
      <th id="T_c0c16_level0_col11" class="col_heading level0 col11" >All</th>
    </tr>
    <tr>
      <th class="index_name level0" >indu</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
      <th class="blank col9" >&nbsp;</th>
      <th class="blank col10" >&nbsp;</th>
      <th class="blank col11" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_c0c16_level0_row0" class="row_heading level0 row0" >All</th>
      <td id="T_c0c16_row0_col0" class="data row0 col0" >3</td>
      <td id="T_c0c16_row0_col1" class="data row0 col1" >1</td>
      <td id="T_c0c16_row0_col2" class="data row0 col2" >2</td>
      <td id="T_c0c16_row0_col3" class="data row0 col3" >5</td>
      <td id="T_c0c16_row0_col4" class="data row0 col4" >4</td>
      <td id="T_c0c16_row0_col5" class="data row0 col5" >2</td>
      <td id="T_c0c16_row0_col6" class="data row0 col6" >5</td>
      <td id="T_c0c16_row0_col7" class="data row0 col7" >4</td>
      <td id="T_c0c16_row0_col8" class="data row0 col8" >3</td>
      <td id="T_c0c16_row0_col9" class="data row0 col9" >8</td>
      <td id="T_c0c16_row0_col10" class="data row0 col10" >10</td>
      <td id="T_c0c16_row0_col11" class="data row0 col11" >47</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row1" class="row_heading level0 row1" >船舶制造</th>
      <td id="T_c0c16_row1_col0" class="data row1 col0" >0</td>
      <td id="T_c0c16_row1_col1" class="data row1 col1" >0</td>
      <td id="T_c0c16_row1_col2" class="data row1 col2" >0</td>
      <td id="T_c0c16_row1_col3" class="data row1 col3" >1</td>
      <td id="T_c0c16_row1_col4" class="data row1 col4" >1</td>
      <td id="T_c0c16_row1_col5" class="data row1 col5" >0</td>
      <td id="T_c0c16_row1_col6" class="data row1 col6" >1</td>
      <td id="T_c0c16_row1_col7" class="data row1 col7" >0</td>
      <td id="T_c0c16_row1_col8" class="data row1 col8" >0</td>
      <td id="T_c0c16_row1_col9" class="data row1 col9" >1</td>
      <td id="T_c0c16_row1_col10" class="data row1 col10" >1</td>
      <td id="T_c0c16_row1_col11" class="data row1 col11" >5</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row2" class="row_heading level0 row2" >化肥行业</th>
      <td id="T_c0c16_row2_col0" class="data row2 col0" >0</td>
      <td id="T_c0c16_row2_col1" class="data row2 col1" >0</td>
      <td id="T_c0c16_row2_col2" class="data row2 col2" >1</td>
      <td id="T_c0c16_row2_col3" class="data row2 col3" >0</td>
      <td id="T_c0c16_row2_col4" class="data row2 col4" >1</td>
      <td id="T_c0c16_row2_col5" class="data row2 col5" >1</td>
      <td id="T_c0c16_row2_col6" class="data row2 col6" >0</td>
      <td id="T_c0c16_row2_col7" class="data row2 col7" >1</td>
      <td id="T_c0c16_row2_col8" class="data row2 col8" >0</td>
      <td id="T_c0c16_row2_col9" class="data row2 col9" >0</td>
      <td id="T_c0c16_row2_col10" class="data row2 col10" >0</td>
      <td id="T_c0c16_row2_col11" class="data row2 col11" >4</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row3" class="row_heading level0 row3" >教育</th>
      <td id="T_c0c16_row3_col0" class="data row3 col0" >0</td>
      <td id="T_c0c16_row3_col1" class="data row3 col1" >0</td>
      <td id="T_c0c16_row3_col2" class="data row3 col2" >0</td>
      <td id="T_c0c16_row3_col3" class="data row3 col3" >0</td>
      <td id="T_c0c16_row3_col4" class="data row3 col4" >0</td>
      <td id="T_c0c16_row3_col5" class="data row3 col5" >0</td>
      <td id="T_c0c16_row3_col6" class="data row3 col6" >1</td>
      <td id="T_c0c16_row3_col7" class="data row3 col7" >0</td>
      <td id="T_c0c16_row3_col8" class="data row3 col8" >1</td>
      <td id="T_c0c16_row3_col9" class="data row3 col9" >1</td>
      <td id="T_c0c16_row3_col10" class="data row3 col10" >1</td>
      <td id="T_c0c16_row3_col11" class="data row3 col11" >4</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row4" class="row_heading level0 row4" >航空机场</th>
      <td id="T_c0c16_row4_col0" class="data row4 col0" >0</td>
      <td id="T_c0c16_row4_col1" class="data row4 col1" >0</td>
      <td id="T_c0c16_row4_col2" class="data row4 col2" >0</td>
      <td id="T_c0c16_row4_col3" class="data row4 col3" >0</td>
      <td id="T_c0c16_row4_col4" class="data row4 col4" >0</td>
      <td id="T_c0c16_row4_col5" class="data row4 col5" >0</td>
      <td id="T_c0c16_row4_col6" class="data row4 col6" >0</td>
      <td id="T_c0c16_row4_col7" class="data row4 col7" >0</td>
      <td id="T_c0c16_row4_col8" class="data row4 col8" >1</td>
      <td id="T_c0c16_row4_col9" class="data row4 col9" >1</td>
      <td id="T_c0c16_row4_col10" class="data row4 col10" >1</td>
      <td id="T_c0c16_row4_col11" class="data row4 col11" >3</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row5" class="row_heading level0 row5" >有色金属</th>
      <td id="T_c0c16_row5_col0" class="data row5 col0" >1</td>
      <td id="T_c0c16_row5_col1" class="data row5 col1" >0</td>
      <td id="T_c0c16_row5_col2" class="data row5 col2" >1</td>
      <td id="T_c0c16_row5_col3" class="data row5 col3" >0</td>
      <td id="T_c0c16_row5_col4" class="data row5 col4" >0</td>
      <td id="T_c0c16_row5_col5" class="data row5 col5" >0</td>
      <td id="T_c0c16_row5_col6" class="data row5 col6" >1</td>
      <td id="T_c0c16_row5_col7" class="data row5 col7" >0</td>
      <td id="T_c0c16_row5_col8" class="data row5 col8" >0</td>
      <td id="T_c0c16_row5_col9" class="data row5 col9" >0</td>
      <td id="T_c0c16_row5_col10" class="data row5 col10" >0</td>
      <td id="T_c0c16_row5_col11" class="data row5 col11" >3</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row6" class="row_heading level0 row6" >光伏设备</th>
      <td id="T_c0c16_row6_col0" class="data row6 col0" >1</td>
      <td id="T_c0c16_row6_col1" class="data row6 col1" >1</td>
      <td id="T_c0c16_row6_col2" class="data row6 col2" >0</td>
      <td id="T_c0c16_row6_col3" class="data row6 col3" >0</td>
      <td id="T_c0c16_row6_col4" class="data row6 col4" >0</td>
      <td id="T_c0c16_row6_col5" class="data row6 col5" >0</td>
      <td id="T_c0c16_row6_col6" class="data row6 col6" >0</td>
      <td id="T_c0c16_row6_col7" class="data row6 col7" >0</td>
      <td id="T_c0c16_row6_col8" class="data row6 col8" >0</td>
      <td id="T_c0c16_row6_col9" class="data row6 col9" >0</td>
      <td id="T_c0c16_row6_col10" class="data row6 col10" >0</td>
      <td id="T_c0c16_row6_col11" class="data row6 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row7" class="row_heading level0 row7" >钢铁行业</th>
      <td id="T_c0c16_row7_col0" class="data row7 col0" >1</td>
      <td id="T_c0c16_row7_col1" class="data row7 col1" >0</td>
      <td id="T_c0c16_row7_col2" class="data row7 col2" >0</td>
      <td id="T_c0c16_row7_col3" class="data row7 col3" >1</td>
      <td id="T_c0c16_row7_col4" class="data row7 col4" >0</td>
      <td id="T_c0c16_row7_col5" class="data row7 col5" >0</td>
      <td id="T_c0c16_row7_col6" class="data row7 col6" >0</td>
      <td id="T_c0c16_row7_col7" class="data row7 col7" >0</td>
      <td id="T_c0c16_row7_col8" class="data row7 col8" >0</td>
      <td id="T_c0c16_row7_col9" class="data row7 col9" >0</td>
      <td id="T_c0c16_row7_col10" class="data row7 col10" >0</td>
      <td id="T_c0c16_row7_col11" class="data row7 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row8" class="row_heading level0 row8" >采掘行业</th>
      <td id="T_c0c16_row8_col0" class="data row8 col0" >0</td>
      <td id="T_c0c16_row8_col1" class="data row8 col1" >0</td>
      <td id="T_c0c16_row8_col2" class="data row8 col2" >0</td>
      <td id="T_c0c16_row8_col3" class="data row8 col3" >0</td>
      <td id="T_c0c16_row8_col4" class="data row8 col4" >1</td>
      <td id="T_c0c16_row8_col5" class="data row8 col5" >1</td>
      <td id="T_c0c16_row8_col6" class="data row8 col6" >0</td>
      <td id="T_c0c16_row8_col7" class="data row8 col7" >0</td>
      <td id="T_c0c16_row8_col8" class="data row8 col8" >0</td>
      <td id="T_c0c16_row8_col9" class="data row8 col9" >0</td>
      <td id="T_c0c16_row8_col10" class="data row8 col10" >0</td>
      <td id="T_c0c16_row8_col11" class="data row8 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row9" class="row_heading level0 row9" >装修装饰</th>
      <td id="T_c0c16_row9_col0" class="data row9 col0" >0</td>
      <td id="T_c0c16_row9_col1" class="data row9 col1" >0</td>
      <td id="T_c0c16_row9_col2" class="data row9 col2" >0</td>
      <td id="T_c0c16_row9_col3" class="data row9 col3" >0</td>
      <td id="T_c0c16_row9_col4" class="data row9 col4" >0</td>
      <td id="T_c0c16_row9_col5" class="data row9 col5" >0</td>
      <td id="T_c0c16_row9_col6" class="data row9 col6" >0</td>
      <td id="T_c0c16_row9_col7" class="data row9 col7" >0</td>
      <td id="T_c0c16_row9_col8" class="data row9 col8" >0</td>
      <td id="T_c0c16_row9_col9" class="data row9 col9" >1</td>
      <td id="T_c0c16_row9_col10" class="data row9 col10" >1</td>
      <td id="T_c0c16_row9_col11" class="data row9 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row10" class="row_heading level0 row10" >电机</th>
      <td id="T_c0c16_row10_col0" class="data row10 col0" >0</td>
      <td id="T_c0c16_row10_col1" class="data row10 col1" >0</td>
      <td id="T_c0c16_row10_col2" class="data row10 col2" >0</td>
      <td id="T_c0c16_row10_col3" class="data row10 col3" >0</td>
      <td id="T_c0c16_row10_col4" class="data row10 col4" >0</td>
      <td id="T_c0c16_row10_col5" class="data row10 col5" >0</td>
      <td id="T_c0c16_row10_col6" class="data row10 col6" >1</td>
      <td id="T_c0c16_row10_col7" class="data row10 col7" >1</td>
      <td id="T_c0c16_row10_col8" class="data row10 col8" >0</td>
      <td id="T_c0c16_row10_col9" class="data row10 col9" >0</td>
      <td id="T_c0c16_row10_col10" class="data row10 col10" >0</td>
      <td id="T_c0c16_row10_col11" class="data row10 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row11" class="row_heading level0 row11" >游戏</th>
      <td id="T_c0c16_row11_col0" class="data row11 col0" >0</td>
      <td id="T_c0c16_row11_col1" class="data row11 col1" >0</td>
      <td id="T_c0c16_row11_col2" class="data row11 col2" >0</td>
      <td id="T_c0c16_row11_col3" class="data row11 col3" >0</td>
      <td id="T_c0c16_row11_col4" class="data row11 col4" >0</td>
      <td id="T_c0c16_row11_col5" class="data row11 col5" >0</td>
      <td id="T_c0c16_row11_col6" class="data row11 col6" >0</td>
      <td id="T_c0c16_row11_col7" class="data row11 col7" >1</td>
      <td id="T_c0c16_row11_col8" class="data row11 col8" >0</td>
      <td id="T_c0c16_row11_col9" class="data row11 col9" >0</td>
      <td id="T_c0c16_row11_col10" class="data row11 col10" >1</td>
      <td id="T_c0c16_row11_col11" class="data row11 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row12" class="row_heading level0 row12" >汽车服务</th>
      <td id="T_c0c16_row12_col0" class="data row12 col0" >0</td>
      <td id="T_c0c16_row12_col1" class="data row12 col1" >0</td>
      <td id="T_c0c16_row12_col2" class="data row12 col2" >0</td>
      <td id="T_c0c16_row12_col3" class="data row12 col3" >0</td>
      <td id="T_c0c16_row12_col4" class="data row12 col4" >0</td>
      <td id="T_c0c16_row12_col5" class="data row12 col5" >0</td>
      <td id="T_c0c16_row12_col6" class="data row12 col6" >1</td>
      <td id="T_c0c16_row12_col7" class="data row12 col7" >0</td>
      <td id="T_c0c16_row12_col8" class="data row12 col8" >0</td>
      <td id="T_c0c16_row12_col9" class="data row12 col9" >0</td>
      <td id="T_c0c16_row12_col10" class="data row12 col10" >1</td>
      <td id="T_c0c16_row12_col11" class="data row12 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row13" class="row_heading level0 row13" >房地产服务</th>
      <td id="T_c0c16_row13_col0" class="data row13 col0" >0</td>
      <td id="T_c0c16_row13_col1" class="data row13 col1" >0</td>
      <td id="T_c0c16_row13_col2" class="data row13 col2" >0</td>
      <td id="T_c0c16_row13_col3" class="data row13 col3" >0</td>
      <td id="T_c0c16_row13_col4" class="data row13 col4" >0</td>
      <td id="T_c0c16_row13_col5" class="data row13 col5" >0</td>
      <td id="T_c0c16_row13_col6" class="data row13 col6" >0</td>
      <td id="T_c0c16_row13_col7" class="data row13 col7" >0</td>
      <td id="T_c0c16_row13_col8" class="data row13 col8" >0</td>
      <td id="T_c0c16_row13_col9" class="data row13 col9" >1</td>
      <td id="T_c0c16_row13_col10" class="data row13 col10" >1</td>
      <td id="T_c0c16_row13_col11" class="data row13 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row14" class="row_heading level0 row14" >工程机械</th>
      <td id="T_c0c16_row14_col0" class="data row14 col0" >0</td>
      <td id="T_c0c16_row14_col1" class="data row14 col1" >0</td>
      <td id="T_c0c16_row14_col2" class="data row14 col2" >0</td>
      <td id="T_c0c16_row14_col3" class="data row14 col3" >1</td>
      <td id="T_c0c16_row14_col4" class="data row14 col4" >1</td>
      <td id="T_c0c16_row14_col5" class="data row14 col5" >0</td>
      <td id="T_c0c16_row14_col6" class="data row14 col6" >0</td>
      <td id="T_c0c16_row14_col7" class="data row14 col7" >0</td>
      <td id="T_c0c16_row14_col8" class="data row14 col8" >0</td>
      <td id="T_c0c16_row14_col9" class="data row14 col9" >0</td>
      <td id="T_c0c16_row14_col10" class="data row14 col10" >0</td>
      <td id="T_c0c16_row14_col11" class="data row14 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row15" class="row_heading level0 row15" >商业百货</th>
      <td id="T_c0c16_row15_col0" class="data row15 col0" >0</td>
      <td id="T_c0c16_row15_col1" class="data row15 col1" >0</td>
      <td id="T_c0c16_row15_col2" class="data row15 col2" >0</td>
      <td id="T_c0c16_row15_col3" class="data row15 col3" >0</td>
      <td id="T_c0c16_row15_col4" class="data row15 col4" >0</td>
      <td id="T_c0c16_row15_col5" class="data row15 col5" >0</td>
      <td id="T_c0c16_row15_col6" class="data row15 col6" >0</td>
      <td id="T_c0c16_row15_col7" class="data row15 col7" >0</td>
      <td id="T_c0c16_row15_col8" class="data row15 col8" >0</td>
      <td id="T_c0c16_row15_col9" class="data row15 col9" >1</td>
      <td id="T_c0c16_row15_col10" class="data row15 col10" >1</td>
      <td id="T_c0c16_row15_col11" class="data row15 col11" >2</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row16" class="row_heading level0 row16" >煤炭行业</th>
      <td id="T_c0c16_row16_col0" class="data row16 col0" >0</td>
      <td id="T_c0c16_row16_col1" class="data row16 col1" >0</td>
      <td id="T_c0c16_row16_col2" class="data row16 col2" >0</td>
      <td id="T_c0c16_row16_col3" class="data row16 col3" >1</td>
      <td id="T_c0c16_row16_col4" class="data row16 col4" >0</td>
      <td id="T_c0c16_row16_col5" class="data row16 col5" >0</td>
      <td id="T_c0c16_row16_col6" class="data row16 col6" >0</td>
      <td id="T_c0c16_row16_col7" class="data row16 col7" >0</td>
      <td id="T_c0c16_row16_col8" class="data row16 col8" >0</td>
      <td id="T_c0c16_row16_col9" class="data row16 col9" >0</td>
      <td id="T_c0c16_row16_col10" class="data row16 col10" >0</td>
      <td id="T_c0c16_row16_col11" class="data row16 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row17" class="row_heading level0 row17" >房地产开发</th>
      <td id="T_c0c16_row17_col0" class="data row17 col0" >0</td>
      <td id="T_c0c16_row17_col1" class="data row17 col1" >0</td>
      <td id="T_c0c16_row17_col2" class="data row17 col2" >0</td>
      <td id="T_c0c16_row17_col3" class="data row17 col3" >0</td>
      <td id="T_c0c16_row17_col4" class="data row17 col4" >0</td>
      <td id="T_c0c16_row17_col5" class="data row17 col5" >0</td>
      <td id="T_c0c16_row17_col6" class="data row17 col6" >0</td>
      <td id="T_c0c16_row17_col7" class="data row17 col7" >0</td>
      <td id="T_c0c16_row17_col8" class="data row17 col8" >0</td>
      <td id="T_c0c16_row17_col9" class="data row17 col9" >0</td>
      <td id="T_c0c16_row17_col10" class="data row17 col10" >1</td>
      <td id="T_c0c16_row17_col11" class="data row17 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row18" class="row_heading level0 row18" >电源设备</th>
      <td id="T_c0c16_row18_col0" class="data row18 col0" >0</td>
      <td id="T_c0c16_row18_col1" class="data row18 col1" >0</td>
      <td id="T_c0c16_row18_col2" class="data row18 col2" >0</td>
      <td id="T_c0c16_row18_col3" class="data row18 col3" >0</td>
      <td id="T_c0c16_row18_col4" class="data row18 col4" >0</td>
      <td id="T_c0c16_row18_col5" class="data row18 col5" >0</td>
      <td id="T_c0c16_row18_col6" class="data row18 col6" >0</td>
      <td id="T_c0c16_row18_col7" class="data row18 col7" >0</td>
      <td id="T_c0c16_row18_col8" class="data row18 col8" >0</td>
      <td id="T_c0c16_row18_col9" class="data row18 col9" >1</td>
      <td id="T_c0c16_row18_col10" class="data row18 col10" >0</td>
      <td id="T_c0c16_row18_col11" class="data row18 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row19" class="row_heading level0 row19" >能源金属</th>
      <td id="T_c0c16_row19_col0" class="data row19 col0" >0</td>
      <td id="T_c0c16_row19_col1" class="data row19 col1" >0</td>
      <td id="T_c0c16_row19_col2" class="data row19 col2" >0</td>
      <td id="T_c0c16_row19_col3" class="data row19 col3" >0</td>
      <td id="T_c0c16_row19_col4" class="data row19 col4" >0</td>
      <td id="T_c0c16_row19_col5" class="data row19 col5" >0</td>
      <td id="T_c0c16_row19_col6" class="data row19 col6" >0</td>
      <td id="T_c0c16_row19_col7" class="data row19 col7" >1</td>
      <td id="T_c0c16_row19_col8" class="data row19 col8" >0</td>
      <td id="T_c0c16_row19_col9" class="data row19 col9" >0</td>
      <td id="T_c0c16_row19_col10" class="data row19 col10" >0</td>
      <td id="T_c0c16_row19_col11" class="data row19 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row20" class="row_heading level0 row20" >小金属</th>
      <td id="T_c0c16_row20_col0" class="data row20 col0" >0</td>
      <td id="T_c0c16_row20_col1" class="data row20 col1" >0</td>
      <td id="T_c0c16_row20_col2" class="data row20 col2" >0</td>
      <td id="T_c0c16_row20_col3" class="data row20 col3" >1</td>
      <td id="T_c0c16_row20_col4" class="data row20 col4" >0</td>
      <td id="T_c0c16_row20_col5" class="data row20 col5" >0</td>
      <td id="T_c0c16_row20_col6" class="data row20 col6" >0</td>
      <td id="T_c0c16_row20_col7" class="data row20 col7" >0</td>
      <td id="T_c0c16_row20_col8" class="data row20 col8" >0</td>
      <td id="T_c0c16_row20_col9" class="data row20 col9" >0</td>
      <td id="T_c0c16_row20_col10" class="data row20 col10" >0</td>
      <td id="T_c0c16_row20_col11" class="data row20 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row21" class="row_heading level0 row21" >农牧饲渔</th>
      <td id="T_c0c16_row21_col0" class="data row21 col0" >0</td>
      <td id="T_c0c16_row21_col1" class="data row21 col1" >0</td>
      <td id="T_c0c16_row21_col2" class="data row21 col2" >0</td>
      <td id="T_c0c16_row21_col3" class="data row21 col3" >0</td>
      <td id="T_c0c16_row21_col4" class="data row21 col4" >0</td>
      <td id="T_c0c16_row21_col5" class="data row21 col5" >0</td>
      <td id="T_c0c16_row21_col6" class="data row21 col6" >0</td>
      <td id="T_c0c16_row21_col7" class="data row21 col7" >0</td>
      <td id="T_c0c16_row21_col8" class="data row21 col8" >0</td>
      <td id="T_c0c16_row21_col9" class="data row21 col9" >1</td>
      <td id="T_c0c16_row21_col10" class="data row21 col10" >0</td>
      <td id="T_c0c16_row21_col11" class="data row21 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row22" class="row_heading level0 row22" >光学光电子</th>
      <td id="T_c0c16_row22_col0" class="data row22 col0" >0</td>
      <td id="T_c0c16_row22_col1" class="data row22 col1" >0</td>
      <td id="T_c0c16_row22_col2" class="data row22 col2" >0</td>
      <td id="T_c0c16_row22_col3" class="data row22 col3" >0</td>
      <td id="T_c0c16_row22_col4" class="data row22 col4" >0</td>
      <td id="T_c0c16_row22_col5" class="data row22 col5" >0</td>
      <td id="T_c0c16_row22_col6" class="data row22 col6" >0</td>
      <td id="T_c0c16_row22_col7" class="data row22 col7" >0</td>
      <td id="T_c0c16_row22_col8" class="data row22 col8" >0</td>
      <td id="T_c0c16_row22_col9" class="data row22 col9" >0</td>
      <td id="T_c0c16_row22_col10" class="data row22 col10" >1</td>
      <td id="T_c0c16_row22_col11" class="data row22 col11" >1</td>
    </tr>
    <tr>
      <th id="T_c0c16_level0_row23" class="row_heading level0 row23" >中药</th>
      <td id="T_c0c16_row23_col0" class="data row23 col0" >0</td>
      <td id="T_c0c16_row23_col1" class="data row23 col1" >0</td>
      <td id="T_c0c16_row23_col2" class="data row23 col2" >0</td>
      <td id="T_c0c16_row23_col3" class="data row23 col3" >0</td>
      <td id="T_c0c16_row23_col4" class="data row23 col4" >0</td>
      <td id="T_c0c16_row23_col5" class="data row23 col5" >0</td>
      <td id="T_c0c16_row23_col6" class="data row23 col6" >0</td>
      <td id="T_c0c16_row23_col7" class="data row23 col7" >0</td>
      <td id="T_c0c16_row23_col8" class="data row23 col8" >1</td>
      <td id="T_c0c16_row23_col9" class="data row23 col9" >0</td>
      <td id="T_c0c16_row23_col10" class="data row23 col10" >0</td>
      <td id="T_c0c16_row23_col11" class="data row23 col11" >1</td>
    </tr>
  </tbody>
</table>
</div><div class="output text_html"><style type="text/css">
</style>
<table id="T_91fc8">
  <caption>亏损行业金额一览表</caption>
  <thead>
    <tr>
      <th class="index_name level0" >year</th>
      <th id="T_91fc8_level0_col0" class="col_heading level0 col0" >2012</th>
      <th id="T_91fc8_level0_col1" class="col_heading level0 col1" >2013</th>
      <th id="T_91fc8_level0_col2" class="col_heading level0 col2" >2014</th>
      <th id="T_91fc8_level0_col3" class="col_heading level0 col3" >2015</th>
      <th id="T_91fc8_level0_col4" class="col_heading level0 col4" >2016</th>
      <th id="T_91fc8_level0_col5" class="col_heading level0 col5" >2017</th>
      <th id="T_91fc8_level0_col6" class="col_heading level0 col6" >2018</th>
      <th id="T_91fc8_level0_col7" class="col_heading level0 col7" >2019</th>
      <th id="T_91fc8_level0_col8" class="col_heading level0 col8" >2020</th>
      <th id="T_91fc8_level0_col9" class="col_heading level0 col9" >2021</th>
      <th id="T_91fc8_level0_col10" class="col_heading level0 col10" >2022</th>
      <th id="T_91fc8_level0_col11" class="col_heading level0 col11" >All</th>
    </tr>
    <tr>
      <th class="index_name level0" >indu</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
      <th class="blank col9" >&nbsp;</th>
      <th class="blank col10" >&nbsp;</th>
      <th class="blank col11" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_91fc8_level0_row0" class="row_heading level0 row0" >All</th>
      <td id="T_91fc8_row0_col0" class="data row0 col0" >-9.96</td>
      <td id="T_91fc8_row0_col1" class="data row0 col1" >-2.69</td>
      <td id="T_91fc8_row0_col2" class="data row0 col2" >-8.05</td>
      <td id="T_91fc8_row0_col3" class="data row0 col3" >-61.02</td>
      <td id="T_91fc8_row0_col4" class="data row0 col4" >-27.82</td>
      <td id="T_91fc8_row0_col5" class="data row0 col5" >-8.69</td>
      <td id="T_91fc8_row0_col6" class="data row0 col6" >-8.68</td>
      <td id="T_91fc8_row0_col7" class="data row0 col7" >-50.68</td>
      <td id="T_91fc8_row0_col8" class="data row0 col8" >-115.98</td>
      <td id="T_91fc8_row0_col9" class="data row0 col9" >-147.29</td>
      <td id="T_91fc8_row0_col10" class="data row0 col10" >-245.67</td>
      <td id="T_91fc8_row0_col11" class="data row0 col11" >-686.53</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row1" class="row_heading level0 row1" >航空机场</th>
      <td id="T_91fc8_row1_col0" class="data row1 col0" >0.00</td>
      <td id="T_91fc8_row1_col1" class="data row1 col1" >0.00</td>
      <td id="T_91fc8_row1_col2" class="data row1 col2" >0.00</td>
      <td id="T_91fc8_row1_col3" class="data row1 col3" >0.00</td>
      <td id="T_91fc8_row1_col4" class="data row1 col4" >0.00</td>
      <td id="T_91fc8_row1_col5" class="data row1 col5" >0.00</td>
      <td id="T_91fc8_row1_col6" class="data row1 col6" >0.00</td>
      <td id="T_91fc8_row1_col7" class="data row1 col7" >0.00</td>
      <td id="T_91fc8_row1_col8" class="data row1 col8" >-110.39</td>
      <td id="T_91fc8_row1_col9" class="data row1 col9" >-37.96</td>
      <td id="T_91fc8_row1_col10" class="data row1 col10" >-141.22</td>
      <td id="T_91fc8_row1_col11" class="data row1 col11" >-289.57</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row2" class="row_heading level0 row2" >钢铁行业</th>
      <td id="T_91fc8_row2_col0" class="data row2 col0" >-4.55</td>
      <td id="T_91fc8_row2_col1" class="data row2 col1" >0.00</td>
      <td id="T_91fc8_row2_col2" class="data row2 col2" >0.00</td>
      <td id="T_91fc8_row2_col3" class="data row2 col3" >-50.53</td>
      <td id="T_91fc8_row2_col4" class="data row2 col4" >0.00</td>
      <td id="T_91fc8_row2_col5" class="data row2 col5" >0.00</td>
      <td id="T_91fc8_row2_col6" class="data row2 col6" >0.00</td>
      <td id="T_91fc8_row2_col7" class="data row2 col7" >0.00</td>
      <td id="T_91fc8_row2_col8" class="data row2 col8" >0.00</td>
      <td id="T_91fc8_row2_col9" class="data row2 col9" >0.00</td>
      <td id="T_91fc8_row2_col10" class="data row2 col10" >0.00</td>
      <td id="T_91fc8_row2_col11" class="data row2 col11" >-55.08</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row3" class="row_heading level0 row3" >房地产开发</th>
      <td id="T_91fc8_row3_col0" class="data row3 col0" >0.00</td>
      <td id="T_91fc8_row3_col1" class="data row3 col1" >0.00</td>
      <td id="T_91fc8_row3_col2" class="data row3 col2" >0.00</td>
      <td id="T_91fc8_row3_col3" class="data row3 col3" >0.00</td>
      <td id="T_91fc8_row3_col4" class="data row3 col4" >0.00</td>
      <td id="T_91fc8_row3_col5" class="data row3 col5" >0.00</td>
      <td id="T_91fc8_row3_col6" class="data row3 col6" >0.00</td>
      <td id="T_91fc8_row3_col7" class="data row3 col7" >0.00</td>
      <td id="T_91fc8_row3_col8" class="data row3 col8" >0.00</td>
      <td id="T_91fc8_row3_col9" class="data row3 col9" >0.00</td>
      <td id="T_91fc8_row3_col10" class="data row3 col10" >-50.07</td>
      <td id="T_91fc8_row3_col11" class="data row3 col11" >-50.07</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row4" class="row_heading level0 row4" >化肥行业</th>
      <td id="T_91fc8_row4_col0" class="data row4 col0" >0.00</td>
      <td id="T_91fc8_row4_col1" class="data row4 col1" >0.00</td>
      <td id="T_91fc8_row4_col2" class="data row4 col2" >-0.13</td>
      <td id="T_91fc8_row4_col3" class="data row4 col3" >0.00</td>
      <td id="T_91fc8_row4_col4" class="data row4 col4" >-3.04</td>
      <td id="T_91fc8_row4_col5" class="data row4 col5" >-1.22</td>
      <td id="T_91fc8_row4_col6" class="data row4 col6" >0.00</td>
      <td id="T_91fc8_row4_col7" class="data row4 col7" >-43.88</td>
      <td id="T_91fc8_row4_col8" class="data row4 col8" >0.00</td>
      <td id="T_91fc8_row4_col9" class="data row4 col9" >0.00</td>
      <td id="T_91fc8_row4_col10" class="data row4 col10" >0.00</td>
      <td id="T_91fc8_row4_col11" class="data row4 col11" >-48.27</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row5" class="row_heading level0 row5" >商业百货</th>
      <td id="T_91fc8_row5_col0" class="data row5 col0" >0.00</td>
      <td id="T_91fc8_row5_col1" class="data row5 col1" >0.00</td>
      <td id="T_91fc8_row5_col2" class="data row5 col2" >0.00</td>
      <td id="T_91fc8_row5_col3" class="data row5 col3" >0.00</td>
      <td id="T_91fc8_row5_col4" class="data row5 col4" >0.00</td>
      <td id="T_91fc8_row5_col5" class="data row5 col5" >0.00</td>
      <td id="T_91fc8_row5_col6" class="data row5 col6" >0.00</td>
      <td id="T_91fc8_row5_col7" class="data row5 col7" >0.00</td>
      <td id="T_91fc8_row5_col8" class="data row5 col8" >0.00</td>
      <td id="T_91fc8_row5_col9" class="data row5 col9" >-30.26</td>
      <td id="T_91fc8_row5_col10" class="data row5 col10" >-16.31</td>
      <td id="T_91fc8_row5_col11" class="data row5 col11" >-46.57</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row6" class="row_heading level0 row6" >农牧饲渔</th>
      <td id="T_91fc8_row6_col0" class="data row6 col0" >0.00</td>
      <td id="T_91fc8_row6_col1" class="data row6 col1" >0.00</td>
      <td id="T_91fc8_row6_col2" class="data row6 col2" >0.00</td>
      <td id="T_91fc8_row6_col3" class="data row6 col3" >0.00</td>
      <td id="T_91fc8_row6_col4" class="data row6 col4" >0.00</td>
      <td id="T_91fc8_row6_col5" class="data row6 col5" >0.00</td>
      <td id="T_91fc8_row6_col6" class="data row6 col6" >0.00</td>
      <td id="T_91fc8_row6_col7" class="data row6 col7" >0.00</td>
      <td id="T_91fc8_row6_col8" class="data row6 col8" >0.00</td>
      <td id="T_91fc8_row6_col9" class="data row6 col9" >-43.18</td>
      <td id="T_91fc8_row6_col10" class="data row6 col10" >0.00</td>
      <td id="T_91fc8_row6_col11" class="data row6 col11" >-43.18</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row7" class="row_heading level0 row7" >采掘行业</th>
      <td id="T_91fc8_row7_col0" class="data row7 col0" >0.00</td>
      <td id="T_91fc8_row7_col1" class="data row7 col1" >0.00</td>
      <td id="T_91fc8_row7_col2" class="data row7 col2" >0.00</td>
      <td id="T_91fc8_row7_col3" class="data row7 col3" >0.00</td>
      <td id="T_91fc8_row7_col4" class="data row7 col4" >-23.12</td>
      <td id="T_91fc8_row7_col5" class="data row7 col5" >-7.47</td>
      <td id="T_91fc8_row7_col6" class="data row7 col6" >0.00</td>
      <td id="T_91fc8_row7_col7" class="data row7 col7" >0.00</td>
      <td id="T_91fc8_row7_col8" class="data row7 col8" >0.00</td>
      <td id="T_91fc8_row7_col9" class="data row7 col9" >0.00</td>
      <td id="T_91fc8_row7_col10" class="data row7 col10" >0.00</td>
      <td id="T_91fc8_row7_col11" class="data row7 col11" >-30.59</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row8" class="row_heading level0 row8" >装修装饰</th>
      <td id="T_91fc8_row8_col0" class="data row8 col0" >0.00</td>
      <td id="T_91fc8_row8_col1" class="data row8 col1" >0.00</td>
      <td id="T_91fc8_row8_col2" class="data row8 col2" >0.00</td>
      <td id="T_91fc8_row8_col3" class="data row8 col3" >0.00</td>
      <td id="T_91fc8_row8_col4" class="data row8 col4" >0.00</td>
      <td id="T_91fc8_row8_col5" class="data row8 col5" >0.00</td>
      <td id="T_91fc8_row8_col6" class="data row8 col6" >0.00</td>
      <td id="T_91fc8_row8_col7" class="data row8 col7" >0.00</td>
      <td id="T_91fc8_row8_col8" class="data row8 col8" >0.00</td>
      <td id="T_91fc8_row8_col9" class="data row8 col9" >-18.73</td>
      <td id="T_91fc8_row8_col10" class="data row8 col10" >-8.08</td>
      <td id="T_91fc8_row8_col11" class="data row8 col11" >-26.82</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row9" class="row_heading level0 row9" >房地产服务</th>
      <td id="T_91fc8_row9_col0" class="data row9 col0" >0.00</td>
      <td id="T_91fc8_row9_col1" class="data row9 col1" >0.00</td>
      <td id="T_91fc8_row9_col2" class="data row9 col2" >0.00</td>
      <td id="T_91fc8_row9_col3" class="data row9 col3" >0.00</td>
      <td id="T_91fc8_row9_col4" class="data row9 col4" >0.00</td>
      <td id="T_91fc8_row9_col5" class="data row9 col5" >0.00</td>
      <td id="T_91fc8_row9_col6" class="data row9 col6" >0.00</td>
      <td id="T_91fc8_row9_col7" class="data row9 col7" >0.00</td>
      <td id="T_91fc8_row9_col8" class="data row9 col8" >0.00</td>
      <td id="T_91fc8_row9_col9" class="data row9 col9" >-6.49</td>
      <td id="T_91fc8_row9_col10" class="data row9 col10" >-18.42</td>
      <td id="T_91fc8_row9_col11" class="data row9 col11" >-24.91</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row10" class="row_heading level0 row10" >教育</th>
      <td id="T_91fc8_row10_col0" class="data row10 col0" >0.00</td>
      <td id="T_91fc8_row10_col1" class="data row10 col1" >0.00</td>
      <td id="T_91fc8_row10_col2" class="data row10 col2" >0.00</td>
      <td id="T_91fc8_row10_col3" class="data row10 col3" >0.00</td>
      <td id="T_91fc8_row10_col4" class="data row10 col4" >0.00</td>
      <td id="T_91fc8_row10_col5" class="data row10 col5" >0.00</td>
      <td id="T_91fc8_row10_col6" class="data row10 col6" >-2.60</td>
      <td id="T_91fc8_row10_col7" class="data row10 col7" >0.00</td>
      <td id="T_91fc8_row10_col8" class="data row10 col8" >-2.09</td>
      <td id="T_91fc8_row10_col9" class="data row10 col9" >-5.48</td>
      <td id="T_91fc8_row10_col10" class="data row10 col10" >-2.05</td>
      <td id="T_91fc8_row10_col11" class="data row10 col11" >-12.22</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row11" class="row_heading level0 row11" >有色金属</th>
      <td id="T_91fc8_row11_col0" class="data row11 col0" >-0.76</td>
      <td id="T_91fc8_row11_col1" class="data row11 col1" >0.00</td>
      <td id="T_91fc8_row11_col2" class="data row11 col2" >-7.92</td>
      <td id="T_91fc8_row11_col3" class="data row11 col3" >0.00</td>
      <td id="T_91fc8_row11_col4" class="data row11 col4" >0.00</td>
      <td id="T_91fc8_row11_col5" class="data row11 col5" >0.00</td>
      <td id="T_91fc8_row11_col6" class="data row11 col6" >-0.85</td>
      <td id="T_91fc8_row11_col7" class="data row11 col7" >0.00</td>
      <td id="T_91fc8_row11_col8" class="data row11 col8" >0.00</td>
      <td id="T_91fc8_row11_col9" class="data row11 col9" >0.00</td>
      <td id="T_91fc8_row11_col10" class="data row11 col10" >0.00</td>
      <td id="T_91fc8_row11_col11" class="data row11 col11" >-9.53</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row12" class="row_heading level0 row12" >光伏设备</th>
      <td id="T_91fc8_row12_col0" class="data row12 col0" >-4.65</td>
      <td id="T_91fc8_row12_col1" class="data row12 col1" >-2.69</td>
      <td id="T_91fc8_row12_col2" class="data row12 col2" >0.00</td>
      <td id="T_91fc8_row12_col3" class="data row12 col3" >0.00</td>
      <td id="T_91fc8_row12_col4" class="data row12 col4" >0.00</td>
      <td id="T_91fc8_row12_col5" class="data row12 col5" >0.00</td>
      <td id="T_91fc8_row12_col6" class="data row12 col6" >0.00</td>
      <td id="T_91fc8_row12_col7" class="data row12 col7" >0.00</td>
      <td id="T_91fc8_row12_col8" class="data row12 col8" >0.00</td>
      <td id="T_91fc8_row12_col9" class="data row12 col9" >0.00</td>
      <td id="T_91fc8_row12_col10" class="data row12 col10" >0.00</td>
      <td id="T_91fc8_row12_col11" class="data row12 col11" >-7.34</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row13" class="row_heading level0 row13" >煤炭行业</th>
      <td id="T_91fc8_row13_col0" class="data row13 col0" >0.00</td>
      <td id="T_91fc8_row13_col1" class="data row13 col1" >0.00</td>
      <td id="T_91fc8_row13_col2" class="data row13 col2" >0.00</td>
      <td id="T_91fc8_row13_col3" class="data row13 col3" >-5.43</td>
      <td id="T_91fc8_row13_col4" class="data row13 col4" >0.00</td>
      <td id="T_91fc8_row13_col5" class="data row13 col5" >0.00</td>
      <td id="T_91fc8_row13_col6" class="data row13 col6" >0.00</td>
      <td id="T_91fc8_row13_col7" class="data row13 col7" >0.00</td>
      <td id="T_91fc8_row13_col8" class="data row13 col8" >0.00</td>
      <td id="T_91fc8_row13_col9" class="data row13 col9" >0.00</td>
      <td id="T_91fc8_row13_col10" class="data row13 col10" >0.00</td>
      <td id="T_91fc8_row13_col11" class="data row13 col11" >-5.43</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row14" class="row_heading level0 row14" >电源设备</th>
      <td id="T_91fc8_row14_col0" class="data row14 col0" >0.00</td>
      <td id="T_91fc8_row14_col1" class="data row14 col1" >0.00</td>
      <td id="T_91fc8_row14_col2" class="data row14 col2" >0.00</td>
      <td id="T_91fc8_row14_col3" class="data row14 col3" >0.00</td>
      <td id="T_91fc8_row14_col4" class="data row14 col4" >0.00</td>
      <td id="T_91fc8_row14_col5" class="data row14 col5" >0.00</td>
      <td id="T_91fc8_row14_col6" class="data row14 col6" >0.00</td>
      <td id="T_91fc8_row14_col7" class="data row14 col7" >0.00</td>
      <td id="T_91fc8_row14_col8" class="data row14 col8" >0.00</td>
      <td id="T_91fc8_row14_col9" class="data row14 col9" >-5.19</td>
      <td id="T_91fc8_row14_col10" class="data row14 col10" >0.00</td>
      <td id="T_91fc8_row14_col11" class="data row14 col11" >-5.19</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row15" class="row_heading level0 row15" >船舶制造</th>
      <td id="T_91fc8_row15_col0" class="data row15 col0" >0.00</td>
      <td id="T_91fc8_row15_col1" class="data row15 col1" >0.00</td>
      <td id="T_91fc8_row15_col2" class="data row15 col2" >0.00</td>
      <td id="T_91fc8_row15_col3" class="data row15 col3" >-1.02</td>
      <td id="T_91fc8_row15_col4" class="data row15 col4" >-0.35</td>
      <td id="T_91fc8_row15_col5" class="data row15 col5" >0.00</td>
      <td id="T_91fc8_row15_col6" class="data row15 col6" >-0.80</td>
      <td id="T_91fc8_row15_col7" class="data row15 col7" >0.00</td>
      <td id="T_91fc8_row15_col8" class="data row15 col8" >0.00</td>
      <td id="T_91fc8_row15_col9" class="data row15 col9" >-0.00</td>
      <td id="T_91fc8_row15_col10" class="data row15 col10" >-2.65</td>
      <td id="T_91fc8_row15_col11" class="data row15 col11" >-4.82</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row16" class="row_heading level0 row16" >能源金属</th>
      <td id="T_91fc8_row16_col0" class="data row16 col0" >0.00</td>
      <td id="T_91fc8_row16_col1" class="data row16 col1" >0.00</td>
      <td id="T_91fc8_row16_col2" class="data row16 col2" >0.00</td>
      <td id="T_91fc8_row16_col3" class="data row16 col3" >0.00</td>
      <td id="T_91fc8_row16_col4" class="data row16 col4" >0.00</td>
      <td id="T_91fc8_row16_col5" class="data row16 col5" >0.00</td>
      <td id="T_91fc8_row16_col6" class="data row16 col6" >0.00</td>
      <td id="T_91fc8_row16_col7" class="data row16 col7" >-4.59</td>
      <td id="T_91fc8_row16_col8" class="data row16 col8" >0.00</td>
      <td id="T_91fc8_row16_col9" class="data row16 col9" >0.00</td>
      <td id="T_91fc8_row16_col10" class="data row16 col10" >0.00</td>
      <td id="T_91fc8_row16_col11" class="data row16 col11" >-4.59</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row17" class="row_heading level0 row17" >电机</th>
      <td id="T_91fc8_row17_col0" class="data row17 col0" >0.00</td>
      <td id="T_91fc8_row17_col1" class="data row17 col1" >0.00</td>
      <td id="T_91fc8_row17_col2" class="data row17 col2" >0.00</td>
      <td id="T_91fc8_row17_col3" class="data row17 col3" >0.00</td>
      <td id="T_91fc8_row17_col4" class="data row17 col4" >0.00</td>
      <td id="T_91fc8_row17_col5" class="data row17 col5" >0.00</td>
      <td id="T_91fc8_row17_col6" class="data row17 col6" >-4.15</td>
      <td id="T_91fc8_row17_col7" class="data row17 col7" >-0.30</td>
      <td id="T_91fc8_row17_col8" class="data row17 col8" >0.00</td>
      <td id="T_91fc8_row17_col9" class="data row17 col9" >0.00</td>
      <td id="T_91fc8_row17_col10" class="data row17 col10" >0.00</td>
      <td id="T_91fc8_row17_col11" class="data row17 col11" >-4.45</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row18" class="row_heading level0 row18" >中药</th>
      <td id="T_91fc8_row18_col0" class="data row18 col0" >0.00</td>
      <td id="T_91fc8_row18_col1" class="data row18 col1" >0.00</td>
      <td id="T_91fc8_row18_col2" class="data row18 col2" >0.00</td>
      <td id="T_91fc8_row18_col3" class="data row18 col3" >0.00</td>
      <td id="T_91fc8_row18_col4" class="data row18 col4" >0.00</td>
      <td id="T_91fc8_row18_col5" class="data row18 col5" >0.00</td>
      <td id="T_91fc8_row18_col6" class="data row18 col6" >0.00</td>
      <td id="T_91fc8_row18_col7" class="data row18 col7" >0.00</td>
      <td id="T_91fc8_row18_col8" class="data row18 col8" >-3.51</td>
      <td id="T_91fc8_row18_col9" class="data row18 col9" >0.00</td>
      <td id="T_91fc8_row18_col10" class="data row18 col10" >0.00</td>
      <td id="T_91fc8_row18_col11" class="data row18 col11" >-3.51</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row19" class="row_heading level0 row19" >游戏</th>
      <td id="T_91fc8_row19_col0" class="data row19 col0" >0.00</td>
      <td id="T_91fc8_row19_col1" class="data row19 col1" >0.00</td>
      <td id="T_91fc8_row19_col2" class="data row19 col2" >0.00</td>
      <td id="T_91fc8_row19_col3" class="data row19 col3" >0.00</td>
      <td id="T_91fc8_row19_col4" class="data row19 col4" >0.00</td>
      <td id="T_91fc8_row19_col5" class="data row19 col5" >0.00</td>
      <td id="T_91fc8_row19_col6" class="data row19 col6" >0.00</td>
      <td id="T_91fc8_row19_col7" class="data row19 col7" >-1.92</td>
      <td id="T_91fc8_row19_col8" class="data row19 col8" >0.00</td>
      <td id="T_91fc8_row19_col9" class="data row19 col9" >0.00</td>
      <td id="T_91fc8_row19_col10" class="data row19 col10" >-1.29</td>
      <td id="T_91fc8_row19_col11" class="data row19 col11" >-3.21</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row20" class="row_heading level0 row20" >汽车服务</th>
      <td id="T_91fc8_row20_col0" class="data row20 col0" >0.00</td>
      <td id="T_91fc8_row20_col1" class="data row20 col1" >0.00</td>
      <td id="T_91fc8_row20_col2" class="data row20 col2" >0.00</td>
      <td id="T_91fc8_row20_col3" class="data row20 col3" >0.00</td>
      <td id="T_91fc8_row20_col4" class="data row20 col4" >0.00</td>
      <td id="T_91fc8_row20_col5" class="data row20 col5" >0.00</td>
      <td id="T_91fc8_row20_col6" class="data row20 col6" >-0.27</td>
      <td id="T_91fc8_row20_col7" class="data row20 col7" >0.00</td>
      <td id="T_91fc8_row20_col8" class="data row20 col8" >0.00</td>
      <td id="T_91fc8_row20_col9" class="data row20 col9" >0.00</td>
      <td id="T_91fc8_row20_col10" class="data row20 col10" >-2.78</td>
      <td id="T_91fc8_row20_col11" class="data row20 col11" >-3.05</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row21" class="row_heading level0 row21" >小金属</th>
      <td id="T_91fc8_row21_col0" class="data row21 col0" >0.00</td>
      <td id="T_91fc8_row21_col1" class="data row21 col1" >0.00</td>
      <td id="T_91fc8_row21_col2" class="data row21 col2" >0.00</td>
      <td id="T_91fc8_row21_col3" class="data row21 col3" >-2.89</td>
      <td id="T_91fc8_row21_col4" class="data row21 col4" >0.00</td>
      <td id="T_91fc8_row21_col5" class="data row21 col5" >0.00</td>
      <td id="T_91fc8_row21_col6" class="data row21 col6" >0.00</td>
      <td id="T_91fc8_row21_col7" class="data row21 col7" >0.00</td>
      <td id="T_91fc8_row21_col8" class="data row21 col8" >0.00</td>
      <td id="T_91fc8_row21_col9" class="data row21 col9" >0.00</td>
      <td id="T_91fc8_row21_col10" class="data row21 col10" >0.00</td>
      <td id="T_91fc8_row21_col11" class="data row21 col11" >-2.89</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row22" class="row_heading level0 row22" >光学光电子</th>
      <td id="T_91fc8_row22_col0" class="data row22 col0" >0.00</td>
      <td id="T_91fc8_row22_col1" class="data row22 col1" >0.00</td>
      <td id="T_91fc8_row22_col2" class="data row22 col2" >0.00</td>
      <td id="T_91fc8_row22_col3" class="data row22 col3" >0.00</td>
      <td id="T_91fc8_row22_col4" class="data row22 col4" >0.00</td>
      <td id="T_91fc8_row22_col5" class="data row22 col5" >0.00</td>
      <td id="T_91fc8_row22_col6" class="data row22 col6" >0.00</td>
      <td id="T_91fc8_row22_col7" class="data row22 col7" >0.00</td>
      <td id="T_91fc8_row22_col8" class="data row22 col8" >0.00</td>
      <td id="T_91fc8_row22_col9" class="data row22 col9" >0.00</td>
      <td id="T_91fc8_row22_col10" class="data row22 col10" >-2.79</td>
      <td id="T_91fc8_row22_col11" class="data row22 col11" >-2.79</td>
    </tr>
    <tr>
      <th id="T_91fc8_level0_row23" class="row_heading level0 row23" >工程机械</th>
      <td id="T_91fc8_row23_col0" class="data row23 col0" >0.00</td>
      <td id="T_91fc8_row23_col1" class="data row23 col1" >0.00</td>
      <td id="T_91fc8_row23_col2" class="data row23 col2" >0.00</td>
      <td id="T_91fc8_row23_col3" class="data row23 col3" >-1.16</td>
      <td id="T_91fc8_row23_col4" class="data row23 col4" >-1.31</td>
      <td id="T_91fc8_row23_col5" class="data row23 col5" >0.00</td>
      <td id="T_91fc8_row23_col6" class="data row23 col6" >0.00</td>
      <td id="T_91fc8_row23_col7" class="data row23 col7" >0.00</td>
      <td id="T_91fc8_row23_col8" class="data row23 col8" >0.00</td>
      <td id="T_91fc8_row23_col9" class="data row23 col9" >0.00</td>
      <td id="T_91fc8_row23_col10" class="data row23 col10" >0.00</td>
      <td id="T_91fc8_row23_col11" class="data row23 col11" >-2.46</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>2010年和2012年居然没有任何一个行业出现亏损，如日中天。</p></li>
<li><p>2021年起亏损行业的数量开始井喷，2022年亏损行业个数和金额都达到历史新高，且远超从前。</p></li>
<li><p>累计亏损金额最大的是航空机场，这个不奇怪，近三年的疫情打击惨重。</p></li>
<li><p>船舶制造亏损次数最多，重资产行业。</p></li>
<li><p>教育、房地产服务行业，明显受近期政策打压的影响很大。</p></li>
<li><p>光伏行业在十年前也曾经是亏损大户。</p></li>
<li><p>化肥行业也曾经历过较长时间的亏损。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">win_indu</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s1">&#39;profit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">wdf</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
    <span class="n">wdf</span> <span class="o">=</span> <span class="n">wdf</span><span class="p">[</span><span class="n">wdf</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">wdf_inc</span> <span class="o">=</span> <span class="n">wdf</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">all_win</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stat</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;行业总数&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span><span class="s1">&#39;保持赢利&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">wdf</span><span class="p">),</span><span class="s1">&#39;保持利润增长&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_win</span><span class="p">)}</span>

    <span class="n">win_bin</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">win_bin</span> <span class="o">=</span> <span class="n">win_bin</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;行业数&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">names</span><span class="o">=</span> <span class="s1">&#39;负增长次数&#39;</span><span class="p">)</span>
    <span class="n">plot_win_bin</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="n">win_bin</span><span class="p">,</span> <span class="s1">&#39;出现负增长情况统计&#39;</span><span class="p">,</span><span class="s1">&#39;.0f&#39;</span><span class="p">)</span>

    <span class="n">count_gp</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">plot_indu_year</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">count_gp</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;inc&#39;</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;inc:Q&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;indu&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span> <span class="n">title</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_bin</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;.0f&#39;</span><span class="p">):</span>
        <span class="c1"># 第一列是属性，对第二列bin</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bin</span><span class="p">()</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;count()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;数量&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_bin_most10</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>        
        <span class="c1"># 数据分析做条形图</span>
        <span class="c1"># 取数据的前十和后十做条形图</span>
        <span class="n">fig_bin</span> <span class="o">=</span> <span class="n">plot_bin</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">分布&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">fig1</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">plot_hbar</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">前十&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">fig2</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">plot_hbar</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">后十&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">fig_bin</span><span class="p">,</span> <span class="n">fig1</span><span class="p">,</span> <span class="n">fig2</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">plot_mean</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">plot_bin_most10</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;.0%&#39;</span><span class="p">,</span> <span class="s1">&#39;平均增长率&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plot_shapee</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">wdf_inc</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">wdf_inc</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">plot_bin_most10</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="s1">&#39;夏普指数&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">plot_win_bin</span><span class="p">,</span> <span class="n">plot_indu_year</span><span class="p">,</span> <span class="n">wdf_inc</span><span class="p">,</span> <span class="n">plot_mean</span><span class="p">(),</span> <span class="n">plot_shapee</span><span class="p">())</span>

<span class="n">indu_res</span> <span class="o">=</span> <span class="n">win_indu</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-29bdc4d6455847edb930ba7dded3a048.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-29bdc4d6455847edb930ba7dded3a048.vega-embed details,
  #altair-viz-29bdc4d6455847edb930ba7dded3a048.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-29bdc4d6455847edb930ba7dded3a048"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-29bdc4d6455847edb930ba7dded3a048") {
      outputDiv = document.getElementById("altair-viz-29bdc4d6455847edb930ba7dded3a048");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-79764589ecdc32d178b55dd4b6fdadb8"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "\u8d1f\u589e\u957f\u6b21\u6570", "type": "quantitative"}, {"field": "\u884c\u4e1a\u6570", "type": "quantitative"}], "x": {"axis": {"format": ".0f"}, "field": "\u884c\u4e1a\u6570", "type": "quantitative"}, "y": {"field": "\u8d1f\u589e\u957f\u6b21\u6570", "type": "ordinal"}}, "height": 242, "title": "\u51fa\u73b0\u8d1f\u589e\u957f\u60c5\u51b5\u7edf\u8ba1", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-79764589ecdc32d178b55dd4b6fdadb8": [{"\u8d1f\u589e\u957f\u6b21\u6570": 0, "\u884c\u4e1a\u6570": 1}, {"\u8d1f\u589e\u957f\u6b21\u6570": 1, "\u884c\u4e1a\u6570": 1}, {"\u8d1f\u589e\u957f\u6b21\u6570": 2, "\u884c\u4e1a\u6570": 4}, {"\u8d1f\u589e\u957f\u6b21\u6570": 3, "\u884c\u4e1a\u6570": 10}, {"\u8d1f\u589e\u957f\u6b21\u6570": 4, "\u884c\u4e1a\u6570": 13}, {"\u8d1f\u589e\u957f\u6b21\u6570": 5, "\u884c\u4e1a\u6570": 16}, {"\u8d1f\u589e\u957f\u6b21\u6570": 6, "\u884c\u4e1a\u6570": 11}, {"\u8d1f\u589e\u957f\u6b21\u6570": 7, "\u884c\u4e1a\u6570": 5}, {"\u8d1f\u589e\u957f\u6b21\u6570": 8, "\u884c\u4e1a\u6570": 2}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>利润增长是用行业的利润总和还是平均利润呢？两次都试了一下，结果略有差异，但总体结论类似。</p></li>
<li><p>为了减少新上市对利润增长的影响，以下就以平均值来分析一下。</p></li>
<li><p>有一个行业从来没来出现过负增长，可以说是奇迹了。</p></li>
<li><p>有一个行业在12年内出现了8次负增长，就这样个情况它还没有出现整体亏损。</p></li>
<li><p>出现4到6次负增长的行业占了大多数。持续保持利润正增长是件不容易的事，也许以后会更难。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_res</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;没有出现过负增长的行业&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-8edab458c6ae49959d3da98ffddcd88d.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-8edab458c6ae49959d3da98ffddcd88d.vega-embed details,
  #altair-viz-8edab458c6ae49959d3da98ffddcd88d.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-8edab458c6ae49959d3da98ffddcd88d"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8edab458c6ae49959d3da98ffddcd88d") {
      outputDiv = document.getElementById("altair-viz-8edab458c6ae49959d3da98ffddcd88d");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-4435a7bdc337509969309acc08fcdd1b"}, "mark": {"type": "line"}, "encoding": {"color": {"field": "indu", "legend": {"orient": "top"}, "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "inc", "type": "quantitative"}}, "title": "\u6ca1\u6709\u51fa\u73b0\u8fc7\u8d1f\u589e\u957f\u7684\u884c\u4e1a", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-4435a7bdc337509969309acc08fcdd1b": [{"indu": "\u94f6\u884c", "year": "2011", "inc": 0.21701017522722887}, {"indu": "\u94f6\u884c", "year": "2012", "inc": 0.17945604960711714}, {"indu": "\u94f6\u884c", "year": "2013", "inc": 0.12707255135362194}, {"indu": "\u94f6\u884c", "year": "2014", "inc": 0.07918386294256541}, {"indu": "\u94f6\u884c", "year": "2015", "inc": 0.024385438309078022}, {"indu": "\u94f6\u884c", "year": "2016", "inc": 0.026053928809979476}, {"indu": "\u94f6\u884c", "year": "2017", "inc": 0.05518082173378902}, {"indu": "\u94f6\u884c", "year": "2018", "inc": 0.056952708591342605}, {"indu": "\u94f6\u884c", "year": "2019", "inc": 0.06955326291354114}, {"indu": "\u94f6\u884c", "year": "2020", "inc": 0.006600198223496223}, {"indu": "\u94f6\u884c", "year": "2021", "inc": 0.12639458334843123}, {"indu": "\u94f6\u884c", "year": "2022", "inc": 0.07594424561667101}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>银行业在2020年险些失身到到利润下降，但后两年神奇地回到了历史高位。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_res</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;只出现过一次负增长的行业&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-0ea85ce98673491e8f5e647dcee9aa0f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-0ea85ce98673491e8f5e647dcee9aa0f.vega-embed details,
  #altair-viz-0ea85ce98673491e8f5e647dcee9aa0f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-0ea85ce98673491e8f5e647dcee9aa0f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0ea85ce98673491e8f5e647dcee9aa0f") {
      outputDiv = document.getElementById("altair-viz-0ea85ce98673491e8f5e647dcee9aa0f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-f05fb6cddcc40d0a8c238ef288f652c7"}, "mark": {"type": "line"}, "encoding": {"color": {"field": "indu", "legend": {"orient": "top"}, "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "inc", "type": "quantitative"}}, "title": "\u53ea\u51fa\u73b0\u8fc7\u4e00\u6b21\u8d1f\u589e\u957f\u7684\u884c\u4e1a", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-f05fb6cddcc40d0a8c238ef288f652c7": [{"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2011", "inc": 0.0109499049612376}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2012", "inc": -0.1754390490511677}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2013", "inc": 0.30988065245854357}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2014", "inc": 0.1299381891383784}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2015", "inc": 0.10992785167747421}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2016", "inc": 0.07658151985017825}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2017", "inc": 0.1051821253365528}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2018", "inc": 0.0625922644657928}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2019", "inc": 0.11468759505972703}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2020", "inc": 0.05696376744508114}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2021", "inc": 0.14136855180775143}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "year": "2022", "inc": 0.06844837868954512}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>工程建设行业，2012年出现一次负增长，此后一直保持增长，但总趋势是下降的。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_res</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;只出现过两次负增长的行业&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-dba0083bf6e248e89ba057086176f273.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-dba0083bf6e248e89ba057086176f273.vega-embed details,
  #altair-viz-dba0083bf6e248e89ba057086176f273.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-dba0083bf6e248e89ba057086176f273"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-dba0083bf6e248e89ba057086176f273") {
      outputDiv = document.getElementById("altair-viz-dba0083bf6e248e89ba057086176f273");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-b88cf964b6f3164078cfb79d6149e39f"}, "mark": {"type": "line"}, "encoding": {"color": {"field": "indu", "legend": {"orient": "top"}, "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "inc", "type": "quantitative"}}, "title": "\u53ea\u51fa\u73b0\u8fc7\u4e24\u6b21\u8d1f\u589e\u957f\u7684\u884c\u4e1a", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-b88cf964b6f3164078cfb79d6149e39f": [{"indu": "\u533b\u7597\u5668\u68b0", "year": "2011", "inc": -0.004635551182687214}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2011", "inc": 0.05598917181783425}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2011", "inc": 0.33800819741471866}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2011", "inc": 0.321471983739118}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2012", "inc": -0.005016419407588013}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2012", "inc": 0.07510319024745682}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2012", "inc": 0.01158783975437605}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2012", "inc": 0.4255537731846004}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2013", "inc": 0.023403604216148066}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2013", "inc": 0.013406832103265875}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2013", "inc": 0.021461079690788587}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2013", "inc": -0.11045047783239148}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2014", "inc": 0.3978346594019828}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2014", "inc": 0.20772528330323126}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2014", "inc": -0.08303717652526643}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2014", "inc": -0.1402257241347865}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2015", "inc": 0.01768298949267999}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2015", "inc": 0.1672955883615932}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2015", "inc": 1.7678883191885748}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2015", "inc": 0.07653943211784409}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2016", "inc": 0.058656257306511694}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2016", "inc": 0.3572530258698201}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2016", "inc": 0.06972680474782922}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2016", "inc": 0.04978525670534317}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2017", "inc": 0.024161598777052706}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2017", "inc": 0.277004794045167}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2017", "inc": 0.13071206901225718}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2017", "inc": 0.43088656612913967}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2018", "inc": 0.3009153464354939}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2018", "inc": 0.0018191669013687406}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2018", "inc": -0.352316092094934}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2018", "inc": 0.2783941208901044}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2019", "inc": 0.18305972630113243}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2019", "inc": -0.06460773105264561}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2019", "inc": 0.6724292000680405}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2019", "inc": 0.18982875911229846}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2020", "inc": 1.7832971703492655}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2020", "inc": 0.1460942292923484}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2020", "inc": 0.34591707601121535}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2020", "inc": 0.11555322837352544}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2021", "inc": 0.1810270487568264}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2021", "inc": 0.04638871964114766}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2021", "inc": 0.013909293863289207}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2021", "inc": 0.1795572395658973}, {"indu": "\u533b\u7597\u5668\u68b0", "year": "2022", "inc": 0.20328795951808432}, {"indu": "\u533b\u836f\u5546\u4e1a", "year": "2022", "inc": -0.0835724902120043}, {"indu": "\u6d88\u8d39\u7535\u5b50", "year": "2022", "inc": 0.05196729060483052}, {"indu": "\u917f\u9152\u884c\u4e1a", "year": "2022", "inc": 0.18963275895975062}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>消费电子和医疗器械大起大落。</p></li>
<li><p>医药商业和酿酒行业比较平稳。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_res</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;负增长次数最多的行业&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-0ec402571da44f20b3cc9947b80fedce.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-0ec402571da44f20b3cc9947b80fedce.vega-embed details,
  #altair-viz-0ec402571da44f20b3cc9947b80fedce.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-0ec402571da44f20b3cc9947b80fedce"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0ec402571da44f20b3cc9947b80fedce") {
      outputDiv = document.getElementById("altair-viz-0ec402571da44f20b3cc9947b80fedce");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-4e583ae08db774102d466d895a66f555"}, "mark": {"type": "line"}, "encoding": {"color": {"field": "indu", "legend": {"orient": "top"}, "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "inc", "type": "quantitative"}}, "title": "\u8d1f\u589e\u957f\u6b21\u6570\u6700\u591a\u7684\u884c\u4e1a", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-4e583ae08db774102d466d895a66f555": [{"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2011", "inc": -0.028541372855717673}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2011", "inc": -0.09848973477987533}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2012", "inc": -0.2088781209211923}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2012", "inc": -0.3820989690556623}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2013", "inc": 0.1460768944956552}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2013", "inc": -0.01121294340625234}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2014", "inc": 0.13805690494964362}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2014", "inc": 0.04833853888340611}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2015", "inc": 0.01245364948608585}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2015", "inc": -0.24297507851285327}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2016", "inc": -0.010765956040320379}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2016", "inc": -0.19648719131539605}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2017", "inc": -0.04550335523294047}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2017", "inc": 0.6074641579488724}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2018", "inc": -0.020024876118688084}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2018", "inc": -0.3086648648587551}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2019", "inc": -0.13881856218288946}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2019", "inc": -0.7404398115581571}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2020", "inc": -0.15068517540628534}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2020", "inc": 7.197245976881611}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2021", "inc": 0.2834381805693884}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2021", "inc": -0.0031923667202353734}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "year": "2022", "inc": -0.3179837821521404}, {"indu": "\u901a\u7528\u8bbe\u5907", "year": "2022", "inc": 0.06111991318447618}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>通用设备这个太妖了，以至于坐标轴都不好弄了，2020年利润涨了7倍多？</p></li>
<li><p>纺织服装乏力，应该是可以理解的。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_res</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;出现7次负增长的行业&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-6d9ad3a3ac7a4d3086fbe7efcb50e510.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-6d9ad3a3ac7a4d3086fbe7efcb50e510.vega-embed details,
  #altair-viz-6d9ad3a3ac7a4d3086fbe7efcb50e510.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-6d9ad3a3ac7a4d3086fbe7efcb50e510"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6d9ad3a3ac7a4d3086fbe7efcb50e510") {
      outputDiv = document.getElementById("altair-viz-6d9ad3a3ac7a4d3086fbe7efcb50e510");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-b5fc7240fd070d4e17823fabf15b59a0"}, "mark": {"type": "line"}, "encoding": {"color": {"field": "indu", "legend": {"orient": "top"}, "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "inc", "type": "quantitative"}}, "title": "\u51fa\u73b07\u6b21\u8d1f\u589e\u957f\u7684\u884c\u4e1a", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-b5fc7240fd070d4e17823fabf15b59a0": [{"indu": "\u5305\u88c5\u6750\u6599", "year": "2011", "inc": -0.158402021841608}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2011", "inc": -0.08634834084056142}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2011", "inc": -0.09891944177986589}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2011", "inc": -0.02832382648871201}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2011", "inc": -0.09063175984642957}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2012", "inc": -0.1774726781842325}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2012", "inc": -0.28396647154048094}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2012", "inc": -0.30277420499055907}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2012", "inc": -0.10761911768938515}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2012", "inc": -0.18954678758967636}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2013", "inc": -0.11884863745043162}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2013", "inc": -0.15937503727439062}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2013", "inc": -0.03780227512732415}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2013", "inc": -0.03103272459434403}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2013", "inc": 0.11824821985100309}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2014", "inc": 0.41181793015913737}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2014", "inc": -0.05786083727398128}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2014", "inc": 0.14912833927673175}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2014", "inc": -0.12205218059424783}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2014", "inc": -0.2664960040252947}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2015", "inc": 0.07739109014738954}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2015", "inc": 0.19124576026258433}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2015", "inc": -0.07529065025276604}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2015", "inc": 0.4224745388093867}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2015", "inc": -0.5281896317403814}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2016", "inc": -0.062090780278438396}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2016", "inc": 0.226814248166598}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2016", "inc": 0.24605190149190537}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2016", "inc": 0.3524506167247683}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2016", "inc": -0.12697938778135742}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2017", "inc": 0.09329994892322002}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2017", "inc": -0.11857559666817474}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2017", "inc": 0.22385966480750197}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2017", "inc": 0.11522076697903416}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2017", "inc": 0.32794435477417516}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2018", "inc": -0.22891216058081676}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2018", "inc": 0.1870329171900431}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2018", "inc": -0.1195798963769491}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2018", "inc": 0.04187908011008634}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2018", "inc": 1.0160671720030692}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2019", "inc": 0.336401781667087}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2019", "inc": 0.12849520144350612}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2019", "inc": -0.3513410002642211}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2019", "inc": -0.2673030735023947}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2019", "inc": -0.044325745465731536}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2020", "inc": -0.03693209592455848}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2020", "inc": 0.4739090240580146}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2020", "inc": 0.3934265443667835}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2020", "inc": 0.424415478088249}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2020", "inc": -0.5380227298474642}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2021", "inc": 0.09969978420915804}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2021", "inc": -0.03881893768570688}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2021", "inc": 0.021508605370237355}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2021", "inc": -0.006159608513265136}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2021", "inc": 2.063428595036001}, {"indu": "\u5305\u88c5\u6750\u6599", "year": "2022", "inc": -0.4827199694073758}, {"indu": "\u5851\u6599\u5236\u54c1", "year": "2022", "inc": -0.07740746497910977}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "year": "2022", "inc": -0.08405480720450265}, {"indu": "\u7269\u6d41\u884c\u4e1a", "year": "2022", "inc": -0.07392342695269183}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "year": "2022", "inc": 0.5124454238808911}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>石油行业，可以理解，总体肯定是向下走的。</p></li>
<li><p>有过两次超50%的利润下滑，也有在2021年利润翻两倍的高光时刻。</p></li>
<li><p>石油行业11年里，利润负增长了7次，但还没有出现过亏损，利润其实还不错。垄断行业的好处。</p></li>
<li><p>物流行业利润负增长这么多次不太好理解。</p></li>
</ul>
<ul class="simple">
<li><p>每年都上榜的有6家，全是银行。而且，工商银行每年都是冠军。</p></li>
<li><p>上榜的共有19家公司，银行占了11家，如果把平安和人寿算进去，金融占了13家。</p></li>
<li><p>4家资源性公司，三桶油加一个煤炭。</p></li>
<li><p>1家交通运输企业，中远海控。应该就是2021年疫情上的榜。世事无常，它还曾夺过亏损冠军。</p></li>
<li><p>1家高科技企业，中国移动。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indu_res</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
    <span class="n">display</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-715696a7db754817b8510a8f774d9f28.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-715696a7db754817b8510a8f774d9f28.vega-embed details,
  #altair-viz-715696a7db754817b8510a8f774d9f28.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-715696a7db754817b8510a8f774d9f28"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-715696a7db754817b8510a8f774d9f28") {
      outputDiv = document.getElementById("altair-viz-715696a7db754817b8510a8f774d9f28");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-2e4b849d2288bca0f81ca6487b1ee41b"}, "mark": {"type": "bar"}, "encoding": {"x": {"aggregate": "count", "axis": {"title": "\u6570\u91cf"}, "type": "quantitative"}, "y": {"axis": {"format": ".0%"}, "bin": {}, "field": "mean", "type": "quantitative"}}, "title": "\u5e73\u5747\u589e\u957f\u7387\u5206\u5e03", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-2e4b849d2288bca0f81ca6487b1ee41b": [{"indu": "\u6587\u5316\u4f20\u5a92", "mean": 4.643903160275292}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "mean": 3.0045641571744466}, {"indu": "\u8d38\u6613\u884c\u4e1a", "mean": 1.4792095742446134}, {"indu": "\u533b\u7597\u670d\u52a1", "mean": 1.2170642920032562}, {"indu": "\u5316\u7ea4\u884c\u4e1a", "mean": 1.1370238699720945}, {"indu": "\u65c5\u6e38\u9152\u5e97", "mean": 1.0882444006784622}, {"indu": "\u901a\u4fe1\u670d\u52a1", "mean": 0.7376968369934503}, {"indu": "\u7efc\u5408\u884c\u4e1a", "mean": 0.6485658841201856}, {"indu": "\u751f\u7269\u5236\u54c1", "mean": 0.5098765479485091}, {"indu": "\u901a\u7528\u8bbe\u5907", "mean": 0.49421730222426485}, {"indu": "\u7535\u6c60", "mean": 0.38359640909554277}, {"indu": "\u975e\u91d1\u5c5e\u6750\u6599", "mean": 0.3233321226657493}, {"indu": "\u5316\u5b66\u539f\u6599", "mean": 0.2861689415768533}, {"indu": "\u534a\u5bfc\u4f53", "mean": 0.27768982196650843}, {"indu": "\u4e13\u7528\u8bbe\u5907", "mean": 0.27156714124320924}, {"indu": "\u533b\u7597\u5668\u68b0", "mean": 0.2636395324970752}, {"indu": "\u8d35\u91d1\u5c5e", "mean": 0.255841394178828}, {"indu": "\u6d88\u8d39\u7535\u5b50", "mean": 0.24902115847797668}, {"indu": "\u8bc1\u5238", "mean": 0.20331787372609664}, {"indu": "\u519c\u836f\u517d\u836f", "mean": 0.19432688189050795}, {"indu": "\u98ce\u7535\u8bbe\u5907", "mean": 0.18989586223843183}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "mean": 0.187828476604067}, {"indu": "\u6c34\u6ce5\u5efa\u6750", "mean": 0.1856224364308279}, {"indu": "\u4e92\u8054\u7f51\u670d\u52a1", "mean": 0.17293071787968683}, {"indu": "\u917f\u9152\u884c\u4e1a", "mean": 0.1672105764008703}, {"indu": "\u901a\u4fe1\u8bbe\u5907", "mean": 0.15869121012201357}, {"indu": "\u7535\u7f51\u8bbe\u5907", "mean": 0.14406464865082688}, {"indu": "\u5316\u5b66\u5236\u54c1", "mean": 0.14386457250259915}, {"indu": "\u73bb\u7483\u73bb\u7ea4", "mean": 0.14172726752939205}, {"indu": "\u73e0\u5b9d\u9996\u9970", "mean": 0.13984064577937683}, {"indu": "\u71c3\u6c14", "mean": 0.13215254567703566}, {"indu": "\u4fdd\u9669", "mean": 0.12630983076634233}, {"indu": "\u7535\u529b\u884c\u4e1a", "mean": 0.124627980874025}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "mean": 0.12370561355188613}, {"indu": "\u9020\u7eb8\u5370\u5237", "mean": 0.12343386136320289}, {"indu": "\u7f8e\u5bb9\u62a4\u7406", "mean": 0.12131638264595151}, {"indu": "\u4eea\u5668\u4eea\u8868", "mean": 0.11708659161663758}, {"indu": "\u591a\u5143\u91d1\u878d", "mean": 0.11572284842743326}, {"indu": "\u6a61\u80f6\u5236\u54c1", "mean": 0.11525600284837197}, {"indu": "\u98df\u54c1\u996e\u6599", "mean": 0.11518359807943014}, {"indu": "\u7535\u5b50\u5143\u4ef6", "mean": 0.1137136316386181}, {"indu": "\u5bb6\u7535\u884c\u4e1a", "mean": 0.10866861284833236}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "mean": 0.1079084610810513}, {"indu": "\u822a\u5929\u822a\u7a7a", "mean": 0.10196246319397707}, {"indu": "\u8ba1\u7b97\u673a\u8bbe\u5907", "mean": 0.10144735093114242}, {"indu": "\u533b\u836f\u5546\u4e1a", "mean": 0.09999164835988195}, {"indu": "\u88c5\u4fee\u5efa\u6750", "mean": 0.09523320891872562}, {"indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "mean": 0.09379199717174182}, {"indu": "\u94f6\u884c", "mean": 0.08698231888973851}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "mean": 0.08425681265325789}, {"indu": "\u4ea4\u8fd0\u8bbe\u5907", "mean": 0.08359155836122273}, {"indu": "\u5bb6\u7528\u8f7b\u5de5", "mean": 0.07865819832898606}, {"indu": "\u94c1\u8def\u516c\u8def", "mean": 0.07094416337292857}, {"indu": "\u516c\u7528\u4e8b\u4e1a", "mean": 0.06285159453712895}, {"indu": "\u7269\u6d41\u884c\u4e1a", "mean": 0.060002210198040314}, {"indu": "\u5316\u5b66\u5236\u836f", "mean": 0.048838712378844316}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "mean": 0.042744845066597675}, {"indu": "\u5851\u6599\u5236\u54c1", "mean": 0.03209537207152838}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "mean": 0.008187003824931269}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "mean": -0.0029822683902523406}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "mean": -0.014129761628410379}, {"indu": "\u5305\u88c5\u6750\u6599", "mean": -0.020563984046789135}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "mean": -0.028431297617450085}]}}, {"mode": "vega-lite"});
</script></div><div class="output text_html">
<style>
  #altair-viz-53ca26bf8a17414f8734dfcac5560b22.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-53ca26bf8a17414f8734dfcac5560b22.vega-embed details,
  #altair-viz-53ca26bf8a17414f8734dfcac5560b22.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-53ca26bf8a17414f8734dfcac5560b22"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-53ca26bf8a17414f8734dfcac5560b22") {
      outputDiv = document.getElementById("altair-viz-53ca26bf8a17414f8734dfcac5560b22");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-31c77dfa1e174ed80badad45eddb34f1"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "mean", "type": "quantitative"}], "x": {"axis": {"format": ".0%"}, "field": "mean", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "\u5e73\u5747\u589e\u957f\u7387\u524d\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-31c77dfa1e174ed80badad45eddb34f1": [{"indu": "\u6587\u5316\u4f20\u5a92", "mean": 4.643903160275292}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "mean": 3.0045641571744466}, {"indu": "\u8d38\u6613\u884c\u4e1a", "mean": 1.4792095742446134}, {"indu": "\u533b\u7597\u670d\u52a1", "mean": 1.2170642920032562}, {"indu": "\u5316\u7ea4\u884c\u4e1a", "mean": 1.1370238699720945}, {"indu": "\u65c5\u6e38\u9152\u5e97", "mean": 1.0882444006784622}, {"indu": "\u901a\u4fe1\u670d\u52a1", "mean": 0.7376968369934503}, {"indu": "\u7efc\u5408\u884c\u4e1a", "mean": 0.6485658841201856}, {"indu": "\u751f\u7269\u5236\u54c1", "mean": 0.5098765479485091}, {"indu": "\u901a\u7528\u8bbe\u5907", "mean": 0.49421730222426485}]}}, {"mode": "vega-lite"});
</script></div><div class="output text_html">
<style>
  #altair-viz-058736319ea34728bab7021f6b97921c.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-058736319ea34728bab7021f6b97921c.vega-embed details,
  #altair-viz-058736319ea34728bab7021f6b97921c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-058736319ea34728bab7021f6b97921c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-058736319ea34728bab7021f6b97921c") {
      outputDiv = document.getElementById("altair-viz-058736319ea34728bab7021f6b97921c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-f59f15802e5708c7c27b147111e01786"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "mean", "type": "quantitative"}], "x": {"axis": {"format": ".0%"}, "field": "mean", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "\u5e73\u5747\u589e\u957f\u7387\u540e\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-f59f15802e5708c7c27b147111e01786": [{"indu": "\u516c\u7528\u4e8b\u4e1a", "mean": 0.06285159453712895}, {"indu": "\u7269\u6d41\u884c\u4e1a", "mean": 0.060002210198040314}, {"indu": "\u5316\u5b66\u5236\u836f", "mean": 0.048838712378844316}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "mean": 0.042744845066597675}, {"indu": "\u5851\u6599\u5236\u54c1", "mean": 0.03209537207152838}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "mean": 0.008187003824931269}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "mean": -0.0029822683902523406}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "mean": -0.014129761628410379}, {"indu": "\u5305\u88c5\u6750\u6599", "mean": -0.020563984046789135}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "mean": -0.028431297617450085}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>这63个从来没有亏损过的行业，平均增长率整体奇高，不太好理解。只能解释为大起大落。</p></li>
<li><p>这样就需要用夏普指数来算一下：平均增长率高但波动率小的才是好行业。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indu_res</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
    <span class="n">display</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-7cf5202ef0df46b2b11ba99faf5f3af5.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7cf5202ef0df46b2b11ba99faf5f3af5.vega-embed details,
  #altair-viz-7cf5202ef0df46b2b11ba99faf5f3af5.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7cf5202ef0df46b2b11ba99faf5f3af5"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7cf5202ef0df46b2b11ba99faf5f3af5") {
      outputDiv = document.getElementById("altair-viz-7cf5202ef0df46b2b11ba99faf5f3af5");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-27b168edb1c77819815ab3ff009a01f9"}, "mark": {"type": "bar"}, "encoding": {"x": {"aggregate": "count", "axis": {"title": "\u6570\u91cf"}, "type": "quantitative"}, "y": {"axis": {"format": ".2f"}, "bin": {}, "field": "shapee", "type": "quantitative"}}, "title": "\u590f\u666e\u6307\u6570\u5206\u5e03", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-27b168edb1c77819815ab3ff009a01f9": [{"indu": "\u94f6\u884c", "shapee": 1.3582752203125286}, {"indu": "\u917f\u9152\u884c\u4e1a", "shapee": 0.911859990470979}, {"indu": "\u71c3\u6c14", "shapee": 0.8084691549027427}, {"indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 0.7772787089950199}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 0.7673661126731818}, {"indu": "\u533b\u836f\u5546\u4e1a", "shapee": 0.743173623429347}, {"indu": "\u98df\u54c1\u996e\u6599", "shapee": 0.6578116635139388}, {"indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 0.6398566388733316}, {"indu": "\u7535\u6c60", "shapee": 0.6163632751566618}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 0.5710387418659075}, {"indu": "\u8ba1\u7b97\u673a\u8bbe\u5907", "shapee": 0.5606578298329553}, {"indu": "\u519c\u836f\u517d\u836f", "shapee": 0.5591969888150364}, {"indu": "\u5de5\u7a0b\u54a8\u8be2\u670d\u52a1", "shapee": 0.5516646077587748}, {"indu": "\u533b\u7597\u5668\u68b0", "shapee": 0.5314071583182243}, {"indu": "\u88c5\u4fee\u5efa\u6750", "shapee": 0.4831110088986136}, {"indu": "\u6d88\u8d39\u7535\u5b50", "shapee": 0.45998887722343934}, {"indu": "\u534a\u5bfc\u4f53", "shapee": 0.4504520085580271}, {"indu": "\u5316\u5b66\u5236\u54c1", "shapee": 0.4281432446779523}, {"indu": "\u5316\u5b66\u539f\u6599", "shapee": 0.4245881007816075}, {"indu": "\u7f8e\u5bb9\u62a4\u7406", "shapee": 0.4216807639414712}, {"indu": "\u73bb\u7483\u73bb\u7ea4", "shapee": 0.40029494799451715}, {"indu": "\u901a\u4fe1\u670d\u52a1", "shapee": 0.37765418483475766}, {"indu": "\u4e13\u4e1a\u670d\u52a1", "shapee": 0.3760945163746645}, {"indu": "\u516c\u7528\u4e8b\u4e1a", "shapee": 0.3754900136034861}, {"indu": "\u822a\u8fd0\u6e2f\u53e3", "shapee": 0.37105838972258237}, {"indu": "\u4fdd\u9669", "shapee": 0.3690116669177053}, {"indu": "\u7535\u529b\u884c\u4e1a", "shapee": 0.3611157838166202}, {"indu": "\u975e\u91d1\u5c5e\u6750\u6599", "shapee": 0.35654923960109586}, {"indu": "\u4eea\u5668\u4eea\u8868", "shapee": 0.34893833866764984}, {"indu": "\u533b\u7597\u670d\u52a1", "shapee": 0.341403727456411}, {"indu": "\u822a\u5929\u822a\u7a7a", "shapee": 0.3389499275596173}, {"indu": "\u6c34\u6ce5\u5efa\u6750", "shapee": 0.334041513367207}, {"indu": "\u8d35\u91d1\u5c5e", "shapee": 0.3222829158486361}, {"indu": "\u7535\u7f51\u8bbe\u5907", "shapee": 0.3204642975745712}, {"indu": "\u8bc1\u5238", "shapee": 0.31923287937382117}, {"indu": "\u4e92\u8054\u7f51\u670d\u52a1", "shapee": 0.31551539555591485}, {"indu": "\u901a\u4fe1\u8bbe\u5907", "shapee": 0.3028196390023927}, {"indu": "\u5316\u7ea4\u884c\u4e1a", "shapee": 0.30186332921435455}, {"indu": "\u98ce\u7535\u8bbe\u5907", "shapee": 0.29862587950867636}, {"indu": "\u5bb6\u7528\u8f7b\u5de5", "shapee": 0.29565147855459595}, {"indu": "\u8d38\u6613\u884c\u4e1a", "shapee": 0.2943536698109855}, {"indu": "\u4ea4\u8fd0\u8bbe\u5907", "shapee": 0.2937622867386019}, {"indu": "\u751f\u7269\u5236\u54c1", "shapee": 0.2867011132329593}, {"indu": "\u6587\u5316\u4f20\u5a92", "shapee": 0.28179844088266465}, {"indu": "\u65c5\u6e38\u9152\u5e97", "shapee": 0.27670169569780867}, {"indu": "\u5316\u5b66\u5236\u836f", "shapee": 0.269111892358658}, {"indu": "\u7269\u6d41\u884c\u4e1a", "shapee": 0.2659649548538628}, {"indu": "\u94c1\u8def\u516c\u8def", "shapee": 0.2644522629751915}, {"indu": "\u7efc\u5408\u884c\u4e1a", "shapee": 0.2603570214476284}, {"indu": "\u4e13\u7528\u8bbe\u5907", "shapee": 0.2589778741994353}, {"indu": "\u77f3\u6cb9\u884c\u4e1a", "shapee": 0.2553313133879567}, {"indu": "\u6a61\u80f6\u5236\u54c1", "shapee": 0.25312650758849686}, {"indu": "\u591a\u5143\u91d1\u878d", "shapee": 0.24084325113533792}, {"indu": "\u9020\u7eb8\u5370\u5237", "shapee": 0.2353184198667937}, {"indu": "\u73e0\u5b9d\u9996\u9970", "shapee": 0.2345655676456305}, {"indu": "\u901a\u7528\u8bbe\u5907", "shapee": 0.23148130786159915}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": 0.1680610382599501}, {"indu": "\u5851\u6599\u5236\u54c1", "shapee": 0.15204718911096615}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": 0.031005049462381477}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "shapee": -0.01344269116481806}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.04163478312837625}, {"indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.0837195887920701}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.1717845917340514}]}}, {"mode": "vega-lite"});
</script></div><div class="output text_html">
<style>
  #altair-viz-7b2b0496981d4fb0ac1f56bd42c44049.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7b2b0496981d4fb0ac1f56bd42c44049.vega-embed details,
  #altair-viz-7b2b0496981d4fb0ac1f56bd42c44049.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7b2b0496981d4fb0ac1f56bd42c44049"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7b2b0496981d4fb0ac1f56bd42c44049") {
      outputDiv = document.getElementById("altair-viz-7b2b0496981d4fb0ac1f56bd42c44049");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-426979c592e655355d014c3b3fba60c6"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "shapee", "type": "quantitative"}], "x": {"axis": {"format": ".2f"}, "field": "shapee", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "\u590f\u666e\u6307\u6570\u524d\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-426979c592e655355d014c3b3fba60c6": [{"indu": "\u94f6\u884c", "shapee": 1.3582752203125286}, {"indu": "\u917f\u9152\u884c\u4e1a", "shapee": 0.911859990470979}, {"indu": "\u71c3\u6c14", "shapee": 0.8084691549027427}, {"indu": "\u5bb6\u7535\u884c\u4e1a", "shapee": 0.7772787089950199}, {"indu": "\u5de5\u7a0b\u5efa\u8bbe", "shapee": 0.7673661126731818}, {"indu": "\u533b\u836f\u5546\u4e1a", "shapee": 0.743173623429347}, {"indu": "\u98df\u54c1\u996e\u6599", "shapee": 0.6578116635139388}, {"indu": "\u7535\u5b50\u5143\u4ef6", "shapee": 0.6398566388733316}, {"indu": "\u7535\u6c60", "shapee": 0.6163632751566618}, {"indu": "\u7535\u5b50\u5316\u5b66\u54c1", "shapee": 0.5710387418659075}]}}, {"mode": "vega-lite"});
</script></div><div class="output text_html">
<style>
  #altair-viz-dafcba26056d4c13aa6d0b87878bfdb2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-dafcba26056d4c13aa6d0b87878bfdb2.vega-embed details,
  #altair-viz-dafcba26056d4c13aa6d0b87878bfdb2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-dafcba26056d4c13aa6d0b87878bfdb2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-dafcba26056d4c13aa6d0b87878bfdb2") {
      outputDiv = document.getElementById("altair-viz-dafcba26056d4c13aa6d0b87878bfdb2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-d4f5b23cd5d5e21ae1da67f069824ca9"}, "mark": {"type": "bar"}, "encoding": {"tooltip": [{"field": "indu", "type": "nominal"}, {"field": "shapee", "type": "quantitative"}], "x": {"axis": {"format": ".2f"}, "field": "shapee", "type": "quantitative"}, "y": {"field": "indu", "sort": "-x", "type": "ordinal"}}, "height": 260, "title": "\u590f\u666e\u6307\u6570\u540e\u5341", "width": "container", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-d4f5b23cd5d5e21ae1da67f069824ca9": [{"indu": "\u9020\u7eb8\u5370\u5237", "shapee": 0.2353184198667937}, {"indu": "\u73e0\u5b9d\u9996\u9970", "shapee": 0.2345655676456305}, {"indu": "\u901a\u7528\u8bbe\u5907", "shapee": 0.23148130786159915}, {"indu": "\u6c7d\u8f66\u6574\u8f66", "shapee": 0.1680610382599501}, {"indu": "\u5851\u6599\u5236\u54c1", "shapee": 0.15204718911096615}, {"indu": "\u73af\u4fdd\u884c\u4e1a", "shapee": 0.031005049462381477}, {"indu": "\u6c7d\u8f66\u96f6\u90e8\u4ef6", "shapee": -0.01344269116481806}, {"indu": "\u8f6f\u4ef6\u5f00\u53d1", "shapee": -0.04163478312837625}, {"indu": "\u5305\u88c5\u6750\u6599", "shapee": -0.0837195887920701}, {"indu": "\u7eba\u7ec7\u670d\u88c5", "shapee": -0.1717845917340514}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<ul class="simple">
<li><p>夏普指数的观感比较符合直觉。</p></li>
<li><p>银行和酿酒行业确实是利润增长很不错的行业，但股价表现就不可同日而语了。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">win_code</span><span class="p">():</span>
    <span class="c1"># df = profit.merged.groupby([&#39;code&#39;, &#39;year&#39;], as_index=False)[&#39;profit&#39;].mean()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;profit&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
    <span class="n">wdf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">wdf_inc</span> <span class="o">=</span> <span class="n">wdf</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">all_win</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">stat</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;个股总数&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span><span class="s1">&#39;保持赢利个股&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">wdf</span><span class="p">),</span><span class="s1">&#39;保持利润增长&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_win</span><span class="p">)}</span>

    <span class="n">win_bin</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">win_bin</span> <span class="o">=</span> <span class="n">win_bin</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;行业数&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">names</span><span class="o">=</span> <span class="s1">&#39;负增长次数&#39;</span><span class="p">)</span>
    <span class="n">plot_win_bin</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">plot_ybar</span><span class="p">(</span><span class="n">win_bin</span><span class="p">,</span> <span class="s1">&#39;出现负增长情况统计&#39;</span><span class="p">,</span><span class="s1">&#39;.0f&#39;</span><span class="p">)</span>

    <span class="n">count_gp</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">plot_indu_year</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="p">[</span><span class="n">wdf_inc</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">count_gp</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;inc&#39;</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;inc:Q&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;indu&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span> <span class="n">title</span><span class="p">,</span>
            <span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;container&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_bin</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s1">&#39;.0f&#39;</span><span class="p">):</span>
        <span class="c1"># 第一列是属性，对第二列bin</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bin</span><span class="p">()</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;count()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;数量&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">fig</span>
    
    <span class="k">def</span> <span class="nf">plot_bin_most10</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>        
        <span class="c1"># 数据分析做条形图</span>
        <span class="c1"># 取数据的前十和后十做条形图</span>
        <span class="n">fig_bin</span> <span class="o">=</span> <span class="n">plot_bin</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">分布&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">fig1</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">plot_hbar</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">前十&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">fig2</span> <span class="o">=</span> <span class="n">profit</span><span class="o">.</span><span class="n">plot_hbar</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">后十&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">fig_bin</span><span class="p">,</span> <span class="n">fig1</span><span class="p">,</span> <span class="n">fig2</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">plot_mean</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">wdf_inc</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">plot_bin_most10</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;.0%&#39;</span><span class="p">,</span> <span class="s1">&#39;平均增长率&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plot_shapee</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">wdf_inc</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">wdf_inc</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s1">&#39;shapee&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">profit</span><span class="o">.</span><span class="n">code</span><span class="p">[[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]])</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;shapee&#39;</span><span class="p">]]</span>
        <span class="k">return</span> <span class="n">plot_bin_most10</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="s1">&#39;夏普指数&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">plot_win_bin</span><span class="p">,</span> <span class="n">plot_indu_year</span><span class="p">,</span> <span class="n">wdf_inc</span><span class="p">,</span> <span class="n">plot_mean</span><span class="p">(),</span> <span class="n">plot_shapee</span><span class="p">(),</span> <span class="n">stat</span><span class="p">)</span>

<span class="n">code_res</span> <span class="o">=</span> <span class="n">win_code</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./mywork"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">总体情况</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">利润构成-分行业看</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">分行业利润绝对值</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">行业增长</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">行业利润增长波动</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">利润增长</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Eric
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>